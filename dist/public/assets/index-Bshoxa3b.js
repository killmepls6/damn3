const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Settings-G7jRz-Es.js","assets/ui-vendor-BpIggZZ9.js","assets/react-vendor-C7VPsBAG.js","assets/select-DT_5i3rD.js","assets/dialog-B4soTW2z.js","assets/map-pin-DjCNlwfX.js","assets/trophy-4C1s-oG7.js","assets/monitor-CG5dKqcR.js","assets/utils-vendor-BUCX3MvZ.js","assets/Library-D6PYPnje.js","assets/History-frxILVgN.js","assets/Privacy-CVraYpC5.js","assets/database-B4hG_wp1.js","assets/eye-QF1-RHmE.js","assets/DMCA-B-mIxIXP.js","assets/file-text-CPLU9rer.js","assets/Shop-DtrpKT-D.js","assets/tabs-72BErqnU.js","assets/progress-BQnuNZzz.js","assets/crown-DnGdiNOO.js","assets/zap-CuepkoNH.js","assets/sparkles-DRgf5F8q.js","assets/shopping-cart-1UVixAJg.js","assets/ReadingLists-DYjQVMw9.js","assets/plus-CIXQeA2Y.js","assets/globe-WU3sxzli.js","assets/square-pen-C7u-hRzu.js","assets/Admin-DjZnUjbR.js","assets/users-q6XJjClA.js","assets/activity-r2qUXDVk.js","assets/chart-column-DGETuS3s.js","assets/dollar-sign-c3-1CJgR.js","assets/circle-check-big-BOxg75CQ.js","assets/UserManagement-DFFgiWln.js","assets/alert-dialog-ckVHmtNn.js","assets/calendar-ByILsbL3.js","assets/save-B39N0M5_.js","assets/SeriesManagement-C2_8-4NY.js","assets/square-check-big-DgO1Q1Lh.js","assets/square-Br1AVrZR.js","assets/eye-off-5pfH6nJe.js","assets/image-DlU6CFoZ.js","assets/Analytics-DzFfxOWe.js","assets/chart-vendor-BWHaG5wj.js","assets/download-D6kAy5d3.js","assets/trending-down-CiPk0oR1.js","assets/SystemSettings-CYwiSczy.js","assets/AdIntensityControl-CpQnfzYC.js","assets/CurrencyManagement-D8We7Z5n.js","assets/table-BP19whss.js","assets/ChapterAccessManagement-TXoavxl2.js","assets/checkbox-CKseajx-.js","assets/UserCurrencyManagement-kL618clY.js","assets/minus-CRP8eWos.js","assets/AdminAds-BPMk4b4x.js","assets/Subscriptions-__JSUxVO.js","assets/gift-CIPErmUR.js","assets/SubscriptionManage-DHkkEpnV.js","assets/FlashSales-Bkjtudr1.js","assets/percent-I0-8Qg6_.js","assets/BattlePass-CtYOsdML.js","assets/AdminMonetization-BKYgFHLd.js","assets/DailyRewards-DsUorp15.js","assets/Achievements-xoAmBZTO.js","assets/Referrals-BNeWLJp-.js","assets/Loyalty-QNeSddWR.js","assets/Wallet-4K7KAKrU.js","assets/AdminFlashSales-dk7J7Ytd.js","assets/AdminSubscriptions-Docut9Wl.js"])))=>i.map(i=>d[i]);
import{j as t,V as Ca,R as Ma,A as Aa,C as ka,T as Da,D as Ta,P as wo,c as os,a as jo,b as La,d as No,e as So,f as Io,g as _o,u as Ue,h as Co,i as _e,k as Ie,l as Mo,S as Pa,m as Ao,n as Es,o as Ea,p as Ra,q as ko,r as za,I as Oa,s as Ua,t as Fa,v as Qa,L as qa,w as $a,x as Do,y as To,O as Ba,z as Lo,B as Va,E as Po,F as Ha,G as Ka,H as Eo,J as Wa,K as Ro,M as zo,N as Ga,Q as Za,U as Ya}from"./ui-vendor-BpIggZZ9.js";import{a as Oo,b as l,s as Uo,u as Ne,L as Y,R as nt,d as Rs,e as Ss,f as Fo,h as Qo,F as qo,C as $o,i as Xa,j as Bo,k as Ja,S as Vo,l as H}from"./react-vendor-C7VPsBAG.js";import{c as en,t as Ho,u as tn,s as x,n as Ko,b as sr,a as Wo,r as Go,d as ls,e as Xt,f as Zo,o as J,z as sn,g as z,h as K,i as rn}from"./utils-vendor-BUCX3MvZ.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();var Ft={},Qr;function Yo(){if(Qr)return Ft;Qr=1;var e=Oo();return Ft.createRoot=e.createRoot,Ft.hydrateRoot=e.hydrateRoot,Ft}var qr=Yo();const Xo="modulepreload",Jo=function(e){return"/"+e},$r={},ee=function(s,r,a){let n=Promise.resolve();if(r&&r.length>0){let m=function(h){return Promise.all(h.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");n=m(r.map(h=>{if(h=Jo(h),h in $r)return;$r[h]=!0;const u=h.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${f}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":Xo,u||(p.as="script"),p.crossOrigin="",p.href=h,d&&p.setAttribute("nonce",d),document.head.appendChild(p),u)return new Promise((g,j)=>{p.addEventListener("load",g),p.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return n.then(c=>{for(const d of c||[])d.status==="rejected"&&o(d.reason);return s().catch(o)})};var gt=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},el={setTimeout:(e,s)=>setTimeout(e,s),clearTimeout:e=>clearTimeout(e),setInterval:(e,s)=>setInterval(e,s),clearInterval:e=>clearInterval(e)},tl=class{#e=el;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,s){return this.#e.setTimeout(e,s)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,s){return this.#e.setInterval(e,s)}clearInterval(e){this.#e.clearInterval(e)}},et=new tl;function sl(e){setTimeout(e,0)}var it=typeof window>"u"||"Deno"in globalThis;function ve(){}function rl(e,s){return typeof e=="function"?e(s):e}function zs(e){return typeof e=="number"&&e>=0&&e!==1/0}function an(e,s){return Math.max(e+(s||0)-Date.now(),0)}function Ge(e,s){return typeof e=="function"?e(s):e}function De(e,s){return typeof e=="function"?e(s):e}function Br(e,s){const{type:r="all",exact:a,fetchStatus:n,predicate:o,queryKey:c,stale:d}=e;if(c){if(a){if(s.queryHash!==rr(c,s.options))return!1}else if(!kt(s.queryKey,c))return!1}if(r!=="all"){const m=s.isActive();if(r==="active"&&!m||r==="inactive"&&m)return!1}return!(typeof d=="boolean"&&s.isStale()!==d||n&&n!==s.state.fetchStatus||o&&!o(s))}function Vr(e,s){const{exact:r,status:a,predicate:n,mutationKey:o}=e;if(o){if(!s.options.mutationKey)return!1;if(r){if(ot(s.options.mutationKey)!==ot(o))return!1}else if(!kt(s.options.mutationKey,o))return!1}return!(a&&s.state.status!==a||n&&!n(s))}function rr(e,s){return(s?.queryKeyHashFn||ot)(e)}function ot(e){return JSON.stringify(e,(s,r)=>Os(r)?Object.keys(r).sort().reduce((a,n)=>(a[n]=r[n],a),{}):r)}function kt(e,s){return e===s?!0:typeof e!=typeof s?!1:e&&s&&typeof e=="object"&&typeof s=="object"?Object.keys(s).every(r=>kt(e[r],s[r])):!1}var al=Object.prototype.hasOwnProperty;function nn(e,s){if(e===s)return e;const r=Hr(e)&&Hr(s);if(!r&&!(Os(e)&&Os(s)))return s;const n=(r?e:Object.keys(e)).length,o=r?s:Object.keys(s),c=o.length,d=r?new Array(c):{};let m=0;for(let h=0;h<c;h++){const u=r?h:o[h],f=e[u],p=s[u];if(f===p){d[u]=f,(r?h<n:al.call(e,u))&&m++;continue}if(f===null||p===null||typeof f!="object"||typeof p!="object"){d[u]=p;continue}const g=nn(f,p);d[u]=g,g===f&&m++}return n===c&&m===n?e:d}function Jt(e,s){if(!s||Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}function Hr(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Os(e){if(!Kr(e))return!1;const s=e.constructor;if(s===void 0)return!0;const r=s.prototype;return!(!Kr(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Kr(e){return Object.prototype.toString.call(e)==="[object Object]"}function nl(e){return new Promise(s=>{et.setTimeout(s,e)})}function Us(e,s,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,s):r.structuralSharing!==!1?nn(e,s):s}function il(e,s,r=0){const a=[...e,s];return r&&a.length>r?a.slice(1):a}function ol(e,s,r=0){const a=[s,...e];return r&&a.length>r?a.slice(0,-1):a}var ar=Symbol();function on(e,s){return!e.queryFn&&s?.initialPromise?()=>s.initialPromise:!e.queryFn||e.queryFn===ar?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function ln(e,s){return typeof e=="function"?e(...s):!!e}var ll=class extends gt{#e;#t;#s;constructor(){super(),this.#s=e=>{if(!it&&window.addEventListener){const s=()=>e();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#s=e,this.#t?.(),this.#t=e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(s=>{s(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},nr=new ll;function Fs(){let e,s;const r=new Promise((n,o)=>{e=n,s=o});r.status="pending",r.catch(()=>{});function a(n){Object.assign(r,n),delete r.resolve,delete r.reject}return r.resolve=n=>{a({status:"fulfilled",value:n}),e(n)},r.reject=n=>{a({status:"rejected",reason:n}),s(n)},r}var cl=sl;function dl(){let e=[],s=0,r=d=>{d()},a=d=>{d()},n=cl;const o=d=>{s?e.push(d):n(()=>{r(d)})},c=()=>{const d=e;e=[],d.length&&n(()=>{a(()=>{d.forEach(m=>{r(m)})})})};return{batch:d=>{let m;s++;try{m=d()}finally{s--,s||c()}return m},batchCalls:d=>(...m)=>{o(()=>{d(...m)})},schedule:o,setNotifyFunction:d=>{r=d},setBatchNotifyFunction:d=>{a=d},setScheduler:d=>{n=d}}}var pe=dl(),ul=class extends gt{#e=!0;#t;#s;constructor(){super(),this.#s=e=>{if(!it&&window.addEventListener){const s=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#s=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},es=new ul;function ml(e){return Math.min(1e3*2**e,3e4)}function cn(e){return(e??"online")==="online"?es.isOnline():!0}var Qs=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function dn(e){let s=!1,r=0,a;const n=Fs(),o=()=>n.status!=="pending",c=N=>{if(!o()){const I=new Qs(N);p(I),e.onCancel?.(I)}},d=()=>{s=!0},m=()=>{s=!1},h=()=>nr.isFocused()&&(e.networkMode==="always"||es.isOnline())&&e.canRun(),u=()=>cn(e.networkMode)&&e.canRun(),f=N=>{o()||(a?.(),n.resolve(N))},p=N=>{o()||(a?.(),n.reject(N))},g=()=>new Promise(N=>{a=I=>{(o()||h())&&N(I)},e.onPause?.()}).then(()=>{a=void 0,o()||e.onContinue?.()}),j=()=>{if(o())return;let N;const I=r===0?e.initialPromise:void 0;try{N=I??e.fn()}catch(C){N=Promise.reject(C)}Promise.resolve(N).then(f).catch(C=>{if(o())return;const S=e.retry??(it?0:3),D=e.retryDelay??ml,O=typeof D=="function"?D(r,C):D,$=S===!0||typeof S=="number"&&r<S||typeof S=="function"&&S(r,C);if(s||!$){p(C);return}r++,e.onFail?.(r,C),nl(O).then(()=>h()?void 0:g()).then(()=>{s?p(C):j()})})};return{promise:n,status:()=>n.status,cancel:c,continue:()=>(a?.(),n),cancelRetry:d,continueRetry:m,canStart:u,start:()=>(u()?j():g().then(j),n)}}var un=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),zs(this.gcTime)&&(this.#e=et.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(it?1/0:300*1e3))}clearGcTimeout(){this.#e&&(et.clearTimeout(this.#e),this.#e=void 0)}},hl=class extends un{#e;#t;#s;#a;#r;#i;#o;constructor(e){super(),this.#o=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#a=e.client,this.#s=this.#a.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=Wr(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(e){if(this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const s=Wr(this.options);s.data!==void 0&&(this.setData(s.data,{updatedAt:s.dataUpdatedAt,manual:!0}),this.#e=s)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(e,s){const r=Us(this.state.data,e,this.options);return this.#n({data:r,type:"success",dataUpdatedAt:s?.updatedAt,manual:s?.manual}),r}setState(e,s){this.#n({type:"setState",state:e,setStateOptions:s})}cancel(e){const s=this.#r?.promise;return this.#r?.cancel(e),s?s.then(ve).catch(ve):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>De(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ar||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Ge(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!an(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(s=>s.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(s=>s.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(s=>s!==e),this.observers.length||(this.#r&&(this.#o?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#n({type:"invalidate"})}async fetch(e,s){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&s?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(e&&this.setOptions(e),!this.options.queryFn){const d=this.observers.find(m=>m.options.queryFn);d&&this.setOptions(d.options)}const r=new AbortController,a=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},n=()=>{const d=on(this.options,s),h=(()=>{const u={client:this.#a,queryKey:this.queryKey,meta:this.meta};return a(u),u})();return this.#o=!1,this.options.persister?this.options.persister(d,h,this):d(h)},c=(()=>{const d={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:this.#a,state:this.state,fetchFn:n};return a(d),d})();this.options.behavior?.onFetch(c,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==c.fetchOptions?.meta)&&this.#n({type:"fetch",meta:c.fetchOptions?.meta}),this.#r=dn({initialPromise:s?.initialPromise,fn:c.fetchFn,onCancel:d=>{d instanceof Qs&&d.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(d,m)=>{this.#n({type:"failed",failureCount:d,error:m})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0});try{const d=await this.#r.start();if(d===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(d),this.#s.config.onSuccess?.(d,this),this.#s.config.onSettled?.(d,this.state.error,this),d}catch(d){if(d instanceof Qs){if(d.silent)return this.#r.promise;if(d.revert){if(this.state.data===void 0)throw d;return this.state.data}}throw this.#n({type:"error",error:d}),this.#s.config.onError?.(d,this),this.#s.config.onSettled?.(this.state.data,d,this),d}finally{this.scheduleGc()}}#n(e){const s=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...mn(r.data,this.options),fetchMeta:e.meta??null};case"success":const a={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?a:void 0,a;case"error":const n=e.error;return{...r,error:n,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=s(this.state),pe.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:e})})}};function mn(e,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:cn(s.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Wr(e){const s=typeof e.initialData=="function"?e.initialData():e.initialData,r=s!==void 0,a=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:r?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var fl=class extends gt{constructor(e,s){super(),this.options=s,this.#e=e,this.#n=null,this.#o=Fs(),this.bindMethods(),this.setOptions(s)}#e;#t=void 0;#s=void 0;#a=void 0;#r;#i;#o;#n;#p;#m;#h;#c;#d;#l;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Gr(this.#t,this.options)?this.#u():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return qs(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return qs(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#w(),this.#t.removeObserver(this)}setOptions(e){const s=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof De(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#j(),this.#t.setOptions(this.options),s._defaulted&&!Jt(this.options,s)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const a=this.hasListeners();a&&Zr(this.#t,r,this.options,s)&&this.#u(),this.updateResult(),a&&(this.#t!==r||De(this.options.enabled,this.#t)!==De(s.enabled,this.#t)||Ge(this.options.staleTime,this.#t)!==Ge(s.staleTime,this.#t))&&this.#x();const n=this.#g();a&&(this.#t!==r||De(this.options.enabled,this.#t)!==De(s.enabled,this.#t)||n!==this.#l)&&this.#y(n)}getOptimisticResult(e){const s=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(s,e);return xl(this,r)&&(this.#a=r,this.#i=this.options,this.#r=this.#t.state),r}getCurrentResult(){return this.#a}trackResult(e,s){return new Proxy(e,{get:(r,a)=>(this.trackProp(a),s?.(a),a==="promise"&&!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,a))})}trackProp(e){this.#f.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,s);return r.fetch().then(()=>this.createResult(r,s))}fetch(e){return this.#u({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#a))}#u(e){this.#j();let s=this.#t.fetch(this.options,e);return e?.throwOnError||(s=s.catch(ve)),s}#x(){this.#v();const e=Ge(this.options.staleTime,this.#t);if(it||this.#a.isStale||!zs(e))return;const r=an(this.#a.dataUpdatedAt,e)+1;this.#c=et.setTimeout(()=>{this.#a.isStale||this.updateResult()},r)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(e){this.#w(),this.#l=e,!(it||De(this.options.enabled,this.#t)===!1||!zs(this.#l)||this.#l===0)&&(this.#d=et.setInterval(()=>{(this.options.refetchIntervalInBackground||nr.isFocused())&&this.#u()},this.#l))}#b(){this.#x(),this.#y(this.#g())}#v(){this.#c&&(et.clearTimeout(this.#c),this.#c=void 0)}#w(){this.#d&&(et.clearInterval(this.#d),this.#d=void 0)}createResult(e,s){const r=this.#t,a=this.options,n=this.#a,o=this.#r,c=this.#i,m=e!==r?e.state:this.#s,{state:h}=e;let u={...h},f=!1,p;if(s._optimisticResults){const R=this.hasListeners(),E=!R&&Gr(e,s),te=R&&Zr(e,r,s,a);(E||te)&&(u={...u,...mn(h.data,e.options)}),s._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:g,errorUpdatedAt:j,status:N}=u;p=u.data;let I=!1;if(s.placeholderData!==void 0&&p===void 0&&N==="pending"){let R;n?.isPlaceholderData&&s.placeholderData===c?.placeholderData?(R=n.data,I=!0):R=typeof s.placeholderData=="function"?s.placeholderData(this.#h?.state.data,this.#h):s.placeholderData,R!==void 0&&(N="success",p=Us(n?.data,R,s),f=!0)}if(s.select&&p!==void 0&&!I)if(n&&p===o?.data&&s.select===this.#p)p=this.#m;else try{this.#p=s.select,p=s.select(p),p=Us(n?.data,p,s),this.#m=p,this.#n=null}catch(R){this.#n=R}this.#n&&(g=this.#n,p=this.#m,j=Date.now(),N="error");const C=u.fetchStatus==="fetching",S=N==="pending",D=N==="error",O=S&&C,$=p!==void 0,_={status:N,fetchStatus:u.fetchStatus,isPending:S,isSuccess:N==="success",isError:D,isInitialLoading:O,isLoading:O,data:p,dataUpdatedAt:u.dataUpdatedAt,error:g,errorUpdatedAt:j,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>m.dataUpdateCount||u.errorUpdateCount>m.errorUpdateCount,isFetching:C,isRefetching:C&&!S,isLoadingError:D&&!$,isPaused:u.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:D&&$,isStale:ir(e,s),refetch:this.refetch,promise:this.#o,isEnabled:De(s.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const R=V=>{_.status==="error"?V.reject(_.error):_.data!==void 0&&V.resolve(_.data)},E=()=>{const V=this.#o=_.promise=Fs();R(V)},te=this.#o;switch(te.status){case"pending":e.queryHash===r.queryHash&&R(te);break;case"fulfilled":(_.status==="error"||_.data!==te.value)&&E();break;case"rejected":(_.status!=="error"||_.error!==te.reason)&&E();break}}return _}updateResult(){const e=this.#a,s=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#i=this.options,this.#r.data!==void 0&&(this.#h=this.#t),Jt(s,e))return;this.#a=s;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:a}=this.options,n=typeof a=="function"?a():a;if(n==="all"||!n&&!this.#f.size)return!0;const o=new Set(n??this.#f);return this.options.throwOnError&&o.add("error"),Object.keys(this.#a).some(c=>{const d=c;return this.#a[d]!==e[d]&&o.has(d)})};this.#N({listeners:r()})}#j(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const s=this.#t;this.#t=e,this.#s=e.state,this.hasListeners()&&(s?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#N(e){pe.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(this.#a)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function pl(e,s){return De(s.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&s.retryOnMount===!1)}function Gr(e,s){return pl(e,s)||e.state.data!==void 0&&qs(e,s,s.refetchOnMount)}function qs(e,s,r){if(De(s.enabled,e)!==!1&&Ge(s.staleTime,e)!=="static"){const a=typeof r=="function"?r(e):r;return a==="always"||a!==!1&&ir(e,s)}return!1}function Zr(e,s,r,a){return(e!==s||De(a.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&ir(e,r)}function ir(e,s){return De(s.enabled,e)!==!1&&e.isStaleByTime(Ge(s.staleTime,e))}function xl(e,s){return!Jt(e.getCurrentResult(),s)}function Yr(e){return{onFetch:(s,r)=>{const a=s.options,n=s.fetchOptions?.meta?.fetchMore?.direction,o=s.state.data?.pages||[],c=s.state.data?.pageParams||[];let d={pages:[],pageParams:[]},m=0;const h=async()=>{let u=!1;const f=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(s.signal.aborted?u=!0:s.signal.addEventListener("abort",()=>{u=!0}),s.signal)})},p=on(s.options,s.fetchOptions),g=async(j,N,I)=>{if(u)return Promise.reject();if(N==null&&j.pages.length)return Promise.resolve(j);const S=(()=>{const Z={client:s.client,queryKey:s.queryKey,pageParam:N,direction:I?"backward":"forward",meta:s.options.meta};return f(Z),Z})(),D=await p(S),{maxPages:O}=s.options,$=I?ol:il;return{pages:$(j.pages,D,O),pageParams:$(j.pageParams,N,O)}};if(n&&o.length){const j=n==="backward",N=j?gl:Xr,I={pages:o,pageParams:c},C=N(a,I);d=await g(I,C,j)}else{const j=e??o.length;do{const N=m===0?c[0]??a.initialPageParam:Xr(a,d);if(m>0&&N==null)break;d=await g(d,N),m++}while(m<j)}return d};s.options.persister?s.fetchFn=()=>s.options.persister?.(h,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},r):s.fetchFn=h}}}function Xr(e,{pages:s,pageParams:r}){const a=s.length-1;return s.length>0?e.getNextPageParam(s[a],s,r[a],r):void 0}function gl(e,{pages:s,pageParams:r}){return s.length>0?e.getPreviousPageParam?.(s[0],s,r[0],r):void 0}var yl=class extends un{#e;#t;#s;#a;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#s=e.mutationCache,this.#t=[],this.state=e.state||hn(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(s=>s!==e),this.scheduleGc(),this.#s.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#s.remove(this))}continue(){return this.#a?.continue()??this.execute(this.state.variables)}async execute(e){const s=()=>{this.#r({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#a=dn({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(o,c)=>{this.#r({type:"failed",failureCount:o,error:c})},onPause:()=>{this.#r({type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#s.canRun(this)});const a=this.state.status==="pending",n=!this.#a.canStart();try{if(a)s();else{this.#r({type:"pending",variables:e,isPaused:n}),await this.#s.config.onMutate?.(e,this,r);const c=await this.options.onMutate?.(e,r);c!==this.state.context&&this.#r({type:"pending",context:c,variables:e,isPaused:n})}const o=await this.#a.start();return await this.#s.config.onSuccess?.(o,e,this.state.context,this,r),await this.options.onSuccess?.(o,e,this.state.context,r),await this.#s.config.onSettled?.(o,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(o,null,e,this.state.context,r),this.#r({type:"success",data:o}),o}catch(o){try{throw await this.#s.config.onError?.(o,e,this.state.context,this,r),await this.options.onError?.(o,e,this.state.context,r),await this.#s.config.onSettled?.(void 0,o,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(void 0,o,e,this.state.context,r),o}finally{this.#r({type:"error",error:o})}}finally{this.#s.runNext(this)}}#r(e){const s=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=s(this.state),pe.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#s.notify({mutation:this,type:"updated",action:e})})}};function hn(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var bl=class extends gt{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#s=0}#e;#t;#s;build(e,s,r){const a=new yl({client:e,mutationCache:this,mutationId:++this.#s,options:e.defaultMutationOptions(s),state:r});return this.add(a),a}add(e){this.#e.add(e);const s=Qt(e);if(typeof s=="string"){const r=this.#t.get(s);r?r.push(e):this.#t.set(s,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const s=Qt(e);if(typeof s=="string"){const r=this.#t.get(s);if(r)if(r.length>1){const a=r.indexOf(e);a!==-1&&r.splice(a,1)}else r[0]===e&&this.#t.delete(s)}}this.notify({type:"removed",mutation:e})}canRun(e){const s=Qt(e);if(typeof s=="string"){const a=this.#t.get(s)?.find(n=>n.state.status==="pending");return!a||a===e}else return!0}runNext(e){const s=Qt(e);return typeof s=="string"?this.#t.get(s)?.find(a=>a!==e&&a.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){pe.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const s={exact:!0,...e};return this.getAll().find(r=>Vr(s,r))}findAll(e={}){return this.getAll().filter(s=>Vr(e,s))}notify(e){pe.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return pe.batch(()=>Promise.all(e.map(s=>s.continue().catch(ve))))}};function Qt(e){return e.options.scope?.id}var vl=class extends gt{#e;#t=void 0;#s;#a;constructor(s,r){super(),this.#e=s,this.setOptions(r),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){const r=this.options;this.options=this.#e.defaultMutationOptions(s),Jt(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),r?.mutationKey&&this.options.mutationKey&&ot(r.mutationKey)!==ot(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(s){this.#r(),this.#i(s)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#r(),this.#i()}mutate(s,r){return this.#a=r,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(s)}#r(){const s=this.#s?.state??hn();this.#t={...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset}}#i(s){pe.batch(()=>{if(this.#a&&this.hasListeners()){const r=this.#t.variables,a=this.#t.context,n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};s?.type==="success"?(this.#a.onSuccess?.(s.data,r,a,n),this.#a.onSettled?.(s.data,null,r,a,n)):s?.type==="error"&&(this.#a.onError?.(s.error,r,a,n),this.#a.onSettled?.(void 0,s.error,r,a,n))}this.listeners.forEach(r=>{r(this.#t)})})}},wl=class extends gt{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,s,r){const a=s.queryKey,n=s.queryHash??rr(a,s);let o=this.get(n);return o||(o=new hl({client:e,queryKey:a,queryHash:n,options:e.defaultQueryOptions(s),state:r,defaultOptions:e.getQueryDefaults(a)}),this.add(o)),o}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=this.#e.get(e.queryHash);s&&(e.destroy(),s===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){pe.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const s={exact:!0,...e};return this.getAll().find(r=>Br(s,r))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(r=>Br(e,r)):s}notify(e){pe.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){pe.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){pe.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},jl=class{#e;#t;#s;#a;#r;#i;#o;#n;constructor(e={}){this.#e=e.queryCache||new wl,this.#t=e.mutationCache||new bl,this.#s=e.defaultOptions||{},this.#a=new Map,this.#r=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=nr.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#n=es.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#n?.(),this.#n=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const s=this.defaultQueryOptions({queryKey:e});return this.#e.get(s.queryHash)?.state.data}ensureQueryData(e){const s=this.defaultQueryOptions(e),r=this.#e.build(this,s),a=r.state.data;return a===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Ge(s.staleTime,r))&&this.prefetchQuery(s),Promise.resolve(a))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:s,state:r})=>{const a=r.data;return[s,a]})}setQueryData(e,s,r){const a=this.defaultQueryOptions({queryKey:e}),o=this.#e.get(a.queryHash)?.state.data,c=rl(s,o);if(c!==void 0)return this.#e.build(this,a).setData(c,{...r,manual:!0})}setQueriesData(e,s,r){return pe.batch(()=>this.#e.findAll(e).map(({queryKey:a})=>[a,this.setQueryData(a,s,r)]))}getQueryState(e){const s=this.defaultQueryOptions({queryKey:e});return this.#e.get(s.queryHash)?.state}removeQueries(e){const s=this.#e;pe.batch(()=>{s.findAll(e).forEach(r=>{s.remove(r)})})}resetQueries(e,s){const r=this.#e;return pe.batch(()=>(r.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...e},s)))}cancelQueries(e,s={}){const r={revert:!0,...s},a=pe.batch(()=>this.#e.findAll(e).map(n=>n.cancel(r)));return Promise.all(a).then(ve).catch(ve)}invalidateQueries(e,s={}){return pe.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},s)))}refetchQueries(e,s={}){const r={...s,cancelRefetch:s.cancelRefetch??!0},a=pe.batch(()=>this.#e.findAll(e).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let o=n.fetch(void 0,r);return r.throwOnError||(o=o.catch(ve)),n.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(a).then(ve)}fetchQuery(e){const s=this.defaultQueryOptions(e);s.retry===void 0&&(s.retry=!1);const r=this.#e.build(this,s);return r.isStaleByTime(Ge(s.staleTime,r))?r.fetch(s):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ve).catch(ve)}fetchInfiniteQuery(e){return e.behavior=Yr(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ve).catch(ve)}ensureInfiniteQueryData(e){return e.behavior=Yr(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return es.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#s}setDefaultOptions(e){this.#s=e}setQueryDefaults(e,s){this.#a.set(ot(e),{queryKey:e,defaultOptions:s})}getQueryDefaults(e){const s=[...this.#a.values()],r={};return s.forEach(a=>{kt(e,a.queryKey)&&Object.assign(r,a.defaultOptions)}),r}setMutationDefaults(e,s){this.#r.set(ot(e),{mutationKey:e,defaultOptions:s})}getMutationDefaults(e){const s=[...this.#r.values()],r={};return s.forEach(a=>{kt(e,a.mutationKey)&&Object.assign(r,a.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const s={...this.#s.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return s.queryHash||(s.queryHash=rr(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===ar&&(s.enabled=!1),s}defaultMutationOptions(e){return e?._defaulted?e:{...this.#s.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},fn=l.createContext(void 0),Lt=e=>{const s=l.useContext(fn);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},Nl=({client:e,children:s})=>(l.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),t.jsx(fn.Provider,{value:e,children:s})),pn=l.createContext(!1),Sl=()=>l.useContext(pn);pn.Provider;function Il(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var _l=l.createContext(Il()),Cl=()=>l.useContext(_l),Ml=(e,s)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(s.isReset()||(e.retryOnMount=!1))},Al=e=>{l.useEffect(()=>{e.clearReset()},[e])},kl=({result:e,errorResetBoundary:s,throwOnError:r,query:a,suspense:n})=>e.isError&&!s.isReset()&&!e.isFetching&&a&&(n&&e.data===void 0||ln(r,[e.error,a])),Dl=e=>{if(e.suspense){const r=n=>n==="static"?n:Math.max(n??1e3,1e3),a=e.staleTime;e.staleTime=typeof a=="function"?(...n)=>r(a(...n)):r(a),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Tl=(e,s)=>e.isLoading&&e.isFetching&&!s,Ll=(e,s)=>e?.suspense&&s.isPending,Jr=(e,s,r)=>s.fetchOptimistic(e).catch(()=>{r.clearReset()});function Pl(e,s,r){const a=Sl(),n=Cl(),o=Lt(),c=o.defaultQueryOptions(e);o.getDefaultOptions().queries?._experimental_beforeQuery?.(c),c._optimisticResults=a?"isRestoring":"optimistic",Dl(c),Ml(c,n),Al(n);const d=!o.getQueryCache().get(c.queryHash),[m]=l.useState(()=>new s(o,c)),h=m.getOptimisticResult(c),u=!a&&e.subscribed!==!1;if(l.useSyncExternalStore(l.useCallback(f=>{const p=u?m.subscribe(pe.batchCalls(f)):ve;return m.updateResult(),p},[m,u]),()=>m.getCurrentResult(),()=>m.getCurrentResult()),l.useEffect(()=>{m.setOptions(c)},[c,m]),Ll(c,h))throw Jr(c,m,n);if(kl({result:h,errorResetBoundary:n,throwOnError:c.throwOnError,query:o.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw h.error;return o.getDefaultOptions().queries?._experimental_afterQuery?.(c,h),c.experimental_prefetchInRender&&!it&&Tl(h,a)&&(d?Jr(c,m,n):o.getQueryCache().get(c.queryHash)?.promise)?.catch(ve).finally(()=>{m.updateResult()}),c.notifyOnChangeProps?h:m.trackResult(h)}function we(e,s){return Pl(e,fl)}function Te(e,s){const r=Lt(),[a]=l.useState(()=>new vl(r,e));l.useEffect(()=>{a.setOptions(e)},[a,e]);const n=l.useSyncExternalStore(l.useCallback(c=>a.subscribe(pe.batchCalls(c)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),o=l.useCallback((c,d)=>{a.mutate(c,d).catch(ve)},[a]);if(n.error&&ln(a.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:o,mutateAsync:n.mutate}}async function xn(e){if(!e.ok){const s=await e.text()||e.statusText;throw new Error(`${e.status}: ${s}`)}}let qt=null;async function El(){if(qt)return qt;try{const e=await fetch("/api/csrf-token",{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch CSRF token");return qt=(await e.json()).csrfToken,qt||""}catch(e){throw e}}async function $e(e,s,r){const a={};if(r&&(a["Content-Type"]="application/json"),e!=="GET"&&e!=="HEAD"){const o=await El();a["x-csrf-token"]=o}const n=await fetch(s,{method:e,headers:a,body:r?JSON.stringify(r):void 0,credentials:"include"});return await xn(n),n}const Pt=({on401:e})=>async({queryKey:s})=>{const r=await fetch(s.join("/"),{credentials:"include"});return e==="returnNull"&&r.status===401?null:(await xn(r),await r.json())},se=new jl({defaultOptions:{queries:{queryFn:Pt({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),Rl=1,zl=1e6;let Is=0;function Ol(){return Is=(Is+1)%Number.MAX_SAFE_INTEGER,Is.toString()}const _s=new Map,ea=e=>{if(_s.has(e))return;const s=setTimeout(()=>{_s.delete(e),_t({type:"REMOVE_TOAST",toastId:e})},zl);_s.set(e,s)},Ul=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,Rl)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===s.toast.id?{...r,...s.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=s;return r?ea(r):e.toasts.forEach(a=>{ea(a.id)}),{...e,toasts:e.toasts.map(a=>a.id===r||r===void 0?{...a,open:!1}:a)}}case"REMOVE_TOAST":return s.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==s.toastId)}}},Kt=[];let Wt={toasts:[]};function _t(e){Wt=Ul(Wt,e),Kt.forEach(s=>{s(Wt)})}function Fl({...e}){const s=Ol(),r=n=>_t({type:"UPDATE_TOAST",toast:{...n,id:s}}),a=()=>_t({type:"DISMISS_TOAST",toastId:s});return _t({type:"ADD_TOAST",toast:{...e,id:s,open:!0,onOpenChange:n=>{n||a()}}}),{id:s,dismiss:a,update:r}}function lt(){const[e,s]=l.useState(Wt);return l.useEffect(()=>(Kt.push(s),()=>{const r=Kt.indexOf(s);r>-1&&Kt.splice(r,1)}),[e]),{...e,toast:Fl,dismiss:r=>_t({type:"DISMISS_TOAST",toastId:r})}}const ta=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,sa=en,yt=(e,s)=>r=>{var a;if(s?.variants==null)return sa(e,r?.class,r?.className);const{variants:n,defaultVariants:o}=s,c=Object.keys(n).map(h=>{const u=r?.[h],f=o?.[h];if(u===null)return null;const p=ta(u)||ta(f);return n[h][p]}),d=r&&Object.entries(r).reduce((h,u)=>{let[f,p]=u;return p===void 0||(h[f]=p),h},{}),m=s==null||(a=s.compoundVariants)===null||a===void 0?void 0:a.reduce((h,u)=>{let{class:f,className:p,...g}=u;return Object.entries(g).every(j=>{let[N,I]=j;return Array.isArray(I)?I.includes({...o,...d}[N]):{...o,...d}[N]===I})?[...h,f,p]:h},[]);return sa(e,c,m,r?.class,r?.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gn=(...e)=>e.filter((s,r,a)=>!!s&&a.indexOf(s)===r).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ql={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=l.forwardRef(({color:e="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:o,iconNode:c,...d},m)=>l.createElement("svg",{ref:m,...ql,width:s,height:s,stroke:e,strokeWidth:a?Number(r)*24/Number(s):r,className:gn("lucide",n),...d},[...c.map(([h,u])=>l.createElement(h,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=(e,s)=>{const r=l.forwardRef(({className:a,...n},o)=>l.createElement($l,{ref:o,iconNode:s,className:gn(`lucide-${Ql(e)}`,a),...n}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=F("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=F("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=F("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=F("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=F("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=F("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=F("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=F("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=F("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=F("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=F("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=F("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kl=F("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=F("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=F("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=F("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=F("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=F("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=F("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=F("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=F("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=F("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=F("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=F("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=F("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=F("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=F("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=F("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=F("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=F("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=F("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=F("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=F("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=F("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=F("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=F("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=F("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=F("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=F("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=F("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=F("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=F("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=F("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=F("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=F("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=F("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=F("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=F("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=F("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=F("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=F("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=F("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=F("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function b(...e){return Ho(en(e))}const lc=wo,jn=l.forwardRef(({className:e,...s},r)=>t.jsx(Ca,{ref:r,className:b("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...s}));jn.displayName=Ca.displayName;const cc=yt("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Nn=l.forwardRef(({className:e,variant:s,...r},a)=>t.jsx(Ma,{ref:a,className:b(cc({variant:s}),e),...r}));Nn.displayName=Ma.displayName;const dc=l.forwardRef(({className:e,...s},r)=>t.jsx(Aa,{ref:r,className:b("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...s}));dc.displayName=Aa.displayName;const Sn=l.forwardRef(({className:e,...s},r)=>t.jsx(ka,{ref:r,className:b("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...s,children:t.jsx(Dt,{className:"h-4 w-4"})}));Sn.displayName=ka.displayName;const In=l.forwardRef(({className:e,...s},r)=>t.jsx(Da,{ref:r,className:b("text-sm font-semibold",e),...s}));In.displayName=Da.displayName;const _n=l.forwardRef(({className:e,...s},r)=>t.jsx(Ta,{ref:r,className:b("text-sm opacity-90",e),...s}));_n.displayName=Ta.displayName;function uc(){const{toasts:e}=lt();return t.jsxs(lc,{children:[e.map(function({id:s,title:r,description:a,action:n,...o}){return t.jsxs(Nn,{...o,children:[t.jsxs("div",{className:"grid gap-1",children:[r&&t.jsx(In,{children:r}),a&&t.jsx(_n,{children:a})]}),n,t.jsx(Sn,{})]},s)}),t.jsx(jn,{})]})}var[cs]=os("Tooltip",[La]),or=La(),Cn="TooltipProvider",mc=700,ha="tooltip.open",[hc,Mn]=cs(Cn),An=e=>{const{__scopeTooltip:s,delayDuration:r=mc,skipDelayDuration:a=300,disableHoverableContent:n=!1,children:o}=e,c=l.useRef(!0),d=l.useRef(!1),m=l.useRef(0);return l.useEffect(()=>{const h=m.current;return()=>window.clearTimeout(h)},[]),t.jsx(hc,{scope:s,isOpenDelayedRef:c,delayDuration:r,onOpen:l.useCallback(()=>{window.clearTimeout(m.current),c.current=!1},[]),onClose:l.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>c.current=!0,a)},[a]),isPointerInTransitRef:d,onPointerInTransitChange:l.useCallback(h=>{d.current=h},[]),disableHoverableContent:n,children:o})};An.displayName=Cn;var kn="Tooltip",[Hh,ds]=cs(kn),Hs="TooltipTrigger",fc=l.forwardRef((e,s)=>{const{__scopeTooltip:r,...a}=e,n=ds(Hs,r),o=Mn(Hs,r),c=or(r),d=l.useRef(null),m=Ue(s,d,n.onTriggerChange),h=l.useRef(!1),u=l.useRef(!1),f=l.useCallback(()=>h.current=!1,[]);return l.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),t.jsx(Co,{asChild:!0,...c,children:t.jsx(_e.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...a,ref:m,onPointerMove:Ie(e.onPointerMove,p=>{p.pointerType!=="touch"&&!u.current&&!o.isPointerInTransitRef.current&&(n.onTriggerEnter(),u.current=!0)}),onPointerLeave:Ie(e.onPointerLeave,()=>{n.onTriggerLeave(),u.current=!1}),onPointerDown:Ie(e.onPointerDown,()=>{n.open&&n.onClose(),h.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Ie(e.onFocus,()=>{h.current||n.onOpen()}),onBlur:Ie(e.onBlur,n.onClose),onClick:Ie(e.onClick,n.onClose)})})});fc.displayName=Hs;var pc="TooltipPortal",[Kh,xc]=cs(pc,{forceMount:void 0}),xt="TooltipContent",Dn=l.forwardRef((e,s)=>{const r=xc(xt,e.__scopeTooltip),{forceMount:a=r.forceMount,side:n="top",...o}=e,c=ds(xt,e.__scopeTooltip);return t.jsx(jo,{present:a||c.open,children:c.disableHoverableContent?t.jsx(Tn,{side:n,...o,ref:s}):t.jsx(gc,{side:n,...o,ref:s})})}),gc=l.forwardRef((e,s)=>{const r=ds(xt,e.__scopeTooltip),a=Mn(xt,e.__scopeTooltip),n=l.useRef(null),o=Ue(s,n),[c,d]=l.useState(null),{trigger:m,onClose:h}=r,u=n.current,{onPointerInTransitChange:f}=a,p=l.useCallback(()=>{d(null),f(!1)},[f]),g=l.useCallback((j,N)=>{const I=j.currentTarget,C={x:j.clientX,y:j.clientY},S=jc(C,I.getBoundingClientRect()),D=Nc(C,S),O=Sc(N.getBoundingClientRect()),$=_c([...D,...O]);d($),f(!0)},[f]);return l.useEffect(()=>()=>p(),[p]),l.useEffect(()=>{if(m&&u){const j=I=>g(I,u),N=I=>g(I,m);return m.addEventListener("pointerleave",j),u.addEventListener("pointerleave",N),()=>{m.removeEventListener("pointerleave",j),u.removeEventListener("pointerleave",N)}}},[m,u,g,p]),l.useEffect(()=>{if(c){const j=N=>{const I=N.target,C={x:N.clientX,y:N.clientY},S=m?.contains(I)||u?.contains(I),D=!Ic(C,c);S?p():D&&(p(),h())};return document.addEventListener("pointermove",j),()=>document.removeEventListener("pointermove",j)}},[m,u,c,h,p]),t.jsx(Tn,{...e,ref:o})}),[yc,bc]=cs(kn,{isInside:!1}),vc=Io("TooltipContent"),Tn=l.forwardRef((e,s)=>{const{__scopeTooltip:r,children:a,"aria-label":n,onEscapeKeyDown:o,onPointerDownOutside:c,...d}=e,m=ds(xt,r),h=or(r),{onClose:u}=m;return l.useEffect(()=>(document.addEventListener(ha,u),()=>document.removeEventListener(ha,u)),[u]),l.useEffect(()=>{if(m.trigger){const f=p=>{p.target?.contains(m.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[m.trigger,u]),t.jsx(No,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:t.jsxs(So,{"data-state":m.stateAttribute,...h,...d,ref:s,style:{...d.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[t.jsx(vc,{children:a}),t.jsx(yc,{scope:r,isInside:!0,children:t.jsx(_o,{id:m.contentId,role:"tooltip",children:n||a})})]})})});Dn.displayName=xt;var Ln="TooltipArrow",wc=l.forwardRef((e,s)=>{const{__scopeTooltip:r,...a}=e,n=or(r);return bc(Ln,r).isInside?null:t.jsx(Mo,{...n,...a,ref:s})});wc.displayName=Ln;function jc(e,s){const r=Math.abs(s.top-e.y),a=Math.abs(s.bottom-e.y),n=Math.abs(s.right-e.x),o=Math.abs(s.left-e.x);switch(Math.min(r,a,n,o)){case o:return"left";case n:return"right";case r:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function Nc(e,s,r=5){const a=[];switch(s){case"top":a.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":a.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":a.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":a.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return a}function Sc(e){const{top:s,right:r,bottom:a,left:n}=e;return[{x:n,y:s},{x:r,y:s},{x:r,y:a},{x:n,y:a}]}function Ic(e,s){const{x:r,y:a}=e;let n=!1;for(let o=0,c=s.length-1;o<s.length;c=o++){const d=s[o],m=s[c],h=d.x,u=d.y,f=m.x,p=m.y;u>a!=p>a&&r<(f-h)*(a-u)/(p-u)+h&&(n=!n)}return n}function _c(e){const s=e.slice();return s.sort((r,a)=>r.x<a.x?-1:r.x>a.x?1:r.y<a.y?-1:r.y>a.y?1:0),Cc(s)}function Cc(e){if(e.length<=1)return e.slice();const s=[];for(let a=0;a<e.length;a++){const n=e[a];for(;s.length>=2;){const o=s[s.length-1],c=s[s.length-2];if((o.x-c.x)*(n.y-c.y)>=(o.y-c.y)*(n.x-c.x))s.pop();else break}s.push(n)}s.pop();const r=[];for(let a=e.length-1;a>=0;a--){const n=e[a];for(;r.length>=2;){const o=r[r.length-1],c=r[r.length-2];if((o.x-c.x)*(n.y-c.y)>=(o.y-c.y)*(n.x-c.x))r.pop();else break}r.push(n)}return r.pop(),s.length===1&&r.length===1&&s[0].x===r[0].x&&s[0].y===r[0].y?s:s.concat(r)}var Mc=An,Pn=Dn;const Ac=Mc,kc=l.forwardRef(({className:e,sideOffset:s=4,...r},a)=>t.jsx(Pn,{ref:a,sideOffset:s,className:b("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...r}));kc.displayName=Pn.displayName;var Dc=(e,s,r,a,n,o,c,d)=>{let m=document.documentElement,h=["light","dark"];function u(g){(Array.isArray(e)?e:[e]).forEach(j=>{let N=j==="class",I=N&&o?n.map(C=>o[C]||C):n;N?(m.classList.remove(...I),m.classList.add(o&&o[g]?o[g]:g)):m.setAttribute(j,g)}),f(g)}function f(g){d&&h.includes(g)&&(m.style.colorScheme=g)}function p(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(a)u(a);else try{let g=localStorage.getItem(s)||r,j=c&&g==="system"?p():g;u(j)}catch{}},fa=["light","dark"],En="(prefers-color-scheme: dark)",Tc=typeof window>"u",lr=l.createContext(void 0),Lc={setTheme:e=>{},themes:[]},Wh=()=>{var e;return(e=l.useContext(lr))!=null?e:Lc},Pc=e=>l.useContext(lr)?l.createElement(l.Fragment,null,e.children):l.createElement(Rc,{...e}),Ec=["light","dark"],Rc=({forcedTheme:e,disableTransitionOnChange:s=!1,enableSystem:r=!0,enableColorScheme:a=!0,storageKey:n="theme",themes:o=Ec,defaultTheme:c=r?"system":"light",attribute:d="data-theme",value:m,children:h,nonce:u,scriptProps:f})=>{let[p,g]=l.useState(()=>Oc(n,c)),[j,N]=l.useState(()=>p==="system"?Ds():p),I=m?Object.values(m):o,C=l.useCallback($=>{let Z=$;if(!Z)return;$==="system"&&r&&(Z=Ds());let _=m?m[Z]:Z,R=s?Uc(u):null,E=document.documentElement,te=V=>{V==="class"?(E.classList.remove(...I),_&&E.classList.add(_)):V.startsWith("data-")&&(_?E.setAttribute(V,_):E.removeAttribute(V))};if(Array.isArray(d)?d.forEach(te):te(d),a){let V=fa.includes(c)?c:null,re=fa.includes(Z)?Z:V;E.style.colorScheme=re}R?.()},[u]),S=l.useCallback($=>{let Z=typeof $=="function"?$(p):$;g(Z);try{localStorage.setItem(n,Z)}catch{}},[p]),D=l.useCallback($=>{let Z=Ds($);N(Z),p==="system"&&r&&!e&&C("system")},[p,e]);l.useEffect(()=>{let $=window.matchMedia(En);return $.addListener(D),D($),()=>$.removeListener(D)},[D]),l.useEffect(()=>{let $=Z=>{Z.key===n&&(Z.newValue?g(Z.newValue):S(c))};return window.addEventListener("storage",$),()=>window.removeEventListener("storage",$)},[S]),l.useEffect(()=>{C(e??p)},[e,p]);let O=l.useMemo(()=>({theme:p,setTheme:S,forcedTheme:e,resolvedTheme:p==="system"?j:p,themes:r?[...o,"system"]:o,systemTheme:r?j:void 0}),[p,S,e,j,r,o]);return l.createElement(lr.Provider,{value:O},l.createElement(zc,{forcedTheme:e,storageKey:n,attribute:d,enableSystem:r,enableColorScheme:a,defaultTheme:c,value:m,themes:o,nonce:u,scriptProps:f}),h)},zc=l.memo(({forcedTheme:e,storageKey:s,attribute:r,enableSystem:a,enableColorScheme:n,defaultTheme:o,value:c,themes:d,nonce:m,scriptProps:h})=>{let u=JSON.stringify([r,s,o,e,d,c,a,n]).slice(1,-1);return l.createElement("script",{...h,suppressHydrationWarning:!0,nonce:typeof window>"u"?m:"",dangerouslySetInnerHTML:{__html:`(${Dc.toString()})(${u})`}})}),Oc=(e,s)=>{if(Tc)return;let r;try{r=localStorage.getItem(e)||void 0}catch{}return r||s},Uc=e=>{let s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(s),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(s)},1)}},Ds=e=>(e||(e=window.matchMedia(En)),e.matches?"dark":"light");const Fc=yt("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-11 px-4 py-2",sm:"min-h-11 rounded-md px-3 text-xs",lg:"min-h-11 rounded-md px-8",icon:"h-11 w-11"}},defaultVariants:{variant:"default",size:"default"}}),v=l.forwardRef(({className:e,variant:s,size:r,asChild:a=!1,...n},o)=>{const c=a?Pa:"button";return t.jsx(c,{className:b(Fc({variant:s,size:r,className:e})),ref:o,...n})});v.displayName="Button";const Ze=l.forwardRef(({className:e,...s},r)=>t.jsx("div",{ref:r,className:b("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",e),...s}));Ze.displayName="Card";const Rn=l.forwardRef(({className:e,...s},r)=>t.jsx("div",{ref:r,className:b("flex flex-col space-y-1.5 p-6",e),...s}));Rn.displayName="CardHeader";const zn=l.forwardRef(({className:e,...s},r)=>t.jsx("div",{ref:r,className:b("text-2xl font-semibold leading-none tracking-tight",e),...s}));zn.displayName="CardTitle";const On=l.forwardRef(({className:e,...s},r)=>t.jsx("div",{ref:r,className:b("text-sm text-muted-foreground",e),...s}));On.displayName="CardDescription";const us=l.forwardRef(({className:e,...s},r)=>t.jsx("div",{ref:r,className:b("p-6 pt-0",e),...s}));us.displayName="CardContent";const Qc=l.forwardRef(({className:e,...s},r)=>t.jsx("div",{ref:r,className:b("flex items-center p-6 pt-0",e),...s}));Qc.displayName="CardFooter";class le extends l.Component{constructor(s){super(s),this.handleReset=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0}),this.props.onReset?.()},this.state={hasError:!1}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,r){this.setState({error:s,errorInfo:r})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:t.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:t.jsxs(Ze,{className:"max-w-2xl w-full",children:[t.jsxs(Rn,{children:[t.jsxs("div",{className:"flex items-center gap-2 text-destructive mb-2",children:[t.jsx(ic,{className:"h-6 w-6"}),t.jsx(zn,{className:"text-2xl",children:"Something went wrong"})]}),t.jsx(On,{children:"We apologize for the inconvenience. An unexpected error occurred."})]}),t.jsxs(us,{className:"space-y-4",children:[this.state.error&&t.jsxs("div",{className:"bg-muted p-4 rounded-lg overflow-auto max-h-60",children:[t.jsx("p",{className:"font-mono text-sm text-destructive mb-2",children:this.state.error.toString()}),this.state.errorInfo&&t.jsxs("details",{className:"mt-2",children:[t.jsx("summary",{className:"cursor-pointer text-sm text-muted-foreground hover:text-foreground",children:"Technical Details"}),t.jsx("pre",{className:"mt-2 text-xs text-muted-foreground whitespace-pre-wrap",children:this.state.errorInfo.componentStack})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs(v,{onClick:this.handleReset,variant:"default",className:"flex items-center gap-2",children:[t.jsx(sc,{className:"h-4 w-4"}),"Try Again"]}),t.jsxs(v,{onClick:()=>window.location.href="/",variant:"outline",className:"flex items-center gap-2",children:[t.jsx(Bs,{className:"h-4 w-4"}),"Go Home"]})]})]})]})}):this.props.children}}function qc(){return t.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:t.jsx(Ze,{className:"w-full max-w-md mx-4",children:t.jsxs(us,{className:"pt-6",children:[t.jsxs("div",{className:"flex mb-4 gap-2",children:[t.jsx(bn,{className:"h-8 w-8 text-red-500"}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),t.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const Re=l.forwardRef(({className:e,type:s,...r},a)=>t.jsx("input",{type:s,className:b("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...r}));Re.displayName="Input";function $c(){return Uo.useSyncExternalStore(Bc,()=>!0,()=>!1)}function Bc(){return()=>{}}var cr="Avatar",[Vc]=os(cr),[Hc,Un]=Vc(cr),Fn=l.forwardRef((e,s)=>{const{__scopeAvatar:r,...a}=e,[n,o]=l.useState("idle");return t.jsx(Hc,{scope:r,imageLoadingStatus:n,onImageLoadingStatusChange:o,children:t.jsx(_e.span,{...a,ref:s})})});Fn.displayName=cr;var Qn="AvatarImage",qn=l.forwardRef((e,s)=>{const{__scopeAvatar:r,src:a,onLoadingStatusChange:n=()=>{},...o}=e,c=Un(Qn,r),d=Kc(a,o),m=Ao(h=>{n(h),c.onImageLoadingStatusChange(h)});return Es(()=>{d!=="idle"&&m(d)},[d,m]),d==="loaded"?t.jsx(_e.img,{...o,ref:s,src:a}):null});qn.displayName=Qn;var $n="AvatarFallback",Bn=l.forwardRef((e,s)=>{const{__scopeAvatar:r,delayMs:a,...n}=e,o=Un($n,r),[c,d]=l.useState(a===void 0);return l.useEffect(()=>{if(a!==void 0){const m=window.setTimeout(()=>d(!0),a);return()=>window.clearTimeout(m)}},[a]),c&&o.imageLoadingStatus!=="loaded"?t.jsx(_e.span,{...n,ref:s}):null});Bn.displayName=$n;function pa(e,s){return e?s?(e.src!==s&&(e.src=s),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Kc(e,{referrerPolicy:s,crossOrigin:r}){const a=$c(),n=l.useRef(null),o=a?(n.current||(n.current=new window.Image),n.current):null,[c,d]=l.useState(()=>pa(o,e));return Es(()=>{d(pa(o,e))},[o,e]),Es(()=>{const m=f=>()=>{d(f)};if(!o)return;const h=m("loaded"),u=m("error");return o.addEventListener("load",h),o.addEventListener("error",u),s&&(o.referrerPolicy=s),typeof r=="string"&&(o.crossOrigin=r),()=>{o.removeEventListener("load",h),o.removeEventListener("error",u)}},[o,r,s]),c}var Vn=Fn,Hn=qn,Kn=Bn;const Ct=l.forwardRef(({className:e,...s},r)=>t.jsx(Vn,{ref:r,className:b(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,e),...s}));Ct.displayName=Vn.displayName;const Mt=l.forwardRef(({className:e,...s},r)=>t.jsx(Hn,{ref:r,className:b("aspect-square h-full w-full",e),...s}));Mt.displayName=Hn.displayName;const At=l.forwardRef(({className:e,...s},r)=>t.jsx(Kn,{ref:r,className:b("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...s}));At.displayName=Kn.displayName;const Vt=Do,Ht=To,Wc=l.forwardRef(({className:e,inset:s,children:r,...a},n)=>t.jsxs(Ea,{ref:n,className:b("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",e),...a,children:[r,t.jsx(Je,{className:"ml-auto"})]}));Wc.displayName=Ea.displayName;const Gc=l.forwardRef(({className:e,...s},r)=>t.jsx(Ra,{ref:r,className:b("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...s}));Gc.displayName=Ra.displayName;const It=l.forwardRef(({className:e,sideOffset:s=4,...r},a)=>t.jsx(ko,{children:t.jsx(za,{ref:a,sideOffset:s,className:b("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...r})}));It.displayName=za.displayName;const ne=l.forwardRef(({className:e,inset:s,...r},a)=>t.jsx(Oa,{ref:a,className:b("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",e),...r}));ne.displayName=Oa.displayName;const Zc=l.forwardRef(({className:e,children:s,checked:r,...a},n)=>t.jsxs(Ua,{ref:n,className:b("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...a,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(Fa,{children:t.jsx(Vl,{className:"h-4 w-4"})})}),s]}));Zc.displayName=Ua.displayName;const Yc=l.forwardRef(({className:e,children:s,...r},a)=>t.jsxs(Qa,{ref:a,className:b("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(Fa,{children:t.jsx(Wl,{className:"h-2 w-2 fill-current"})})}),s]}));Yc.displayName=Qa.displayName;const Xc=l.forwardRef(({className:e,inset:s,...r},a)=>t.jsx(qa,{ref:a,className:b("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",e),...r}));Xc.displayName=qa.displayName;const Yt=l.forwardRef(({className:e,...s},r)=>t.jsx($a,{ref:r,className:b("-mx-1 my-1 h-px bg-muted",e),...s}));Yt.displayName=$a.displayName;const Jc=Eo,ed=Lo,Wn=l.forwardRef(({className:e,...s},r)=>t.jsx(Ba,{className:b("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s,ref:r}));Wn.displayName=Ba.displayName;const td=yt("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Gn=l.forwardRef(({side:e="right",className:s,children:r,...a},n)=>t.jsxs(ed,{children:[t.jsx(Wn,{}),t.jsxs(Va,{ref:n,className:b(td({side:e}),s),...a,children:[r,t.jsxs(Po,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[t.jsx(Dt,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Gn.displayName=Va.displayName;const Zn=({className:e,...s})=>t.jsx("div",{className:b("flex flex-col space-y-2 text-center sm:text-left",e),...s});Zn.displayName="SheetHeader";const Yn=l.forwardRef(({className:e,...s},r)=>t.jsx(Ha,{ref:r,className:b("text-lg font-semibold text-foreground",e),...s}));Yn.displayName=Ha.displayName;const sd=l.forwardRef(({className:e,...s},r)=>t.jsx(Ka,{ref:r,className:b("text-sm text-muted-foreground",e),...s}));sd.displayName=Ka.displayName;var rd="Separator",xa="horizontal",ad=["horizontal","vertical"],Xn=l.forwardRef((e,s)=>{const{decorative:r,orientation:a=xa,...n}=e,o=nd(a)?a:xa,d=r?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return t.jsx(_e.div,{"data-orientation":o,...d,...n,ref:s})});Xn.displayName=rd;function nd(e){return ad.includes(e)}var Jn=Xn;const ut=l.forwardRef(({className:e,orientation:s="horizontal",decorative:r=!0,...a},n)=>t.jsx(Jn,{ref:n,decorative:r,orientation:s,className:b("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...a}));ut.displayName=Jn.displayName;function ei(){const{data:e,isLoading:s}=we({queryKey:["/api/auth/user"],queryFn:Pt({on401:"returnNull"}),retry:!1});return{user:e,isLoading:s,isAuthenticated:!!e,isAdmin:!!e?.isAdmin,isOwner:e?.role==="owner",isStaff:["staff","admin","owner"].includes(e?.role||"")||!!e?.isAdmin,isPremium:["premium","staff","admin","owner"].includes(e?.role||"")||!!e?.isAdmin,isStaffOrAbove:["staff","admin","owner"].includes(e?.role||"")||!!e?.isAdmin}}function id(){const[,e]=Ne(),{toast:s}=lt(),r=Te({mutationFn:async()=>$e("POST","/api/auth/logout"),onSuccess:()=>{se.setQueryData(["/api/auth/user"],null),se.invalidateQueries({predicate:a=>{const n=a.queryKey[0];return n!=="/api/auth/user"&&(n.includes("/api/user/")||n.includes("/api/admin/")||n.includes("user-specific"))}}),s({title:"Signed out",description:"You've been successfully signed out."}),e("/")},onError:a=>{s({title:"Sign out failed",description:a.message||"Unable to sign out. Please try again.",variant:"destructive"})}});return{logout:r.mutate,isLoggingOut:r.isPending}}function od(e,s,r=!0){const{data:a,isLoading:n,error:o,refetch:c}=we({queryKey:["search",e,s],queryFn:async()=>{const d=new URLSearchParams;e&&d.append("q",e),s?.genre&&d.append("genre",s.genre),s?.status&&d.append("status",s.status),s?.type&&d.append("type",s.type);const m=await fetch(`/api/search?${d.toString()}`,{headers:{"X-Requested-With":"XMLHttpRequest"}});if(!m.ok)throw new Error(`Search failed: ${m.statusText}`);return m.json()},enabled:r&&(!!e?.trim()||!!s?.genre||!!s?.status||!!s?.type),staleTime:3e5,gcTime:6e5});return{results:a?.results??[],total:a?.total??0,isLoading:n,error:o,refetch:c,isEmpty:!n&&a?.results?.length===0}}function ld(){const[e,s]=l.useState(""),[r,a]=l.useState({}),[n,o]=l.useState(!1),c=l.useCallback((h,u)=>{a(f=>({...f,[h]:u||void 0}))},[]),d=l.useCallback(()=>{s(""),a({}),o(!1)},[]),m=l.useCallback(()=>{a({})},[]);return{query:e,setQuery:s,filters:r,setFilters:a,updateFilter:c,clearSearch:d,clearFilters:m,isSearchActive:n,setIsSearchActive:o}}const cd=yt("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function ze({className:e,variant:s,...r}){return t.jsx("div",{className:b(cd({variant:s}),e),...r})}function ga({query:e,filters:s,isOpen:r,onClose:a,onResultClick:n}){const{results:o,total:c,isLoading:d,error:m,isEmpty:h}=od(e,s,r&&!!e?.trim()),u=l.useRef(null);return l.useEffect(()=>{function f(p){u.current&&!u.current.contains(p.target)&&a()}if(r)return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[r,a]),!r||!e?.trim()?null:t.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 z-50",children:t.jsx(Ze,{ref:u,className:"bg-card/95 backdrop-blur-md border-card-border/50 shadow-xl max-h-96 overflow-hidden",children:t.jsxs(us,{className:"p-0",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-card-border/30",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(rs,{className:"w-4 h-4 text-muted-foreground"}),t.jsx("span",{className:"text-sm font-medium",children:d?"Searching...":`${c} results for "${e}"`})]}),t.jsx(v,{variant:"ghost",size:"icon",onClick:a,className:"h-6 w-6 hover:bg-muted/50",children:t.jsx(Dt,{className:"w-4 h-4"})})]}),d&&t.jsxs("div",{className:"flex items-center justify-center py-8",children:[t.jsx(vn,{className:"w-6 h-6 animate-spin text-primary"}),t.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Searching..."})]}),m&&t.jsx("div",{className:"p-4 text-center text-destructive",children:t.jsx("p",{children:"Search failed. Please try again."})}),h&&!d&&t.jsxs("div",{className:"p-4 text-center text-muted-foreground",children:[t.jsx(Oe,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),t.jsxs("p",{children:['No manga found for "',e,'"']}),t.jsx("p",{className:"text-xs mt-1",children:"Try different keywords or check spelling"})]}),o.length>0&&!d&&t.jsx("div",{className:"max-h-80 overflow-y-auto",children:o.map(f=>t.jsx(dd,{result:f,onClick:()=>{n(),a()}},f.id))}),o.length>0&&!d&&t.jsx("div",{className:"border-t border-card-border/30 p-3",children:t.jsx(Y,{href:`/search?q=${encodeURIComponent(e)}`,children:t.jsxs(v,{variant:"ghost",className:"w-full text-sm hover:bg-primary/10",onClick:()=>{n(),a()},children:["View all ",c," results"]})})})]})})})}function dd({result:e,onClick:s}){return t.jsx(Y,{href:`/manga/${e.id}`,children:t.jsx("div",{className:"p-3 hover:bg-muted/30 cursor-pointer transition-colors border-b border-card-border/20 last:border-b-0",onClick:s,children:t.jsxs("div",{className:"flex space-x-3",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-12 h-16 bg-muted rounded overflow-hidden",children:e.coverImageUrl?t.jsx("img",{src:e.coverImageUrl,alt:e.title,className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full flex items-center justify-center",children:t.jsx(Oe,{className:"w-6 h-6 text-muted-foreground/50"})})})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"font-medium text-sm truncate",children:e.title}),e.author&&t.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:["by ",e.author]}),t.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[t.jsx(ze,{variant:"secondary",className:"text-xs",children:e.type}),e.status&&t.jsx(ze,{variant:e.status==="completed"?"default":"outline",className:"text-xs",children:e.status}),e.rating&&t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(Le,{className:"w-3 h-3 fill-yellow-400 text-yellow-400"}),t.jsx("span",{className:"text-xs text-muted-foreground",children:e.rating})]}),e.totalChapters&&t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx($s,{className:"w-3 h-3 text-muted-foreground"}),t.jsxs("span",{className:"text-xs text-muted-foreground",children:[e.totalChapters," ch"]})]})]}),e.genres.length>0&&t.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.genres.slice(0,3).map(r=>t.jsx(ze,{variant:"outline",className:"text-xs",children:r},r)),e.genres.length>3&&t.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",e.genres.length-3]})]})]})]})})})}function ti(){return we({queryKey:["/api/currency/balance"],queryFn:async()=>{const e=await fetch("/api/currency/balance",{credentials:"include"});if(e.status===401)return{balance:0};if(!e.ok)throw new Error("Failed to fetch currency balance");return e.json()},retry:!1})}function Gh(e=!0){return we({queryKey:["/api/currency/packages",{activeOnly:e}],queryFn:async()=>{const s=await fetch(`/api/currency/packages?activeOnly=${e}`,{credentials:"include"});if(!s.ok)throw new Error("Failed to fetch currency packages");return s.json()}})}function Zh(e=50,s=0){return we({queryKey:["/api/currency/transactions",{limit:e,offset:s}],queryFn:async()=>{const r=await fetch(`/api/currency/transactions?limit=${e}&offset=${s}`,{credentials:"include"});if(r.status===401)return[];if(!r.ok)throw new Error("Failed to fetch transactions");return r.json()},retry:!1})}function Yh(){return we({queryKey:["/api/currency/purchases"],queryFn:async()=>{const e=await fetch("/api/currency/purchases",{credentials:"include"});if(e.status===401)return[];if(!e.ok)throw new Error("Failed to fetch purchases");return e.json()},retry:!1})}function Et(){const{user:e,isAuthenticated:s,isAdmin:r,isLoading:a}=ei(),{logout:n,isLoggingOut:o}=id(),[,c]=Ne(),{data:d}=ti(),{query:m,setQuery:h,filters:u,updateFilter:f,setIsSearchActive:p}=ld(),[g,j]=l.useState(!1),[N,I]=l.useState(!1),[C,S]=l.useState(!1),D=l.useRef(null),O=["Action","Romance","Fantasy","Drama","Comedy","Adventure","Supernatural","Slice of Life"],$=l.useCallback(re=>{const A=re.target.value;h(A),I(!!A.trim()),p(!!A.trim())},[h,p]),Z=l.useCallback(()=>{m.trim()&&I(!0)},[m]),_=l.useCallback(()=>{I(!1),j(!1)},[]),R=l.useCallback(()=>{I(!1),j(!1)},[]),E=l.useCallback(()=>{j(!g)},[g]),te=l.useCallback(re=>{f("genre",re),j(!1)},[f]),V=l.useCallback(re=>{f("status",re),j(!1)},[f]);return t.jsxs("nav",{className:"bg-gradient-to-r from-background via-background to-background/95 border-b border-border/50 backdrop-blur-md bg-background/90 sticky top-0 z-50 shadow-lg shadow-primary/5 w-full",children:[t.jsxs("div",{className:"w-full mx-auto px-4 sm:px-6 lg:px-8 max-w-none",children:[t.jsxs("div",{className:"flex items-center justify-between h-16",children:[t.jsx(Y,{href:"/",children:t.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 min-w-0 cursor-pointer hover:opacity-90 transition-opacity duration-200",children:[t.jsx(Oe,{className:"w-8 h-8 text-primary drop-shadow-lg motion-safe:animate-pulse"}),t.jsx("span",{className:"text-lg sm:text-xl lg:text-2xl font-bold bg-gradient-to-r from-primary via-accent to-purple-400 bg-clip-text text-transparent drop-shadow-sm truncate",children:"MangaVerse"})]})}),t.jsx("div",{className:"flex-1 max-w-3xl mx-4 sm:mx-6 lg:mx-8 hidden md:block",children:t.jsxs("div",{className:"relative",ref:D,children:[t.jsxs("div",{className:"flex items-center",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(rs,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground w-5 h-5 z-10 pointer-events-none"}),t.jsx(Re,{type:"search",placeholder:"Search manga, manhwa, characters...",className:"h-12 pl-12 pr-4 w-full bg-card/80 backdrop-blur-sm border-2 border-card-border/50 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:bg-card/95 transition-all duration-300 placeholder:text-muted-foreground/60 rounded-l-xl rounded-r-none text-base shadow-sm hover:shadow-md hover:bg-card/90",value:m,onChange:$,onFocus:Z,"data-testid":"search-input"})]}),t.jsx(v,{variant:"outline",size:"icon",onClick:E,className:`h-12 w-12 rounded-l-none rounded-r-xl border-l-0 border-2 border-card-border/50 bg-card/80 backdrop-blur-sm hover:bg-primary/10 hover:border-primary/30 transition-all duration-300 shadow-sm hover:shadow-md ${g?"bg-primary/20 text-primary border-primary/50":""}`,"data-testid":"advanced-search-toggle",children:t.jsx(ia,{className:"w-5 h-5"})})]}),t.jsx(ga,{query:m,filters:u,isOpen:N,onClose:_,onResultClick:R}),g&&t.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-card/95 backdrop-blur-md border-2 border-card-border/50 rounded-xl p-4 shadow-xl z-50",children:t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Genre"}),t.jsxs(Vt,{children:[t.jsx(Ht,{asChild:!0,children:t.jsxs(v,{variant:"outline",className:"w-full justify-between bg-background/50",children:[u.genre||"Select Genre"," ",t.jsx(aa,{className:"w-4 h-4"})]})}),t.jsxs(It,{className:"w-48",children:[t.jsx(ne,{onClick:()=>te(""),className:"hover:bg-primary/10",children:"All Genres"}),O.map(re=>t.jsx(ne,{onClick:()=>te(re),className:"hover:bg-primary/10",children:re},re))]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),t.jsxs(Vt,{children:[t.jsx(Ht,{asChild:!0,children:t.jsxs(v,{variant:"outline",className:"w-full justify-between bg-background/50",children:[u.status||"Any Status"," ",t.jsx(aa,{className:"w-4 h-4"})]})}),t.jsxs(It,{children:[t.jsx(ne,{onClick:()=>V(""),className:"hover:bg-primary/10",children:"Any Status"}),t.jsx(ne,{onClick:()=>V("ongoing"),className:"hover:bg-primary/10",children:"Ongoing"}),t.jsx(ne,{onClick:()=>V("completed"),className:"hover:bg-primary/10",children:"Completed"}),t.jsx(ne,{onClick:()=>V("hiatus"),className:"hover:bg-primary/10",children:"Hiatus"})]})]})]})]})})]})}),t.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[s&&t.jsxs("div",{className:"hidden lg:flex items-center space-x-1",children:[t.jsxs(v,{variant:"ghost",size:"sm",className:"hover:bg-primary/10 hover:text-primary transition-all duration-300","data-testid":"nav-shop",onClick:()=>c("/shop"),children:[t.jsx(mt,{className:"w-4 h-4 mr-1"}),t.jsx("span",{className:"hidden xl:inline",children:"Shop"}),t.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-xs font-semibold bg-primary/20 text-primary rounded",children:d?.balance||0})]}),t.jsxs(v,{variant:"ghost",size:"sm",className:"hover:bg-primary/10 hover:text-primary transition-all duration-300","data-testid":"nav-history",onClick:()=>c("/history"),children:[t.jsx(Ms,{className:"w-4 h-4 mr-1"}),t.jsx("span",{className:"hidden xl:inline",children:"History"})]}),t.jsxs(v,{variant:"ghost",size:"sm",className:"hover:bg-primary/10 hover:text-primary transition-all duration-300","data-testid":"nav-library",onClick:()=>c("/library"),children:[t.jsx(As,{className:"w-4 h-4 mr-1"}),t.jsx("span",{className:"hidden xl:inline",children:"Library"})]})]}),t.jsx("div",{className:"hidden md:flex items-center space-x-2",children:a?t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-8 h-8 bg-muted/50 animate-pulse rounded-full"}),t.jsx("div",{className:"w-16 h-6 bg-muted/50 animate-pulse rounded"})]}):s?t.jsxs(Vt,{children:[t.jsx(Ht,{asChild:!0,children:t.jsx(v,{variant:"ghost",className:"relative h-8 w-8 rounded-full hover:bg-primary/10 transition-all duration-300","data-testid":"profile-dropdown",children:t.jsxs(Ct,{className:"h-8 w-8",children:[t.jsx(Mt,{src:e?.profileImageUrl||e?.profilePicture||void 0,alt:e?.username||"Profile"}),t.jsx(At,{className:"bg-primary/10 text-primary text-sm font-medium",children:e?.username?.charAt(0)?.toUpperCase()||e?.firstName?.charAt(0)?.toUpperCase()||"U"})]})})}),t.jsxs(It,{align:"end",className:"w-56 bg-card/95 backdrop-blur-md border-card-border/50",children:[t.jsxs("div",{className:"flex items-center justify-start gap-2 p-2",children:[t.jsxs(Ct,{className:"h-8 w-8",children:[t.jsx(Mt,{src:e?.profileImageUrl||e?.profilePicture||void 0,alt:e?.username||"Profile"}),t.jsx(At,{className:"bg-primary/10 text-primary text-sm",children:e?.username?.charAt(0)?.toUpperCase()||e?.firstName?.charAt(0)?.toUpperCase()||"U"})]}),t.jsxs("div",{className:"flex flex-col space-y-1",children:[t.jsx("p",{className:"text-sm font-medium leading-none",children:e?.username||`${e?.firstName||""} ${e?.lastName||""}`.trim()||"User"}),t.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:e?.email||""})]})]}),t.jsx(Yt,{}),t.jsxs(ne,{onSelect:()=>c("/shop"),className:"hover:bg-primary/10",children:[t.jsx(mt,{className:"w-4 h-4 mr-2"}),t.jsxs("div",{className:"flex items-center justify-between flex-1",children:[t.jsx("span",{children:"Shop"}),t.jsx("span",{className:"text-xs text-primary font-semibold ml-2",children:d?.balance||0})]})]}),t.jsxs(ne,{onSelect:()=>c("/daily-rewards"),className:"hover:bg-primary/10",children:[t.jsx(Le,{className:"w-4 h-4 mr-2"}),"Daily Rewards"]}),t.jsxs(ne,{onSelect:()=>c("/achievements"),className:"hover:bg-primary/10",children:[t.jsx(Le,{className:"w-4 h-4 mr-2"}),"Achievements"]}),t.jsxs(ne,{onSelect:()=>c("/battle-pass"),className:"hover:bg-primary/10",children:[t.jsx(Bt,{className:"w-4 h-4 mr-2"}),"Battle Pass"]}),t.jsxs(ne,{onSelect:()=>c("/subscriptions"),className:"hover:bg-primary/10",children:[t.jsx(Le,{className:"w-4 h-4 mr-2 text-amber-500"}),"VIP Subscriptions"]}),t.jsxs(ne,{onSelect:()=>c("/flash-sales"),className:"hover:bg-primary/10",children:[t.jsx(Le,{className:"w-4 h-4 mr-2 text-red-500"})," Flash Sales"]}),t.jsx(Yt,{}),t.jsxs(ne,{onSelect:()=>c("/settings"),className:"hover:bg-primary/10",children:[t.jsx(Zt,{className:"w-4 h-4 mr-2"}),"Profile Settings"]}),r&&t.jsxs(ne,{onSelect:()=>c("/admin"),className:"hover:bg-primary/10",children:[t.jsx(ks,{className:"w-4 h-4 mr-2"}),"Admin Panel"]}),t.jsx(Yt,{}),t.jsxs(ne,{onSelect:()=>n(),disabled:o,className:"hover:bg-primary/10 focus:bg-destructive/10 focus:text-destructive","data-testid":"logout-button",children:[t.jsx(oa,{className:"w-4 h-4 mr-2"}),o?"Signing out...":"Sign out"]})]})]}):t.jsxs(t.Fragment,{children:[t.jsx(Y,{href:"/login",children:t.jsxs(v,{variant:"ghost",size:"sm",className:"hover:bg-primary/10 hover:text-primary transition-all duration-300 border border-transparent hover:border-primary/20","data-testid":"nav-login",children:[t.jsx(Zt,{className:"w-4 h-4 mr-1"}),"Login"]})}),t.jsx(Y,{href:"/signup",children:t.jsxs(v,{size:"sm",className:"bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90 text-white shadow-lg hover:shadow-primary/25 transition-all duration-300","data-testid":"nav-signup",children:[t.jsx(da,{className:"w-4 h-4 mr-1"}),"Sign Up"]})})]})}),t.jsxs(Vt,{children:[t.jsx(Ht,{asChild:!0,children:t.jsx(v,{variant:"ghost",size:"icon",className:"hover:bg-primary/10 hover:text-primary transition-all duration-300","data-testid":"nav-more-options",children:t.jsx(Vs,{className:"w-4 h-4"})})}),t.jsxs(It,{align:"end",className:"w-48 bg-card/95 backdrop-blur-md border-card-border/50",children:[r&&t.jsxs(ne,{onSelect:()=>c("/admin"),className:"hover:bg-primary/10",children:[t.jsx(ks,{className:"w-4 h-4 mr-2"}),"Admin Panel"]}),t.jsxs(ne,{className:"lg:hidden hover:bg-primary/10",onSelect:()=>c("/shop"),children:[t.jsx(mt,{className:"w-4 h-4 mr-2"}),t.jsxs("div",{className:"flex items-center justify-between flex-1",children:[t.jsx("span",{children:"Shop"}),t.jsx("span",{className:"text-xs text-primary font-semibold ml-2",children:d?.balance||0})]})]}),t.jsxs(ne,{className:"lg:hidden hover:bg-primary/10",onSelect:()=>c("/history"),children:[t.jsx(Ms,{className:"w-4 h-4 mr-2"}),"History"]}),t.jsxs(ne,{className:"lg:hidden hover:bg-primary/10",onSelect:()=>c("/library"),children:[t.jsx(As,{className:"w-4 h-4 mr-2"}),"Library"]}),t.jsxs(ne,{className:"hover:bg-primary/10",onSelect:()=>c("/browse?filter=popular"),children:[t.jsx(Le,{className:"w-4 h-4 mr-2"}),"Popular"]}),t.jsxs(ne,{className:"hover:bg-primary/10",onSelect:()=>c("/browse?filter=latest"),children:[t.jsx($s,{className:"w-4 h-4 mr-2"}),"Latest"]}),t.jsxs(ne,{className:"hover:bg-primary/10",onSelect:()=>c("/browse?filter=popular"),children:[t.jsx(Bt,{className:"w-4 h-4 mr-2"}),"Trending"]})]})]}),t.jsx(v,{variant:"ghost",size:"icon",className:"md:hidden hover:bg-primary/10 hover:text-primary transition-all duration-300","data-testid":"mobile-menu",onClick:()=>S(!0),children:t.jsx(wn,{className:"w-5 h-5"})})]})]}),t.jsx("div",{className:"md:hidden pb-4",children:t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:"flex",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(rs,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-muted-foreground w-5 h-5 z-10 pointer-events-none"}),t.jsx(Re,{type:"search",placeholder:"Search manga, manhwa...",className:"h-11 pl-11 pr-3 w-full bg-card/80 backdrop-blur-sm border-2 border-card-border/50 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:bg-card/95 transition-all duration-300 placeholder:text-muted-foreground/60 rounded-l-lg rounded-r-none text-base shadow-sm",value:m,onChange:$,onFocus:Z,"data-testid":"mobile-search-input"})]}),t.jsx(v,{variant:"outline",size:"icon",onClick:E,className:`h-11 w-11 rounded-l-none rounded-r-lg border-l-0 border-2 border-card-border/50 bg-card/80 hover:bg-primary/10 hover:border-primary/30 transition-all duration-300 shadow-sm ${g?"bg-primary/20 text-primary border-primary/50":""}`,"data-testid":"mobile-advanced-search-toggle",children:t.jsx(ia,{className:"w-5 h-5"})})]}),t.jsx(ga,{query:m,filters:u,isOpen:N,onClose:_,onResultClick:R})]})})]}),t.jsx(Jc,{open:C,onOpenChange:S,children:t.jsxs(Gn,{side:"left",className:"w-[300px] sm:w-[400px]",children:[t.jsx(Zn,{children:t.jsxs(Yn,{className:"flex items-center space-x-2",children:[t.jsx(Oe,{className:"w-6 h-6 text-primary"}),t.jsx("span",{className:"bg-gradient-to-r from-primary via-accent to-purple-400 bg-clip-text text-transparent",children:"MangaVerse"})]})}),t.jsxs("div",{className:"mt-6 flex flex-col space-y-4",children:[a?t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-muted/50 rounded-lg",children:[t.jsx("div",{className:"w-12 h-12 bg-muted animate-pulse rounded-full"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"w-24 h-4 bg-muted animate-pulse rounded mb-2"}),t.jsx("div",{className:"w-32 h-3 bg-muted animate-pulse rounded"})]})]}):s?t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-card border border-border rounded-lg",children:[t.jsxs(Ct,{className:"h-12 w-12",children:[t.jsx(Mt,{src:e?.profileImageUrl||e?.profilePicture||void 0,alt:e?.username||"Profile"}),t.jsx(At,{className:"bg-primary/10 text-primary text-lg font-medium",children:e?.username?.charAt(0)?.toUpperCase()||e?.firstName?.charAt(0)?.toUpperCase()||"U"})]}),t.jsxs("div",{className:"flex flex-col flex-1",children:[t.jsx("p",{className:"text-sm font-semibold",children:e?.username||`${e?.firstName||""} ${e?.lastName||""}`.trim()||"User"}),t.jsx("p",{className:"text-xs text-muted-foreground truncate",children:e?.email||""})]})]}):t.jsxs("div",{className:"flex flex-col space-y-2",children:[t.jsx(Y,{href:"/login",children:t.jsxs(v,{variant:"outline",className:"w-full justify-start",onClick:()=>S(!1),children:[t.jsx(Zt,{className:"w-4 h-4 mr-2"}),"Login"]})}),t.jsx(Y,{href:"/signup",children:t.jsxs(v,{className:"w-full justify-start bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90",onClick:()=>S(!1),children:[t.jsx(da,{className:"w-4 h-4 mr-2"}),"Sign Up"]})})]}),t.jsx(ut,{}),s&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex flex-col space-y-2",children:[t.jsxs(v,{variant:"ghost",className:"w-full justify-start hover:bg-primary/10 group",onClick:()=>{c("/shop"),S(!1)},children:[t.jsx(mt,{className:"w-4 h-4 mr-2 text-primary"}),t.jsx("span",{className:"flex-1 text-left",children:"Shop"}),t.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-semibold bg-primary/20 text-primary rounded-full group-hover:bg-primary/30 transition-colors",children:d?.balance||0})]}),t.jsxs(v,{variant:"ghost",className:"w-full justify-start hover:bg-primary/10",onClick:()=>{c("/history"),S(!1)},children:[t.jsx(Ms,{className:"w-4 h-4 mr-2"}),"History"]}),t.jsxs(v,{variant:"ghost",className:"w-full justify-start hover:bg-primary/10",onClick:()=>{c("/library"),S(!1)},children:[t.jsx(As,{className:"w-4 h-4 mr-2"}),"Library"]})]}),t.jsx(ut,{}),t.jsxs("div",{className:"flex flex-col space-y-2",children:[t.jsx("p",{className:"text-xs font-semibold text-muted-foreground px-2",children:"Monetization"}),t.jsxs(v,{variant:"ghost",className:"w-full justify-start hover:bg-primary/10",onClick:()=>{c("/subscriptions"),S(!1)},children:[t.jsx(Le,{className:"w-4 h-4 mr-2 text-amber-500"}),"VIP Subscriptions"]}),t.jsxs(v,{variant:"ghost",className:"w-full justify-start hover:bg-primary/10",onClick:()=>{c("/flash-sales"),S(!1)},children:[t.jsx(Le,{className:"w-4 h-4 mr-2 text-red-500"})," Flash Sales"]}),t.jsxs(v,{variant:"ghost",className:"w-full justify-start hover:bg-primary/10",onClick:()=>{c("/battle-pass"),S(!1)},children:[t.jsx(Bt,{className:"w-4 h-4 mr-2"}),"Battle Pass"]}),t.jsxs(v,{variant:"ghost",className:"w-full justify-start hover:bg-primary/10",onClick:()=>{c("/daily-rewards"),S(!1)},children:[t.jsx(Le,{className:"w-4 h-4 mr-2"}),"Daily Rewards"]}),t.jsxs(v,{variant:"ghost",className:"w-full justify-start hover:bg-primary/10",onClick:()=>{c("/achievements"),S(!1)},children:[t.jsx(Le,{className:"w-4 h-4 mr-2"}),"Achievements"]})]}),t.jsx(ut,{})]}),t.jsxs("div",{className:"flex flex-col space-y-2",children:[t.jsxs(v,{variant:"ghost",className:"w-full justify-start hover:bg-primary/10",onClick:()=>{c("/browse?filter=popular"),S(!1)},children:[t.jsx(Le,{className:"w-4 h-4 mr-2"}),"Popular"]}),t.jsxs(v,{variant:"ghost",className:"w-full justify-start hover:bg-primary/10",onClick:()=>{c("/browse?filter=latest"),S(!1)},children:[t.jsx($s,{className:"w-4 h-4 mr-2"}),"Latest"]}),t.jsxs(v,{variant:"ghost",className:"w-full justify-start hover:bg-primary/10",onClick:()=>{c("/browse?filter=popular"),S(!1)},children:[t.jsx(Bt,{className:"w-4 h-4 mr-2"}),"Trending"]})]}),s&&t.jsxs(t.Fragment,{children:[t.jsx(ut,{}),t.jsxs("div",{className:"flex flex-col space-y-2",children:[t.jsxs(v,{variant:"ghost",className:"w-full justify-start hover:bg-primary/10",onClick:()=>{c("/settings"),S(!1)},children:[t.jsx(Vs,{className:"w-4 h-4 mr-2"}),"Profile Settings"]}),r&&t.jsxs(v,{variant:"ghost",className:"w-full justify-start hover:bg-primary/10",onClick:()=>{c("/admin"),S(!1)},children:[t.jsx(ks,{className:"w-4 h-4 mr-2"}),"Admin Panel"]})]}),t.jsx(ut,{}),t.jsxs(v,{variant:"ghost",className:"w-full justify-start hover:bg-destructive/10 hover:text-destructive",onClick:()=>{n(),S(!1)},disabled:o,children:[t.jsx(oa,{className:"w-4 h-4 mr-2"}),o?"Signing out...":"Sign out"]})]})]})]})})]})}function ud(){const[e,s]=l.useState([]),[r,a]=l.useState(!0),[,n]=Ne();l.useEffect(()=>{(async()=>{try{const f=await fetch("/api/sections/featured");if(f.ok){const p=await f.json();s(p)}}catch{}finally{a(!1)}})()},[]);const[o,c]=l.useState(!1),[d,m]=l.useState(0);l.useEffect(()=>{e.length>0&&m(-(305*e.length))},[e.length]);const h=e.length>0?[...e,...e,...e]:[];return l.useEffect(()=>{if(o||e.length===0)return;let u;const f=.6,p=()=>{m(g=>{const N=g-f,I=305*e.length,C=-I*2;return N<=C?N+I:N}),u=requestAnimationFrame(p)};return u=requestAnimationFrame(p),()=>cancelAnimationFrame(u)},[e.length,o]),r?t.jsx("div",{className:"relative min-h-screen w-full overflow-hidden bg-gradient-to-br from-slate-900 via-indigo-900 to-purple-900",children:t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx("p",{className:"text-white text-lg",children:"Loading featured series..."})})}):e.length===0?t.jsxs("div",{className:"relative min-h-screen w-full overflow-hidden bg-gradient-to-br from-slate-900 via-indigo-900 to-purple-900",children:[t.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(138,43,226,0.2),transparent_60%)]"}),t.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_80%_80%,rgba(255,20,147,0.15),transparent_60%)]"}),t.jsx("div",{className:"absolute inset-0 bg-grid-white/[0.03] bg-[size:60px_60px] opacity-40"}),t.jsx("div",{className:"relative z-10 text-center pt-16 sm:pt-20 lg:pt-24 pb-8 sm:pb-12 lg:pb-16",children:t.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl font-bold bg-gradient-to-r from-white via-slate-200 to-slate-400 bg-clip-text text-transparent mb-4 sm:mb-6 tracking-tight",children:"Featured Series"}),t.jsx("p",{className:"text-base sm:text-lg lg:text-xl text-slate-400 font-light leading-relaxed mb-8",children:"Discover amazing manga and manhwa series"})]})}),t.jsx("div",{className:"relative z-10 text-center py-12",children:t.jsx("div",{className:"text-center py-8 bg-muted/30 rounded-lg mx-8",children:t.jsx("p",{className:"text-muted-foreground",children:"No featured series assigned yet. Use the admin panel to assign series to this section."})})})]}):t.jsx("div",{className:"relative h-[50vh] w-full overflow-hidden",children:t.jsx("div",{className:"relative z-10 px-2 sm:px-4 lg:px-1 w-full h-full flex items-center",children:t.jsx("div",{className:"relative max-w-none lg:max-w-[95vw] mx-auto w-full",children:t.jsx("div",{className:"relative overflow-hidden h-[60%]",children:t.jsx("div",{className:"flex h-full",style:{transform:`translateX(${d}px)`,transition:o?"transform 0.3s ease-out":"none"},children:h.map((u,f)=>t.jsx("div",{className:"flex-shrink-0 w-[300px] px-2.5 cursor-pointer h-full flex items-center bg-transparent",onClick:()=>n(`/manga/${u.id}`),"data-testid":`hero-card-${u.id}`,children:t.jsx("div",{className:"relative w-full h-[85%] max-w-[300px] mx-auto",style:{aspectRatio:"3/4"},children:t.jsx("img",{src:u.coverImageUrl||"/api/covers/placeholder",alt:u.title,className:"absolute inset-0 w-[95%] h-[95%] object-cover object-center m-auto rounded-lg",onError:p=>{const g=p.target;g.src!=="/api/covers/placeholder"&&(g.src="/api/covers/placeholder")}})})},`${u.id}-${f}`))})})})})})}function P({className:e,...s}){return t.jsx("div",{className:b("animate-pulse rounded-md bg-muted",e),...s})}function si(){return t.jsxs("div",{className:"bg-gradient-to-br from-card/80 to-card/60 backdrop-blur-md rounded-2xl border border-border/40 p-0 relative overflow-hidden",style:{aspectRatio:"4.5 / 2.5"},children:[t.jsxs("div",{className:"flex h-full",children:[t.jsxs("div",{className:"relative flex-shrink-0",style:{width:"42%"},children:[t.jsx(P,{className:"w-full h-full rounded-none"}),t.jsx("div",{className:"absolute top-2 left-2",children:t.jsx(P,{className:"w-16 h-5 rounded-full"})}),t.jsx("div",{className:"absolute bottom-2 left-2",children:t.jsx(P,{className:"w-7 h-7 rounded-full"})})]}),t.jsxs("div",{className:"flex flex-col min-w-0 p-2 sm:p-3 lg:p-4",style:{width:"58%"},children:[t.jsxs("div",{className:"mb-2 sm:mb-3 flex-shrink-0",children:[t.jsx(P,{className:"h-4 sm:h-5 w-full mb-1"}),t.jsx(P,{className:"h-4 sm:h-5 w-3/4"})]}),t.jsxs("div",{className:"space-y-1 flex-1",children:[t.jsx(P,{className:"h-6 w-full"}),t.jsx(P,{className:"h-6 w-full"}),t.jsx(P,{className:"h-6 w-full"}),t.jsx(P,{className:"h-6 w-5/6"})]})]})]}),t.jsx("div",{className:"absolute inset-0 -translate-x-full animate-[shimmer_2s_infinite] bg-gradient-to-r from-transparent via-white/5 to-transparent pointer-events-none"})]})}function md(e){const s=new Date,r=new Date(e),a=s.getTime()-r.getTime(),n=Math.floor(a/6e4),o=Math.floor(a/36e5),c=Math.floor(a/864e5),d=Math.floor(a/6048e5),m=Math.floor(a/2592e6);return n<1?"Just now":n<60?`${n}m ago`:o<24?`${o}h ago`:c<7?`${c}d ago`:d<4?`${d}w ago`:`${m}mo ago`}function hd(){const[e,s]=l.useState([]),[r,a]=l.useState(!0),[n,o]=l.useState("hot"),[,c]=Ne(),d=async(m=!1)=>{a(!0);try{const h=m?`/api/sections/popular-today?t=${Date.now()}`:"/api/sections/popular-today",u=await fetch(h,{cache:m?"no-cache":"default"});if(u.ok){const f=await u.json();s(f)}}catch{}finally{a(!1)}};return l.useEffect(()=>{d()},[]),r?t.jsx("section",{className:"py-6 sm:py-8 w-full",children:t.jsxs("div",{className:"max-w-none mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-10 sm:mb-8 lg:mb-10 gap-4",children:t.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[t.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 lg:w-14 lg:h-14 bg-gradient-to-br from-[#707ff5] via-[#a195f9] to-[#f2a1f2] rounded-lg flex items-center justify-center shadow-lg shadow-[#a195f9]/30",children:t.jsx(ts,{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-7 lg:h-7 text-white"})}),t.jsxs("h2",{className:"text-xl sm:text-2xl lg:text-3xl xl:text-4xl font-bold text-white",children:["Latest ",t.jsx("span",{className:"bg-gradient-to-r from-[#a195f9] to-[#f2a1f2] bg-clip-text text-transparent",children:"Releases"})]})]})}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-[4vw] sm:gap-6 w-full",children:[...Array(8)].map((m,h)=>t.jsx(si,{},h))})]})}):t.jsx("section",{className:"py-6 sm:py-8 w-full",children:t.jsxs("div",{className:"max-w-none mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-10 sm:mb-8 lg:mb-10 gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[t.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 lg:w-14 lg:h-14 bg-gradient-to-br from-[#707ff5] via-[#a195f9] to-[#f2a1f2] rounded-lg flex items-center justify-center shadow-lg shadow-[#a195f9]/30 transition-transform hover:scale-105",children:t.jsx(ts,{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-7 lg:h-7 text-white"})}),t.jsxs("h2",{className:"text-xl sm:text-2xl lg:text-3xl xl:text-4xl font-bold text-white",children:["Latest ",t.jsx("span",{className:"bg-gradient-to-r from-[#a195f9] to-[#f2a1f2] bg-clip-text text-transparent",children:"Releases"})]})]}),t.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-2 sm:gap-4",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(v,{variant:n==="hot"?"default":"outline",size:"sm",className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${n==="hot"?"bg-primary hover:bg-primary/90 text-primary-foreground":"bg-transparent border-border text-muted-foreground hover:text-foreground hover:border-primary"}`,onClick:()=>o("hot"),"aria-pressed":n==="hot",children:" Hot"}),t.jsx(v,{variant:n==="new"?"default":"outline",size:"sm",className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${n==="new"?"bg-primary hover:bg-primary/90 text-primary-foreground":"bg-transparent border-border text-muted-foreground hover:text-foreground hover:border-primary"}`,onClick:()=>o("new"),"aria-pressed":n==="new",children:" New"})]}),t.jsxs(v,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground transition-colors duration-200 flex items-center space-x-1",onClick:()=>c("/browse"),children:[t.jsx("span",{className:"hidden sm:inline",children:"VIEW ALL"}),t.jsx("span",{className:"sm:hidden",children:"ALL"}),t.jsx(Je,{className:"h-4 w-4"})]})]})]}),e.length===0?t.jsx("div",{className:"text-center py-8 bg-muted/30 rounded-lg",children:t.jsx("p",{className:"text-muted-foreground",children:"No recent series assigned yet. Use the admin panel to assign series to this section."})}):t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-[4vw] sm:gap-6 w-full",children:e.slice(0,12).map((m,h)=>t.jsx(fd,{item:m,navigate:c},m.id))})]})})}function fd({item:e,navigate:s}){const[r,a]=l.useState(4),n=l.useRef(null),o=l.useRef(null),c=l.useRef(null),d=e.latestChapters||[];return l.useEffect(()=>{const m=()=>{if(!n.current||!o.current||!c.current)return;const u=n.current.offsetHeight,f=c.current.offsetHeight,g=u-f-32,N=Math.floor(g/28),I=Math.max(1,Math.min(N,Math.min(4,d.length)));a(I)};m();const h=new ResizeObserver(m);return n.current&&h.observe(n.current),()=>{h.disconnect()}},[d.length]),t.jsx("div",{ref:n,className:"group anime-card bg-gradient-to-br from-card/80 to-card/60 backdrop-blur-md rounded-2xl border border-border/40 p-0 transition-all duration-300 hover:border-primary/60 hover:from-card/90 hover:to-card/80 relative overflow-hidden hover:shadow-2xl hover:shadow-primary/20 hover:scale-[1.02]",style:{aspectRatio:"4.5 / 2.5"},"data-testid":`popular-item-${e.id}`,children:t.jsxs("div",{className:"flex h-full",children:[t.jsx("div",{className:"relative cursor-pointer flex-shrink-0",onClick:()=>s(`/manga/${e.id}`),style:{width:"42%"},children:t.jsxs("div",{className:"relative w-full h-full overflow-hidden",children:[e.coverImageUrl?t.jsx("img",{src:e.coverImageUrl,alt:e.title,className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full bg-gradient-to-br from-muted/80 to-muted/60 flex items-center justify-center",children:t.jsx("span",{className:"text-muted-foreground text-xs font-medium",children:"No cover"})}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-transparent to-background/10"}),t.jsx("div",{className:"absolute top-2 left-2",children:t.jsx(ze,{className:"bg-gradient-to-r from-primary to-primary/80 text-primary-foreground text-[10px] px-2 py-1 rounded-full font-medium shadow-lg backdrop-blur-sm border border-primary/20",children:e.genres?.[0]||"Manhwa"})}),t.jsx("div",{className:"absolute bottom-2 left-2",children:t.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-full p-1.5 shadow-lg",children:t.jsx(yn,{className:"w-3 h-3 text-white",fill:"currentColor"})})})]})}),t.jsxs("div",{ref:o,className:"flex flex-col min-w-0 p-2 sm:p-3 lg:p-4",style:{width:"58%"},children:[t.jsx("div",{ref:c,className:"mb-2 sm:mb-3 flex-shrink-0",children:t.jsx("h3",{className:"text-foreground font-bold text-xs sm:text-sm lg:text-base line-clamp-2 mb-1 sm:mb-2 group-hover:text-primary transition-colors duration-300 leading-tight break-words",children:e.title})}),t.jsx("div",{className:"space-y-1 flex-1",children:d.length===0?t.jsx("div",{className:"text-muted-foreground text-xs text-center py-2",children:"No chapters yet"}):d.slice(0,r).map((m,h)=>t.jsxs("div",{onClick:()=>s(`/manga/${e.id}/chapter/${m.chapterNumber}`),className:`group/chapter transition-all duration-300 cursor-pointer hover:shadow-md ${h===0?"bg-gradient-to-r from-primary/10 to-accent/10 border border-primary/30 hover:from-primary/20 hover:to-accent/20 hover:border-primary/50 relative overflow-hidden":h===1?"bg-card/40 border border-border/20 hover:bg-card/60 hover:border-border/40":"bg-card/30 border border-border/10 hover:bg-card/50 hover:border-border/30"} rounded-md px-2 py-1`,children:[h===0&&t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/5 to-transparent opacity-0 group-hover/chapter:opacity-100 transition-opacity duration-300"}),t.jsxs("div",{className:"flex items-center justify-between relative z-10 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-1.5 min-w-0 flex-1",children:[m.hasLock?t.jsx(Gt,{className:`w-2.5 h-2.5 ${h===0?"text-amber-500":"text-amber-500/80"} flex-shrink-0`}):t.jsx("div",{className:"w-2.5 h-2.5 flex items-center justify-center flex-shrink-0",children:t.jsx("div",{className:"w-1.5 h-1.5 bg-foreground/40 rounded-full"})}),t.jsxs("span",{className:`font-medium truncate text-[11px] sm:text-xs ${h===0?"text-foreground":h===1?"text-foreground/90":"text-foreground/80"}`,children:["Chapter ",m.chapterNumber]}),m.isNew&&t.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 text-white text-[8px] px-1 py-0.5 rounded-full font-medium shadow-sm hidden sm:inline-flex items-center",children:t.jsx(ts,{className:"w-2 h-2"})})]}),t.jsx("span",{className:"text-muted-foreground text-[9px] sm:text-[10px] font-medium flex-shrink-0 ml-1",children:md(m.createdAt)})]})]},m.id))})]})]})})}function pd(){return t.jsxs("div",{className:"relative overflow-hidden rounded-lg",children:[t.jsxs("div",{className:"hidden sm:block relative w-full h-56 sm:h-64 lg:h-72",children:[t.jsx(P,{className:"w-full h-full rounded-lg"}),t.jsx("div",{className:"absolute top-3 left-3 z-10",children:t.jsx(P,{className:"w-20 h-6 rounded-full"})}),t.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black/70 backdrop-blur-sm p-4 z-10",children:[t.jsx(P,{className:"h-5 w-3/4 mb-2"}),t.jsx(P,{className:"h-4 w-full"}),t.jsx(P,{className:"h-4 w-5/6 mt-1"})]})]}),t.jsxs("div",{className:"sm:hidden flex rounded-lg overflow-hidden mx-2",children:[t.jsx("div",{className:"relative w-28 flex-shrink-0",children:t.jsx(P,{className:"w-full h-full aspect-[3/4] rounded-none"})}),t.jsxs("div",{className:"flex-1 p-3 flex flex-col justify-center min-w-0 bg-black/50 backdrop-blur-sm",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1.5",children:[t.jsx(P,{className:"h-4 flex-1"}),t.jsx(P,{className:"w-10 h-4 rounded-full flex-shrink-0"})]}),t.jsx(P,{className:"h-3 w-full mt-1"}),t.jsx(P,{className:"h-3 w-3/4 mt-1"})]})]}),t.jsx("div",{className:"absolute inset-0 -translate-x-full animate-[shimmer_2s_infinite] bg-gradient-to-r from-transparent via-white/5 to-transparent pointer-events-none"})]})}function xd(){const[e,s]=l.useState([]),[r,a]=l.useState(!0),[,n]=Ne();return l.useEffect(()=>{(async()=>{try{const c=await fetch("/api/sections/pinned");if(c.ok){const d=await c.json();s(d)}}catch{}finally{a(!1)}})()},[]),r?t.jsx("section",{className:"py-6 sm:py-8 w-full",children:t.jsxs("div",{className:"max-w-none mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-10 sm:mb-8 lg:mb-10",children:[t.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 lg:w-14 lg:h-14 bg-gradient-to-br from-[#f2a1f2] via-[#c77dc7] to-[#a195f9] rounded-lg flex items-center justify-center shadow-lg shadow-[#f2a1f2]/30",children:t.jsx(ss,{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-7 lg:h-7 text-white"})}),t.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl xl:text-4xl font-bold text-white",children:t.jsx("span",{className:"bg-gradient-to-r from-[#f2a1f2] to-[#c77dc7] bg-clip-text text-transparent",children:"Pinned"})})]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:[...Array(6)].map((o,c)=>t.jsx(pd,{},c))})]})}):t.jsx("section",{className:"py-6 sm:py-8 w-full",children:t.jsxs("div",{className:"max-w-none mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-10 sm:mb-8 lg:mb-10",children:[t.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 lg:w-14 lg:h-14 bg-gradient-to-br from-[#f2a1f2] via-[#c77dc7] to-[#a195f9] rounded-lg flex items-center justify-center shadow-lg shadow-[#f2a1f2]/30 transition-transform hover:scale-105",children:t.jsx(ss,{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-7 lg:h-7 text-white"})}),t.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl xl:text-4xl font-bold text-white",children:t.jsx("span",{className:"bg-gradient-to-r from-[#f2a1f2] to-[#c77dc7] bg-clip-text text-transparent",children:"Pinned"})})]}),e.length===0?t.jsx("div",{className:"text-center py-8 bg-muted/30 rounded-lg",children:t.jsx("p",{className:"text-muted-foreground",children:"No pinned series yet. Use the admin panel to pin series to this section."})}):t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:e.slice(0,6).map(o=>t.jsx(gd,{item:o,navigate:n},o.id))})]})})}function gd({item:e,navigate:s}){return t.jsxs("div",{className:"group relative overflow-hidden rounded-lg cursor-pointer transition-all duration-300 hover:shadow-2xl hover:shadow-[#f2a1f2]/30",onClick:()=>s(`/manga/${e.id}`),"data-testid":`pinned-item-${e.id}`,children:[t.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none z-20 overflow-hidden",children:t.jsx("div",{className:"absolute inset-0 -translate-x-full bg-gradient-to-r from-transparent via-white/20 to-transparent group-hover:animate-shimmer w-[200%]"})}),t.jsxs("div",{className:"hidden sm:block relative w-full h-56 sm:h-64 lg:h-72",children:[e.coverImageUrl?t.jsx("img",{src:e.coverImageUrl,alt:e.title,className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full bg-gradient-to-br from-[#f2a1f2]/30 to-[#c77dc7]/20 flex items-center justify-center",children:t.jsx("span",{className:"text-muted-foreground text-sm font-medium",children:"No cover"})}),t.jsx("div",{className:"absolute top-3 left-3 z-10",children:t.jsxs(ze,{className:"bg-gradient-to-r from-[#f2a1f2] to-[#c77dc7] text-white text-xs px-3 py-1 rounded-full font-semibold shadow-lg border-0",children:[t.jsx(ss,{className:"w-3 h-3 mr-1 inline"}),"Pinned"]})}),t.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black/70 backdrop-blur-sm p-4 z-10",children:[t.jsx("h3",{className:"text-white font-bold text-base sm:text-lg mb-1.5 line-clamp-2 sm:line-clamp-1 leading-tight",children:e.title}),t.jsx("p",{className:"text-gray-200 text-xs sm:text-sm line-clamp-3 leading-relaxed",children:e.description||"No description available"})]})]}),t.jsxs("div",{className:"sm:hidden flex rounded-lg overflow-hidden mx-2",children:[t.jsx("div",{className:"relative w-28 flex-shrink-0",children:e.coverImageUrl?t.jsx("img",{src:e.coverImageUrl,alt:e.title,className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full bg-gradient-to-br from-[#f2a1f2]/30 to-[#c77dc7]/20 flex items-center justify-center",children:t.jsx("span",{className:"text-muted-foreground text-xs",children:"No cover"})})}),t.jsxs("div",{className:"flex-1 p-3 flex flex-col justify-center min-w-0 bg-black/50 backdrop-blur-sm",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1.5",children:[t.jsx("h3",{className:"text-white font-bold text-sm line-clamp-2 leading-tight flex-1",children:e.title}),t.jsx(ze,{className:"bg-gradient-to-r from-[#f2a1f2] to-[#c77dc7] text-white text-[10px] px-2 py-0.5 rounded-full font-medium flex-shrink-0",children:t.jsx(ss,{className:"w-2.5 h-2.5 inline"})})]}),t.jsx("p",{className:"text-gray-300 text-xs line-clamp-2 leading-relaxed",children:e.description||"No description available"})]})]})]})}function yd(){const[e,s]=l.useState([]),[r,a]=l.useState(!0),[,n]=Ne();l.useEffect(()=>{(async()=>{try{const E=await fetch("/api/sections/latest-updates");if(E.ok){const te=await E.json();s(te)}}catch{}finally{a(!1)}})()},[]);const[o,c]=l.useState(0),[d,m]=l.useState(0),[h,u]=l.useState(0),[f,p]=l.useState(!1),[g,j]=l.useState(new Set),[N,I]=l.useState(C());function C(){if(typeof window>"u")return"sm";const R=window.innerWidth;return R>=1280?"xl":R>=1024?"lg":R>=768?"md":"sm"}const S=R=>{switch(R){case"xl":return 8;case"lg":return 6;case"md":return 5;case"sm":return 4;default:return 3}},D=e.slice(0,S(N)),O=e[d];l.useRef(null),l.useRef([]),l.useEffect(()=>{const R=()=>{const E=C();E!==N&&(I(E),c(0),m(0))};return window.addEventListener("resize",R),()=>window.removeEventListener("resize",R)},[N]),l.useEffect(()=>{e.length>0&&(o>=e.length||d>=e.length)&&(c(0),m(0))},[e.length,o,d]);const $=l.useCallback(()=>{D.length>0&&c(R=>(R+1)%D.length)},[D.length]);l.useEffect(()=>{if(!f&&D.length>0){const R=setInterval($,3500);return()=>clearInterval(R)}},[f,$,D.length]),l.useEffect(()=>{(isNaN(o)||isNaN(d))&&(c(0),m(0))},[o,d]);const Z=R=>{c(R),m(R)},_=(R,E)=>{j(E?te=>new Set(te).add(R):te=>{const V=new Set(te);return V.delete(R),V})};return l.useEffect(()=>{if(o!==d){u(d),m(o);const R=setTimeout(()=>{u(o)},500);return()=>clearTimeout(R)}},[o]),r?t.jsxs("div",{className:"mt-[4vh] sm:mt-[6vh] lg:mt-[8vh] w-full",children:[t.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-10 sm:mb-8 lg:mb-10 px-4 sm:px-6 lg:px-8",children:[t.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 lg:w-14 lg:h-14 bg-gradient-to-br from-[#4b4bc3] via-[#707ff5] to-[#a195f9] rounded-lg flex items-center justify-center shadow-lg shadow-[#707ff5]/30",children:t.jsx(Cs,{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-7 lg:h-7 text-white"})}),t.jsxs("h2",{className:"text-xl sm:text-2xl lg:text-3xl xl:text-4xl font-bold text-white",children:["EDITOR'S ",t.jsx("span",{className:"bg-gradient-to-r from-[#a195f9] to-[#f2a1f2] bg-clip-text text-transparent",children:"Pick !"})]})]}),t.jsx("div",{className:"px-[1%] sm:px-[2%] md:px-[3%] lg:px-[4%] xl:px-[6%] w-full",children:t.jsx("div",{className:"mb-[3vh] relative rounded-[8px] sm:rounded-[12px] lg:rounded-[16px] overflow-hidden shadow-2xl bg-gradient-to-br from-[#1e1e76]/95 via-[#4b4bc3]/90 to-[#1e1e76]/95",children:t.jsxs("div",{className:"flex flex-col-reverse lg:flex-row items-start min-h-[280px] sm:min-h-[320px] md:min-h-[361px] lg:min-h-[320px] xl:min-h-[350px]",children:[t.jsxs("div",{className:"w-full lg:w-[55%] p-4 sm:p-6 lg:p-8 xl:p-10 space-y-3 sm:space-y-4 lg:space-y-6",children:[t.jsx(P,{className:"h-8 sm:h-10 w-3/4"}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx(P,{className:"h-6 w-16 rounded-full"}),t.jsx(P,{className:"h-6 w-20 rounded-full"}),t.jsx(P,{className:"h-6 w-[4.5rem] rounded-full"})]}),t.jsx(P,{className:"h-16 sm:h-20 w-full"}),t.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[t.jsx(P,{className:"h-24 sm:h-32 flex-1"}),t.jsx(P,{className:"h-24 sm:h-32 flex-1"}),t.jsx(P,{className:"h-24 sm:h-32 flex-1 hidden sm:block"}),t.jsx(P,{className:"h-24 sm:h-32 flex-1 hidden md:block"})]})]}),t.jsx("div",{className:"w-full lg:w-[45%] lg:absolute lg:right-0 lg:top-0 lg:h-full",children:t.jsx(P,{className:"w-full h-48 lg:h-full"})})]})})}),t.jsx("div",{className:"absolute inset-0 -translate-x-full animate-[shimmer_2s_infinite] bg-gradient-to-r from-transparent via-white/5 to-transparent pointer-events-none"})]}):e.length===0?t.jsxs("div",{className:"mt-[4vh] sm:mt-[6vh] lg:mt-[8vh] w-full",children:[t.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-10 sm:mb-8 lg:mb-10 px-4 sm:px-6 lg:px-8",children:[t.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 lg:w-14 lg:h-14 bg-gradient-to-br from-[#4b4bc3] via-[#707ff5] to-[#a195f9] rounded-lg flex items-center justify-center shadow-lg shadow-[#707ff5]/30 transition-transform hover:scale-105",children:t.jsx(Cs,{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-7 lg:h-7 text-white"})}),t.jsxs("h2",{className:"text-xl sm:text-2xl lg:text-3xl xl:text-4xl font-bold text-white",children:["EDITOR'S ",t.jsx("span",{className:"bg-gradient-to-r from-[#a195f9] to-[#f2a1f2] bg-clip-text text-transparent",children:"Pick !"})]})]}),t.jsx("div",{className:"text-center py-8 bg-muted/30 rounded-lg mx-[2%] sm:mx-[3%] lg:mx-[4%]",children:t.jsx("p",{className:"text-muted-foreground",children:"No latest updates assigned yet. Use the admin panel to assign series to this section."})})]}):t.jsxs("div",{className:"mt-[4vh] sm:mt-[6vh] lg:mt-[8vh] w-full",children:[t.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-10 sm:mb-8 lg:mb-10 px-4 sm:px-6 lg:px-8",children:[t.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 lg:w-14 lg:h-14 bg-gradient-to-br from-[#4b4bc3] via-[#707ff5] to-[#a195f9] rounded-lg flex items-center justify-center shadow-lg shadow-[#707ff5]/30 transition-transform hover:scale-105",children:t.jsx(Cs,{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-7 lg:h-7 text-white"})}),t.jsxs("h2",{className:"text-xl sm:text-2xl lg:text-3xl xl:text-4xl font-bold text-white",children:["EDITOR'S ",t.jsx("span",{className:"bg-gradient-to-r from-[#a195f9] to-[#f2a1f2] bg-clip-text text-transparent",children:"Pick !"})]})]}),t.jsx("div",{className:"px-[1%] sm:px-[2%] md:px-[3%] lg:px-[4%] xl:px-[6%] w-full",children:t.jsx("div",{className:"mb-[3vh] relative rounded-[8px] sm:rounded-[12px] lg:rounded-[16px] overflow-visible transition-all duration-500 shadow-2xl bg-gradient-to-br from-[#1e1e76]/95 via-[#4b4bc3]/90 to-[#1e1e76]/95",style:{backgroundImage:`linear-gradient(135deg, rgba(30,30,118,0.92), rgba(75,75,195,0.88), rgba(30,30,118,0.92)), url(${O?.coverImageUrl||""})`,backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat"},children:t.jsxs("div",{className:"rounded-[8px] sm:rounded-[12px] lg:rounded-[16px] overflow-visible",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#1e1e76]/90 via-[#4b4bc3]/85 to-[#1e1e76]/90 z-10"}),t.jsxs("div",{className:"relative z-20 flex flex-col-reverse lg:flex-row items-start min-h-[280px] sm:min-h-[320px] md:min-h-[361px] lg:min-h-[320px] xl:min-h-[350px]",children:[t.jsxs("div",{className:"w-full lg:w-[55%] p-4 sm:p-6 lg:p-8 xl:p-10 space-y-3 sm:space-y-4 lg:space-y-6",children:[t.jsx("h3",{className:"text-base sm:text-lg md:text-xl lg:text-2xl xl:text-3xl 2xl:text-4xl font-bold bg-gradient-to-r from-white via-gray-100 to-white bg-clip-text text-transparent leading-tight line-clamp-1",children:O?.title||"Loading..."}),t.jsx("div",{className:"flex flex-wrap items-center gap-[0.8vw]",children:O?.genres?O.genres.slice(0,5).map((R,E)=>t.jsx(ze,{className:`backdrop-blur-sm text-xs sm:text-sm px-[1.5vw] py-[0.5vh] border border-opacity-30 rounded-full transition-all duration-300 hover:scale-105 ${E===0?"bg-[#707ff5]/20 text-[#a195f9] border-[#707ff5]/30 hover:bg-[#707ff5]/30 hover:border-[#707ff5]/50":E===1?"bg-[#a195f9]/20 text-[#f2a1f2] border-[#a195f9]/30 hover:bg-[#a195f9]/30 hover:border-[#a195f9]/50":E===2?"bg-[#f2a1f2]/20 text-[#f2a1f2] border-[#f2a1f2]/30 hover:bg-[#f2a1f2]/30 hover:border-[#f2a1f2]/50":E===3?"bg-[#4b4bc3]/20 text-[#a195f9] border-[#4b4bc3]/30 hover:bg-[#4b4bc3]/30 hover:border-[#4b4bc3]/50":"bg-[#707ff5]/20 text-[#a195f9] border-[#707ff5]/30 hover:bg-[#707ff5]/30 hover:border-[#707ff5]/50"}`,children:R},R)):t.jsxs(t.Fragment,{children:[t.jsx(ze,{className:"bg-[#a195f9]/20 backdrop-blur-sm text-[#f2a1f2] text-xs sm:text-sm px-[1.5vw] py-[0.5vh] border border-[#a195f9]/30 rounded-full hover:bg-[#a195f9]/30 hover:border-[#a195f9]/50 transition-all duration-300 hover:scale-105",children:"shoujo"}),t.jsx(ze,{className:"bg-[#f2a1f2]/20 backdrop-blur-sm text-[#f2a1f2] text-xs sm:text-sm px-[1.5vw] py-[0.5vh] border border-[#f2a1f2]/30 rounded-full hover:bg-[#f2a1f2]/30 hover:border-[#f2a1f2]/50 transition-all duration-300 hover:scale-105",children:"Drama"})]})}),t.jsx("div",{className:"w-full h-[0.15vh] bg-gradient-to-r from-transparent via-white/30 to-transparent"}),t.jsx("p",{className:"text-xs sm:text-sm md:text-base lg:text-base xl:text-lg text-gray-300 leading-relaxed line-clamp-2 max-w-lg",children:O?.description||"No description available"}),t.jsx("div",{className:"relative py-4",onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:t.jsx("div",{className:"flex flex-nowrap gap-2 sm:gap-3 md:gap-4 lg:gap-2 xl:gap-3 w-[78.7%] md:w-[58.6%] lg:w-[90.5%] mx-auto",children:D.map((R,E)=>t.jsx("div",{className:`cursor-pointer group flex-shrink min-w-0 flex-1 max-w-[86%] transition-all ease-in-out duration-500 ${E===o?"scale-105 opacity-100":"opacity-60 hover:opacity-80"}`,onClick:()=>Z(E),onMouseEnter:()=>_(E,!0),onMouseLeave:()=>_(E,!1),"data-testid":`carousel-card-${R.id}`,children:t.jsxs("div",{className:"relative w-full aspect-[3/4] rounded-xl overflow-hidden transition-all ease-in-out duration-300 hover:scale-[1.02] ring-1 ring-white/10 shadow-lg backdrop-blur-sm",children:[t.jsx("img",{src:R.coverImageUrl,alt:R.title,className:"w-full h-full object-cover"}),t.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/50 to-transparent transform -skew-x-12 -translate-x-full opacity-0 group-hover:opacity-100 group-hover:translate-x-full transition-all duration-800 ease-out"})}),E===o&&t.jsx("div",{className:"absolute inset-0 rounded-xl ring-2 ring-[#a195f9] shadow-xl shadow-[#a195f9]/60 ring-opacity-100 animate-pulse"})]})},R.id))})})]}),t.jsxs("div",{className:"relative w-full lg:w-[45%] flex justify-center lg:justify-center p-2 sm:p-4 md:pt-4 lg:pt-0 lg:pr-4 lg:pb-4 lg:pl-4 xl:pr-6 xl:pb-6 xl:pl-6 overflow-visible md:items-start lg:items-start lg:-mt-16 xl:-mt-20",onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[t.jsx("div",{className:"hidden lg:block relative overflow-visible group z-40",children:t.jsx("div",{className:"w-72 md:w-[240px] lg:w-[319px] xl:w-[357px] 2xl:w-[391px] aspect-[3/4] rounded-xl overflow-visible cursor-pointer relative z-30",children:t.jsxs("div",{className:"relative w-full h-full rounded-xl overflow-hidden shadow-2xl transition-all duration-700 ease-out group-hover:scale-110 group-hover:-translate-y-8 group-hover:-translate-x-4 group-hover:rotate-3 group-hover:shadow-[0_40px_80px_-20px_rgba(0,0,0,0.8)] transform-gpu z-50 ring-2 ring-white/5 backdrop-blur-sm",children:[t.jsxs("div",{className:"relative w-full h-full",children:[e[h]?.coverImageUrl&&t.jsx("img",{src:e[h]?.coverImageUrl,alt:e[h]?.title,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-500 ease-in-out ${d!==h?"opacity-0":"opacity-100"}`}),O?.coverImageUrl?t.jsx("img",{src:O.coverImageUrl,alt:O.title,className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:t.jsx("span",{className:"text-muted-foreground",children:"No cover"})})]}),t.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-500",children:t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1200 ease-out"})}),t.jsx("div",{className:"absolute bottom-4 right-4 z-30 opacity-0 group-hover:opacity-100 transition-opacity duration-500",children:t.jsx(v,{onClick:()=>n(`/manga/${O?.id}`),className:"bg-gradient-to-r from-[#707ff5] to-[#a195f9] hover:from-[#4b4bc3] hover:to-[#707ff5] text-white px-3 py-1.5 md:px-4 md:py-2 lg:px-4 lg:py-2 xl:px-5 xl:py-3 rounded-lg text-xs sm:text-sm md:text-sm lg:text-sm xl:text-base font-medium transition-all duration-300 shadow-lg hover:shadow-xl hover:scale-105 backdrop-blur-sm border border-[#a195f9]/30","data-testid":"read-featured",children:"Read it now"})})]})})}),t.jsx("div",{className:"lg:hidden relative flex justify-center -mt-8 sm:-mt-12 md:-mt-16",children:t.jsxs("div",{className:"w-[55vw] max-w-[240px] h-[73vw] max-h-[320px] sm:w-[45vw] sm:max-w-[300px] sm:h-[60vw] sm:max-h-[400px] md:w-[31.8vw] md:max-w-[302px] md:h-[42.7vw] md:max-h-[403px] rounded-2xl overflow-hidden shadow-2xl relative group cursor-pointer ring-2 ring-white/10 transition-all duration-500",children:[t.jsxs("div",{className:"relative w-full h-full",children:[e[h]?.coverImageUrl&&t.jsx("img",{src:e[h]?.coverImageUrl,alt:e[h]?.title,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-500 ease-in-out ${d!==h?"opacity-0":"opacity-100"}`}),O?.coverImageUrl?t.jsx("img",{src:O.coverImageUrl,alt:O.title,className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:t.jsx("span",{className:"text-muted-foreground",children:"No cover"})})]}),t.jsx("div",{className:"absolute bottom-4 right-4 z-30 opacity-100 lg:opacity-0 lg:group-hover:opacity-100 transition-opacity duration-500",children:t.jsx(v,{onClick:()=>n(`/manga/${O?.id}`),className:"bg-gradient-to-r from-[#707ff5] to-[#a195f9] hover:from-[#4b4bc3] hover:to-[#707ff5] text-white px-2 py-1.5 sm:px-3 sm:py-2 md:px-3 md:py-2 rounded-lg text-[10px] sm:text-xs md:text-sm font-medium transition-all duration-300 shadow-lg hover:shadow-xl hover:scale-105 backdrop-blur-sm border border-[#a195f9]/30","data-testid":"read-featured",children:"Read it now"})})]})})]})]})]})})})]})}function St({variant:e="default"}){const s=e==="trending"?"bg-gradient-to-br from-muted/40 to-muted/20":"bg-card";return t.jsxs("div",{className:`flex items-center w-full rounded-xl relative overflow-hidden ${s}`,children:[t.jsxs("div",{className:"relative w-[90px] lg:w-[102px] flex-shrink-0",children:[t.jsx("div",{className:"aspect-[3/4] overflow-hidden rounded-l-xl",children:t.jsx(P,{className:"w-full h-full rounded-none"})}),e==="trending"&&t.jsx("div",{className:"absolute top-2 left-2",children:t.jsx(P,{className:"w-8 h-8 lg:w-10 lg:h-10 rounded-full"})})]}),t.jsxs("div",{className:"flex-1 p-3 lg:p-4 min-w-0",children:[t.jsxs("div",{className:"mb-3 lg:mb-4",children:[t.jsx(P,{className:"h-4 lg:h-5 w-full mb-1.5"}),t.jsx(P,{className:"h-4 lg:h-5 w-2/3"})]}),t.jsxs("div",{className:"flex gap-1.5 flex-wrap",children:[t.jsx(P,{className:"h-5 w-16 rounded-full"}),t.jsx(P,{className:"h-5 w-20 rounded-full"}),t.jsx(P,{className:"h-5 w-14 rounded-full"})]})]}),t.jsx("div",{className:"absolute inset-0 -translate-x-full animate-[shimmer_2s_infinite] bg-gradient-to-r from-transparent via-white/5 to-transparent pointer-events-none"})]})}function bd(){const[e,s]=l.useState([]),[r,a]=l.useState(!0),[,n]=Ne();l.useEffect(()=>{(async()=>{try{const h=await fetch("/api/sections/trending");if(h.ok){const u=await h.json();s(u)}}catch{}finally{a(!1)}})()},[]);const o=m=>{switch(m){case 1:return{cardBg:"bg-gradient-to-br from-[#f2a1f2] via-[#a195f9] to-[#f2a1f2]",badgeBg:"bg-gradient-to-br from-[#1e1e76] to-[#4b4bc3]",badgeText:"text-[#f2a1f2]",genreBg:"rgba(242, 161, 242, 0.3)",genreBorder:"rgba(242, 161, 242, 0.6)"};case 2:return{cardBg:"bg-gradient-to-br from-[#707ff5] via-[#4b4bc3] to-[#707ff5]",badgeBg:"bg-gradient-to-br from-[#f2a1f2] to-[#a195f9]",badgeText:"text-[#1e1e76]",genreBg:"rgba(112, 127, 245, 0.3)",genreBorder:"rgba(112, 127, 245, 0.6)"};case 3:return{cardBg:"bg-gradient-to-br from-[#a195f9] via-[#707ff5] to-[#a195f9]",badgeBg:"bg-gradient-to-br from-[#4b4bc3] to-[#1e1e76]",badgeText:"text-[#f2a1f2]",genreBg:"rgba(161, 149, 249, 0.3)",genreBorder:"rgba(161, 149, 249, 0.6)"};default:return{cardBg:"bg-gradient-to-br from-[#1e1e76] via-[#4b4bc3] to-[#1e1e76]",badgeBg:"bg-gradient-to-br from-[#707ff5] to-[#a195f9]",badgeText:"text-[#1e1e76]",genreBg:"rgba(75, 75, 195, 0.25)",genreBorder:"rgba(75, 75, 195, 0.5)"}}};if(r)return t.jsx("section",{className:"py-7 sm:py-10 w-full",children:t.jsxs("div",{className:"max-w-none mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-10 sm:mb-8 lg:mb-10",children:[t.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 lg:w-14 lg:h-14 bg-gradient-to-br from-[#f2a1f2] via-[#a195f9] to-[#707ff5] rounded-lg flex items-center justify-center shadow-lg shadow-[#f2a1f2]/30",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-7 lg:h-7 text-white",children:t.jsx("path",{fillRule:"evenodd",d:"M12.963 2.286a.75.75 0 0 0-1.071-.136 9.742 9.742 0 0 0-3.539 6.176 7.547 7.547 0 0 1-1.705-1.715.75.75 0 0 0-1.152-.082A9 9 0 1 0 15.68 4.534a7.46 7.46 0 0 1-2.717-2.248ZM15.75 14.25a3.75 3.75 0 1 1-7.313-1.172c.628.465 1.35.81 2.133 1a5.99 5.99 0 0 1 1.925-3.546 3.75 3.75 0 0 1 3.255 3.718Z",clipRule:"evenodd"})})}),t.jsxs("h2",{className:"text-xl sm:text-2xl lg:text-3xl xl:text-4xl font-bold text-white",children:["Most ",t.jsx("span",{className:"bg-gradient-to-r from-[#f2a1f2] to-[#a195f9] bg-clip-text text-transparent",children:"Popular"})]})]}),t.jsxs("div",{className:"flex flex-col gap-12 px-6",children:[t.jsx("div",{className:"w-full md:w-[38%] md:mx-auto",children:t.jsx(St,{variant:"trending"})}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-center gap-6 md:gap-12",children:[t.jsx("div",{className:"w-full md:w-[38%]",children:t.jsx(St,{variant:"trending"})}),t.jsx("div",{className:"w-full md:w-[38%]",children:t.jsx(St,{variant:"trending"})})]}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-6",children:[t.jsx("div",{className:"w-full md:w-[46%]",children:t.jsx(St,{variant:"trending"})}),t.jsx("div",{className:"w-full md:w-[46%]",children:t.jsx(St,{variant:"trending"})})]})]})]})});const c=e.slice(0,5).map((m,h)=>({...m,rank:h+1,thumbnail:m.coverImageUrl||"/placeholder-cover.jpg"})),d=m=>{const h=o(m.rank);return t.jsxs("div",{onClick:()=>n(`/manga/${m.id}`),className:`group flex items-center w-full rounded-xl transition-all duration-300 hover:shadow-[0_0_20px_rgba(255,255,255,0.15)] relative overflow-hidden cursor-pointer ${h.cardBg}`,"data-testid":`trending-manga-${m.id}`,children:[t.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity duration-700",children:t.jsx("div",{className:"absolute inset-0 translate-x-[-100%] group-hover:translate-x-[100%] bg-gradient-to-r from-transparent via-white/10 to-transparent transition-transform duration-1000"})}),t.jsxs("div",{className:"relative w-[90px] lg:w-[102px] flex-shrink-0",children:[t.jsx("div",{className:"aspect-[3/4] overflow-hidden rounded-l-xl",children:t.jsx("img",{alt:m.title,loading:"lazy",className:"w-full h-full object-cover",src:m.thumbnail})}),t.jsx("div",{className:`absolute top-2 left-2 w-8 h-8 lg:w-10 lg:h-10 ${h.badgeBg} rounded-full flex items-center justify-center shadow-lg ring-2 ring-white/20`,children:t.jsx("span",{className:`text-sm lg:text-base font-bold ${h.badgeText}`,children:m.rank})})]}),t.jsxs("div",{className:"flex-1 p-3 lg:p-4 min-w-0",children:[t.jsx("div",{className:"font-bold text-sm lg:text-lg line-clamp-2 transition-colors duration-300 group-hover:text-white mb-4 lg:mb-3",children:m.title}),m.genres&&m.genres.length>0&&t.jsx("div",{className:"flex gap-1.5 flex-wrap",children:m.genres.slice(0,3).map((u,f)=>t.jsx("div",{className:"rounded-full px-2 py-0.5 text-xs border transition-transform duration-300 group-hover:scale-105",style:{backgroundColor:h.genreBg,borderColor:h.genreBorder},children:u},f))})]})]},m.rank)};return t.jsx("section",{className:"py-7 sm:py-10 w-full",children:t.jsxs("div",{className:"max-w-none mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-10 sm:mb-8 lg:mb-10",children:[t.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 lg:w-14 lg:h-14 bg-gradient-to-br from-[#f2a1f2] via-[#a195f9] to-[#707ff5] rounded-lg flex items-center justify-center shadow-lg shadow-[#f2a1f2]/30 transition-transform hover:scale-105",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-7 lg:h-7 text-white",children:t.jsx("path",{fillRule:"evenodd",d:"M12.963 2.286a.75.75 0 0 0-1.071-.136 9.742 9.742 0 0 0-3.539 6.176 7.547 7.547 0 0 1-1.705-1.715.75.75 0 0 0-1.152-.082A9 9 0 1 0 15.68 4.534a7.46 7.46 0 0 1-2.717-2.248ZM15.75 14.25a3.75 3.75 0 1 1-7.313-1.172c.628.465 1.35.81 2.133 1a5.99 5.99 0 0 1 1.925-3.546 3.75 3.75 0 0 1 3.255 3.718Z",clipRule:"evenodd"})})}),t.jsxs("h2",{className:"text-xl sm:text-2xl lg:text-3xl xl:text-4xl font-bold text-white",children:["Most ",t.jsx("span",{className:"bg-gradient-to-r from-[#f2a1f2] to-[#a195f9] bg-clip-text text-transparent",children:"Popular"})]})]}),e.length===0?t.jsx("div",{className:"text-center text-gray-400 py-8",children:t.jsx("p",{className:"text-muted-foreground",children:"No popular items to display"})}):t.jsxs("div",{className:"flex flex-col gap-12 px-6",children:[c[0]&&t.jsx("div",{className:"w-full md:w-[38%] md:mx-auto",children:d(c[0])}),(c[1]||c[2])&&t.jsxs("div",{className:"flex flex-col md:flex-row justify-center gap-6 md:gap-12",children:[c[1]&&t.jsx("div",{className:"w-full md:w-[38%]",children:d(c[1])}),c[2]&&t.jsx("div",{className:"w-full md:w-[38%]",children:d(c[2])})]}),(c[3]||c[4])&&t.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-6",children:[c[3]&&t.jsx("div",{className:"w-full md:w-[46%]",children:d(c[3])}),c[4]&&t.jsx("div",{className:"w-full md:w-[46%]",children:d(c[4])})]})]})]})})}var ri={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ya=nt.createContext&&nt.createContext(ri),vd=["attr","size","title"];function wd(e,s){if(e==null)return{};var r=jd(e,s),a,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function jd(e,s){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(s.indexOf(a)>=0)continue;r[a]=e[a]}return r}function as(){return as=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},as.apply(this,arguments)}function ba(e,s){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function ns(e){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?ba(Object(r),!0).forEach(function(a){Nd(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ba(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Nd(e,s,r){return s=Sd(s),s in e?Object.defineProperty(e,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[s]=r,e}function Sd(e){var s=Id(e,"string");return typeof s=="symbol"?s:s+""}function Id(e,s){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,s);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function ai(e){return e&&e.map((s,r)=>nt.createElement(s.tag,ns({key:r},s.attr),ai(s.child)))}function dr(e){return s=>nt.createElement(_d,as({attr:ns({},e.attr)},s),ai(e.child))}function _d(e){var s=r=>{var{attr:a,size:n,title:o}=e,c=wd(e,vd),d=n||r.size||"1em",m;return r.className&&(m=r.className),e.className&&(m=(m?m+" ":"")+e.className),nt.createElement("svg",as({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,a,c,{className:m,style:ns(ns({color:e.color||r.color},r.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),o&&nt.createElement("title",null,o),e.children)};return ya!==void 0?nt.createElement(ya.Consumer,null,r=>s(r)):s(ri)}function Cd(e){return dr({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"},child:[]}]})(e)}function Md(e){return dr({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(e)}function Ad(e){return dr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(e)}function kd(){return t.jsx("footer",{className:"w-full bg-gradient-to-b from-background to-[#0f0f2e] border-t border-border/40 mt-16 sm:mt-20 lg:mt-24",children:t.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12 sm:py-16 lg:py-20",children:t.jsxs("div",{className:"flex flex-col items-center space-y-6 sm:space-y-8",children:[t.jsxs("div",{className:"flex items-center gap-3 group",children:[t.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-[#a195f9] via-[#c77dc7] to-[#f2a1f2] rounded-lg flex items-center justify-center shadow-lg shadow-[#a195f9]/30 transition-transform group-hover:scale-110 duration-300",children:t.jsx(Oe,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),t.jsx("span",{className:"text-xl sm:text-2xl lg:text-3xl font-bold bg-gradient-to-r from-[#a195f9] via-[#c77dc7] to-[#f2a1f2] bg-clip-text text-transparent",children:"MangaVerse"})]}),t.jsxs("div",{className:"text-center space-y-3 sm:space-y-4 max-w-2xl",children:[t.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"All rights reserved"}),t.jsx("p",{className:"text-sm sm:text-base lg:text-lg text-gray-300 leading-relaxed px-4",children:"Your romantic destination for exploring, reading, and enjoying a diverse collection of manhwa and manhua."})]}),t.jsxs("div",{className:"flex items-center gap-6 sm:gap-8",children:[t.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"group relative","aria-label":"Twitter",children:t.jsx("div",{className:"w-11 h-11 sm:w-12 sm:h-12 rounded-full bg-gradient-to-br from-[#707ff5]/20 to-[#a195f9]/20 border border-[#707ff5]/30 flex items-center justify-center transition-all duration-300 group-hover:scale-110 group-hover:shadow-lg group-hover:shadow-[#707ff5]/40 group-hover:border-[#707ff5]/60",children:t.jsx(Ad,{className:"w-5 h-5 sm:w-6 sm:h-6 text-[#a195f9] group-hover:text-[#707ff5] transition-colors duration-300"})})}),t.jsx("a",{href:"https://discord.com",target:"_blank",rel:"noopener noreferrer",className:"group relative","aria-label":"Discord",children:t.jsx("div",{className:"w-11 h-11 sm:w-12 sm:h-12 rounded-full bg-gradient-to-br from-[#a195f9]/20 to-[#f2a1f2]/20 border border-[#a195f9]/30 flex items-center justify-center transition-all duration-300 group-hover:scale-110 group-hover:shadow-lg group-hover:shadow-[#a195f9]/40 group-hover:border-[#a195f9]/60",children:t.jsx(Cd,{className:"w-5 h-5 sm:w-6 sm:h-6 text-[#c77dc7] group-hover:text-[#a195f9] transition-colors duration-300"})})}),t.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"group relative","aria-label":"Instagram",children:t.jsx("div",{className:"w-11 h-11 sm:w-12 sm:h-12 rounded-full bg-gradient-to-br from-[#f2a1f2]/20 to-[#c77dc7]/20 border border-[#f2a1f2]/30 flex items-center justify-center transition-all duration-300 group-hover:scale-110 group-hover:shadow-lg group-hover:shadow-[#f2a1f2]/40 group-hover:border-[#f2a1f2]/60",children:t.jsx(Md,{className:"w-5 h-5 sm:w-6 sm:h-6 text-[#f2a1f2] group-hover:text-[#c77dc7] transition-colors duration-300"})})})]}),t.jsx("div",{className:"w-full max-w-xs h-px bg-gradient-to-r from-transparent via-border to-transparent"}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 sm:gap-4 text-xs sm:text-sm text-muted-foreground/60",children:[t.jsxs("p",{children:[" ",new Date().getFullYear()," MangaVerse. Made with love for manga fans."]}),t.jsx("span",{className:"hidden sm:inline",children:""}),t.jsx("a",{href:"/dmca",className:"text-muted-foreground/60 hover:text-[#a195f9] transition-colors duration-300",children:"DMCA"}),t.jsx("span",{className:"hidden sm:inline",children:""}),t.jsx("a",{href:"/privacy",className:"text-muted-foreground/60 hover:text-[#a195f9] transition-colors duration-300",children:"Privacy Policy"})]})]})})})}function ur({title:e,description:s,keywords:r,image:a,type:n="website",author:o,publishedTime:c,modifiedTime:d,canonicalUrl:m}){const[h]=Ne(),u=typeof window<"u"?window.location.origin:"https://mangaverse.app",f=m||`${u}${h}`,p=e?`${e} | MangaVerse`:"MangaVerse - Discover Amazing Manga & Manhwa",j=s||"Explore thousands of manga and manhwa series with ratings, latest updates, and trending recommendations. Your ultimate destination for manga discovery.",N="manga, manhwa, manhua, webtoon, comics, read manga online, manga reader, manhwa reader",I=r?`${N}, ${r}`:N,C=a||`${u}/attached_assets/Featured_manga_hero_cover_71879d12.png`;return l.useEffect(()=>{document.title=p;const S=(O,$,Z=!1)=>{const _=Z?"property":"name";let R=document.querySelector(`meta[${_}="${O}"]`);R||(R=document.createElement("meta"),R.setAttribute(_,O),document.head.appendChild(R)),R.setAttribute("content",$)};S("description",j),S("keywords",I),o&&S("author",o),S("og:title",p,!0),S("og:description",j,!0),S("og:url",f,!0),S("og:image",C,!0),S("og:type",n,!0),S("og:site_name","MangaVerse",!0),c&&S("article:published_time",c,!0),d&&S("article:modified_time",d,!0),o&&S("article:author",o,!0),S("twitter:card","summary_large_image"),S("twitter:title",p),S("twitter:description",j),S("twitter:image",C),S("twitter:url",f);let D=document.querySelector('link[rel="canonical"]');D||(D=document.createElement("link"),D.setAttribute("rel","canonical"),document.head.appendChild(D)),D.setAttribute("href",f)},[p,j,I,C,f,n,o,c,d]),null}function Dd({type:e,data:s}){return l.useEffect(()=>{const r=`structured-data-${e.toLowerCase()}`;let a=document.getElementById(r);a||(a=document.createElement("script"),a.id=r,a.type="application/ld+json",document.head.appendChild(a));const n={"@context":"https://schema.org","@type":e==="Series"?"Book":e,...s};return a.textContent=JSON.stringify(n),()=>{const o=document.getElementById(r);o&&o.remove()}},[e,s]),null}function Td(e){const{data:s,isLoading:r,error:a}=we({queryKey:["ads",e],queryFn:async()=>{const n=await fetch(`/api/ads/placement/${e}`);if(!n.ok)throw new Error("Failed to fetch ads");return n.json()},staleTime:3e5,refetchOnWindowFocus:!1});return{ads:s||[],isLoading:r,error:a}}function Ld(){const e=l.useRef(new Set),s=Te({mutationFn:async a=>{const n=await fetch(`/api/ads/${a}/impression`,{method:"POST"});if(!n.ok)throw new Error("Failed to track impression");return n.json()},onSuccess:(a,n)=>{e.current.add(n)}});return{trackImpression:a=>{e.current.has(a)||s.mutate(a)}}}function Pd(){const e=Te({mutationFn:async r=>{const a=await fetch(`/api/ads/${r}/click`,{method:"POST"});if(!a.ok)throw new Error("Failed to track click");return a.json()}});return{trackClick:r=>{e.mutate(r)}}}function Ed(e,s=!0){const{trackImpression:r}=Ld(),a=l.useRef(!1);l.useEffect(()=>{if(s&&!a.current){const n=setTimeout(()=>{r(e),a.current=!0},1e3);return()=>clearTimeout(n)}},[e,s,r])}async function Rd(){const e=await fetch("/api/settings/public/ad-intensity");return e.ok?e.json():{level:2,description:"Moderate",enabled:!0}}function zd(){const{data:e,isLoading:s,error:r}=we({queryKey:["ad-intensity"],queryFn:Rd,staleTime:3e5,retry:1});return{level:e?.level??2,description:e?.description??"Moderate",enabled:e?.enabled??!0,isLoading:s,error:r}}function mr({placement:e,type:s,className:r,maxAds:a=1}){const{ads:n,isLoading:o}=Td(e),{trackClick:c}=Pd(),{level:d,enabled:m}=zd(),{data:h}=we({queryKey:["/api/subscriptions/current"],queryFn:async()=>{const g=await fetch("/api/subscriptions/current",{credentials:"include"});if(g.status===404)return null;if(!g.ok)throw new Error("Failed to fetch subscription");return g.json()}});if(h?.status==="active"&&h?.isAdFree==="true"||!m)return null;const f=Math.min(a,d===1?1:d===2?e==="homepage"||e==="browse"?3:2:e==="homepage"||e==="browse"?5:3),p=n.filter(g=>{if(s&&g.type!==s||d===1&&g.type==="popup")return!1;const j=new Date;return g.startDate&&new Date(g.startDate)>j||g.endDate&&new Date(g.endDate)<j?!1:g.isActive==="true"}).sort((g,j)=>j.displayOrder-g.displayOrder).slice(0,f);return o||p.length===0?null:t.jsx("div",{className:b("ad-container",r),children:p.map(g=>t.jsx(Od,{ad:g,trackClick:c},g.id))})}function Od({ad:e,trackClick:s}){const[r,a]=l.useState(!1),n=l.useRef(null);Ed(e.id,r),l.useEffect(()=>{const d=new IntersectionObserver(([m])=>{m.isIntersecting&&a(!0)},{threshold:.5});return n.current&&d.observe(n.current),()=>{n.current&&d.unobserve(n.current)}},[]);const o=()=>{s(e.id),window.open(e.linkUrl,"_blank","noopener,noreferrer")},c=()=>{switch(e.type){case"banner":return"w-full aspect-[6/1] sm:aspect-[8/1]";case"sidebar":return"w-full aspect-[2/3]";case"inline":return"w-full aspect-[4/1] sm:aspect-[5/1]";case"popup":return"w-full aspect-[3/2]";default:return"w-full aspect-[4/1]"}};return t.jsx("div",{ref:n,className:"mb-4",children:t.jsxs(Ze,{className:b("overflow-hidden cursor-pointer transition-all duration-300 hover:shadow-lg hover:scale-[1.02] group relative",c()),onClick:o,children:[t.jsx("div",{className:"absolute top-2 right-2 z-10 bg-black/50 text-white text-xs px-2 py-1 rounded backdrop-blur-sm",children:"Advertisement"}),t.jsxs("div",{className:"relative w-full h-full",children:[t.jsx("img",{src:e.imageUrl,alt:e.title,className:"w-full h-full object-cover",loading:"lazy"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:t.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 text-white",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-sm sm:text-base line-clamp-1",children:e.title}),e.description&&t.jsx("p",{className:"text-xs sm:text-sm text-gray-200 line-clamp-2 mt-1",children:e.description})]}),t.jsx(Gl,{className:"w-5 h-5 ml-2 flex-shrink-0"})]})})})]})]})})}function ni({placement:e,className:s}){return t.jsx(mr,{placement:e,type:"banner",className:s,maxAds:1})}function Ud({placement:e,className:s}){return t.jsx(mr,{placement:e,type:"inline",className:s,maxAds:1})}function Fd(){return t.jsxs("div",{className:"min-h-screen bg-background w-full overflow-x-hidden",children:[t.jsx(ur,{description:"Explore thousands of manga and manhwa series with ratings, latest updates, and trending recommendations. Read your favorite manga online at MangaVerse.",keywords:"manga, manhwa, webtoon, read manga online, manga reader, latest manga updates, trending manga"}),t.jsx(Et,{}),t.jsx(ud,{}),t.jsx("div",{className:"w-full mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6 lg:py-8",children:t.jsxs("div",{className:"space-y-8",children:[t.jsx(ni,{placement:"homepage",className:"mb-6"}),t.jsx(xd,{}),t.jsx(hd,{}),t.jsx(yd,{}),t.jsx(bd,{})]})}),t.jsx(kd,{})]})}const va=(e,s,r)=>{if(e&&"reportValidity"in e){const a=Rs(r,s);e.setCustomValidity(a&&a.message||""),e.reportValidity()}},ii=(e,s)=>{for(const r in s.fields){const a=s.fields[r];a&&a.ref&&"reportValidity"in a.ref?va(a.ref,r,e):a.refs&&a.refs.forEach(n=>va(n,r,e))}},Qd=(e,s)=>{s.shouldUseNativeValidation&&ii(e,s);const r={};for(const a in e){const n=Rs(s.fields,a),o=Object.assign(e[a]||{},{ref:n&&n.ref});if(qd(s.names||Object.keys(e),a)){const c=Object.assign({},Rs(r,a));Ss(c,"root",o),Ss(r,a,c)}else Ss(r,a,o)}return r},qd=(e,s)=>e.some(r=>r.startsWith(s+"."));var $d=function(e,s){for(var r={};e.length;){var a=e[0],n=a.code,o=a.message,c=a.path.join(".");if(!r[c])if("unionErrors"in a){var d=a.unionErrors[0].errors[0];r[c]={message:d.message,type:d.code}}else r[c]={message:o,type:n};if("unionErrors"in a&&a.unionErrors.forEach(function(u){return u.errors.forEach(function(f){return e.push(f)})}),s){var m=r[c].types,h=m&&m[a.code];r[c]=Fo(c,s,r,n,h?[].concat(h,a.message):a.message)}e.shift()}return r},oi=function(e,s,r){return r===void 0&&(r={}),function(a,n,o){try{return Promise.resolve((function(c,d){try{var m=Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](a,s)).then(function(h){return o.shouldUseNativeValidation&&ii({},o),{errors:{},values:r.raw?a:h}})}catch(h){return d(h)}return m&&m.then?m.then(void 0,d):m})(0,function(c){if((function(d){return Array.isArray(d?.errors)})(c))return{values:{},errors:Qd($d(c.errors,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw c}))}catch(c){return Promise.reject(c)}}},Bd="Label",li=l.forwardRef((e,s)=>t.jsx(_e.label,{...e,ref:s,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));li.displayName=Bd;var ci=li;const Vd=yt("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),di=l.forwardRef(({className:e,...s},r)=>t.jsx(ci,{ref:r,className:b(Vd(),e),...s}));di.displayName=ci.displayName;const ui=qo,mi=l.createContext({}),ht=({...e})=>t.jsx(mi.Provider,{value:{name:e.name},children:t.jsx($o,{...e})}),ms=()=>{const e=l.useContext(mi),s=l.useContext(hi),{getFieldState:r,formState:a}=Qo(),n=r(e.name,a);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:o}=s;return{id:o,name:e.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...n}},hi=l.createContext({}),tt=l.forwardRef(({className:e,...s},r)=>{const a=l.useId();return t.jsx(hi.Provider,{value:{id:a},children:t.jsx("div",{ref:r,className:b("space-y-2",e),...s})})});tt.displayName="FormItem";const st=l.forwardRef(({className:e,...s},r)=>{const{error:a,formItemId:n}=ms();return t.jsx(di,{ref:r,className:b(a&&"text-destructive",e),htmlFor:n,...s})});st.displayName="FormLabel";const rt=l.forwardRef(({...e},s)=>{const{error:r,formItemId:a,formDescriptionId:n,formMessageId:o}=ms();return t.jsx(Pa,{ref:s,id:a,"aria-describedby":r?`${n} ${o}`:`${n}`,"aria-invalid":!!r,...e})});rt.displayName="FormControl";const Hd=l.forwardRef(({className:e,...s},r)=>{const{formDescriptionId:a}=ms();return t.jsx("p",{ref:r,id:a,className:b("text-sm text-muted-foreground",e),...s})});Hd.displayName="FormDescription";const at=l.forwardRef(({className:e,children:s,...r},a)=>{const{error:n,formMessageId:o}=ms(),c=n?String(n?.message??""):s;return c?t.jsx("p",{ref:a,id:o,className:b("text-sm font-medium text-destructive",e),...r,children:c}):null});at.displayName="FormMessage";const B=Symbol.for("drizzle:entityKind");function be(e,s){if(!e||typeof e!="object")return!1;if(e instanceof s)return!0;if(!Object.prototype.hasOwnProperty.call(s,B))throw new Error(`Class "${s.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(e).constructor;if(r)for(;r;){if(B in r&&r[B]===s[B])return!0;r=Object.getPrototypeOf(r)}return!1}class Tt{constructor(s,r){this.table=s,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}static[B]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(s){return s}mapToDriverValue(s){return s}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}class Kd{static[B]="ColumnBuilder";config;constructor(s,r,a){this.config={name:s,keyAsName:s==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:a,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(s){return this.config.default=s,this.config.hasDefault=!0,this}$defaultFn(s){return this.config.defaultFn=s,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(s){return this.config.onUpdateFn=s,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(s){this.config.name===""&&(this.config.name=s)}}const ft=Symbol.for("drizzle:Name"),wa=Symbol.for("drizzle:isPgEnum");function Wd(e){return!!e&&typeof e=="function"&&wa in e&&e[wa]===!0}class fi{static[B]="Subquery";constructor(s,r,a,n=!1){this._={brand:"Subquery",sql:s,selectedFields:r,alias:a,isWith:n}}}const Gd={startActiveSpan(e,s){return s()}},pt=Symbol.for("drizzle:ViewBaseConfig"),Ts=Symbol.for("drizzle:Schema"),ja=Symbol.for("drizzle:Columns"),Na=Symbol.for("drizzle:ExtraConfigColumns"),Ls=Symbol.for("drizzle:OriginalName"),Ps=Symbol.for("drizzle:BaseName"),is=Symbol.for("drizzle:IsAlias"),Sa=Symbol.for("drizzle:ExtraConfigBuilder"),pi=Symbol.for("drizzle:IsDrizzleTable");class je{static[B]="Table";static Symbol={Name:ft,Schema:Ts,OriginalName:Ls,Columns:ja,ExtraConfigColumns:Na,BaseName:Ps,IsAlias:is,ExtraConfigBuilder:Sa};[ft];[Ls];[Ts];[ja];[Na];[Ps];[is]=!1;[pi]=!0;[Sa]=void 0;constructor(s,r,a){this[ft]=this[Ls]=s,this[Ts]=r,this[Ps]=a}}function xi(e){return typeof e=="object"&&e!==null&&pi in e}function Zd(e){return e!=null&&typeof e.getSQL=="function"}function Yd(e){const s={sql:"",params:[]};for(const r of e)s.sql+=r.sql,s.params.push(...r.params),r.typings?.length&&(s.typings||(s.typings=[]),s.typings.push(...r.typings));return s}class Pe{static[B]="StringChunk";value;constructor(s){this.value=Array.isArray(s)?s:[s]}getSQL(){return new ce([this])}}class ce{constructor(s){this.queryChunks=s}static[B]="SQL";decoder=gi;shouldInlineParams=!1;append(s){return this.queryChunks.push(...s.queryChunks),this}toQuery(s){return Gd.startActiveSpan("drizzle.buildSQL",r=>{const a=this.buildQueryFromSourceParams(this.queryChunks,s);return r?.setAttributes({"drizzle.query.text":a.sql,"drizzle.query.params":JSON.stringify(a.params)}),a})}buildQueryFromSourceParams(s,r){const a=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:n,escapeName:o,escapeParam:c,prepareTyping:d,inlineParams:m,paramStartIndex:h}=a;return Yd(s.map(u=>{if(be(u,Pe))return{sql:u.value.join(""),params:[]};if(be(u,Ks))return{sql:o(u.value),params:[]};if(u===void 0)return{sql:"",params:[]};if(Array.isArray(u)){const f=[new Pe("(")];for(const[p,g]of u.entries())f.push(g),p<u.length-1&&f.push(new Pe(", "));return f.push(new Pe(")")),this.buildQueryFromSourceParams(f,a)}if(be(u,ce))return this.buildQueryFromSourceParams(u.queryChunks,{...a,inlineParams:m||u.shouldInlineParams});if(be(u,je)){const f=u[je.Symbol.Schema],p=u[je.Symbol.Name];return{sql:f===void 0||u[is]?o(p):o(f)+"."+o(p),params:[]}}if(be(u,Tt)){const f=n.getColumnCasing(u);if(r.invokeSource==="indexes")return{sql:o(f),params:[]};const p=u.table[je.Symbol.Schema];return{sql:u.table[is]||p===void 0?o(u.table[je.Symbol.Name])+"."+o(f):o(p)+"."+o(u.table[je.Symbol.Name])+"."+o(f),params:[]}}if(be(u,Xd)){const f=u[pt].schema,p=u[pt].name;return{sql:f===void 0||u[pt].isAlias?o(p):o(f)+"."+o(p),params:[]}}if(be(u,bi)){if(be(u.value,Ws))return{sql:c(h.value++,u),params:[u],typings:["none"]};const f=u.value===null?null:u.encoder.mapToDriverValue(u.value);if(be(f,ce))return this.buildQueryFromSourceParams([f],a);if(m)return{sql:this.mapInlineParam(f,a),params:[]};let p=["none"];return d&&(p=[d(u.encoder)]),{sql:c(h.value++,f),params:[f],typings:p}}return be(u,Ws)?{sql:c(h.value++,u),params:[u],typings:["none"]}:be(u,ce.Aliased)&&u.fieldAlias!==void 0?{sql:o(u.fieldAlias),params:[]}:be(u,fi)?u._.isWith?{sql:o(u._.alias),params:[]}:this.buildQueryFromSourceParams([new Pe("("),u._.sql,new Pe(") "),new Ks(u._.alias)],a):Wd(u)?u.schema?{sql:o(u.schema)+"."+o(u.enumName),params:[]}:{sql:o(u.enumName),params:[]}:Zd(u)?u.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([u.getSQL()],a):this.buildQueryFromSourceParams([new Pe("("),u.getSQL(),new Pe(")")],a):m?{sql:this.mapInlineParam(u,a),params:[]}:{sql:c(h.value++,u),params:[u],typings:["none"]}}))}mapInlineParam(s,{escapeString:r}){if(s===null)return"null";if(typeof s=="number"||typeof s=="boolean")return s.toString();if(typeof s=="string")return r(s);if(typeof s=="object"){const a=s.toString();return r(a==="[object Object]"?JSON.stringify(s):a)}throw new Error("Unexpected param value: "+s)}getSQL(){return this}as(s){return s===void 0?this:new ce.Aliased(this,s)}mapWith(s){return this.decoder=typeof s=="function"?{mapFromDriverValue:s}:s,this}inlineParams(){return this.shouldInlineParams=!0,this}if(s){return s?this:void 0}}class Ks{constructor(s){this.value=s}static[B]="Name";brand;getSQL(){return new ce([this])}}const gi={mapFromDriverValue:e=>e},yi={mapToDriverValue:e=>e};({...gi,...yi});class bi{constructor(s,r=yi){this.value=s,this.encoder=r}static[B]="Param";brand;getSQL(){return new ce([this])}}function M(e,...s){const r=[];(s.length>0||e.length>0&&e[0]!=="")&&r.push(new Pe(e[0]));for(const[a,n]of s.entries())r.push(n,new Pe(e[a+1]));return new ce(r)}(e=>{function s(){return new ce([])}e.empty=s;function r(m){return new ce(m)}e.fromList=r;function a(m){return new ce([new Pe(m)])}e.raw=a;function n(m,h){const u=[];for(const[f,p]of m.entries())f>0&&h!==void 0&&u.push(h),u.push(p);return new ce(u)}e.join=n;function o(m){return new Ks(m)}e.identifier=o;function c(m){return new Ws(m)}e.placeholder=c;function d(m,h){return new bi(m,h)}e.param=d})(M||(M={}));(e=>{class s{constructor(a,n){this.sql=a,this.fieldAlias=n}static[B]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new s(this.sql,this.fieldAlias)}}e.Aliased=s})(ce||(ce={}));class Ws{constructor(s){this.name=s}static[B]="Placeholder";getSQL(){return new ce([this])}}const vi=Symbol.for("drizzle:IsDrizzleView");class Xd{static[B]="View";[pt];[vi]=!0;constructor({name:s,schema:r,selectedFields:a,query:n}){this[pt]={name:s,originalName:s,schema:r,selectedFields:a,query:n,isExisting:!n,isAlias:!1}}getSQL(){return new ce([this])}}function Jd(e){return typeof e=="object"&&e!==null&&vi in e}Tt.prototype.getSQL=function(){return new ce([this])};je.prototype.getSQL=function(){return new ce([this])};fi.prototype.getSQL=function(){return new ce([this])};function eu(e){return e[je.Symbol.Columns]}function tu(e){return e[pt].selectedFields}function hs(e,s){return{name:typeof e=="string"&&e.length>0?e:"",config:typeof e=="object"?e:s}}class su{static[B]="SQLiteForeignKeyBuilder";reference;_onUpdate;_onDelete;constructor(s,r){this.reference=()=>{const{name:a,columns:n,foreignColumns:o}=s();return{name:a,columns:n,foreignTable:o[0].table,foreignColumns:o}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(s){return this._onUpdate=s,this}onDelete(s){return this._onDelete=s,this}build(s){return new ru(s,this)}}class ru{constructor(s,r){this.table=s,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}static[B]="SQLiteForeignKey";reference;onUpdate;onDelete;getName(){const{name:s,columns:r,foreignColumns:a}=this.reference(),n=r.map(d=>d.name),o=a.map(d=>d.name),c=[this.table[ft],...n,a[0].table[ft],...o];return s??`${c.join("_")}_fk`}}function au(e,s){return`${e[ft]}_${s.join("_")}_unique`}class Be extends Kd{static[B]="SQLiteColumnBuilder";foreignKeyConfigs=[];references(s,r={}){return this.foreignKeyConfigs.push({ref:s,actions:r}),this}unique(s){return this.config.isUnique=!0,this.config.uniqueName=s,this}generatedAlwaysAs(s,r){return this.config.generated={as:s,type:"always",mode:r?.mode??"virtual"},this}buildForeignKeys(s,r){return this.foreignKeyConfigs.map(({ref:a,actions:n})=>((o,c)=>{const d=new su(()=>{const m=o();return{columns:[s],foreignColumns:[m]}});return c.onUpdate&&d.onUpdate(c.onUpdate),c.onDelete&&d.onDelete(c.onDelete),d.build(r)})(a,n))}}class Ve extends Tt{constructor(s,r){r.uniqueName||(r.uniqueName=au(s,[r.name])),super(s,r),this.table=s}static[B]="SQLiteColumn"}class nu extends Be{static[B]="SQLiteBigIntBuilder";constructor(s){super(s,"bigint","SQLiteBigInt")}build(s){return new iu(s,this.config)}}class iu extends Ve{static[B]="SQLiteBigInt";getSQLType(){return"blob"}mapFromDriverValue(s){if(Buffer.isBuffer(s))return BigInt(s.toString());if(s instanceof ArrayBuffer){const r=new TextDecoder;return BigInt(r.decode(s))}return BigInt(String.fromCodePoint(...s))}mapToDriverValue(s){return Buffer.from(s.toString())}}class ou extends Be{static[B]="SQLiteBlobJsonBuilder";constructor(s){super(s,"json","SQLiteBlobJson")}build(s){return new lu(s,this.config)}}class lu extends Ve{static[B]="SQLiteBlobJson";getSQLType(){return"blob"}mapFromDriverValue(s){if(Buffer.isBuffer(s))return JSON.parse(s.toString());if(s instanceof ArrayBuffer){const r=new TextDecoder;return JSON.parse(r.decode(s))}return JSON.parse(String.fromCodePoint(...s))}mapToDriverValue(s){return Buffer.from(JSON.stringify(s))}}class cu extends Be{static[B]="SQLiteBlobBufferBuilder";constructor(s){super(s,"buffer","SQLiteBlobBuffer")}build(s){return new du(s,this.config)}}class du extends Ve{static[B]="SQLiteBlobBuffer";getSQLType(){return"blob"}}function uu(e,s){const{name:r,config:a}=hs(e,s);return a?.mode==="json"?new ou(r):a?.mode==="bigint"?new nu(r):new cu(r)}class mu extends Be{static[B]="SQLiteCustomColumnBuilder";constructor(s,r,a){super(s,"custom","SQLiteCustomColumn"),this.config.fieldConfig=r,this.config.customTypeParams=a}build(s){return new hu(s,this.config)}}class hu extends Ve{static[B]="SQLiteCustomColumn";sqlName;mapTo;mapFrom;constructor(s,r){super(s,r),this.sqlName=r.customTypeParams.dataType(r.fieldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(s){return typeof this.mapFrom=="function"?this.mapFrom(s):s}mapToDriverValue(s){return typeof this.mapTo=="function"?this.mapTo(s):s}}function fu(e){return(s,r)=>{const{name:a,config:n}=hs(s,r);return new mu(a,n,e)}}class hr extends Be{static[B]="SQLiteBaseIntegerBuilder";constructor(s,r,a){super(s,r,a),this.config.autoIncrement=!1}primaryKey(s){return s?.autoIncrement&&(this.config.autoIncrement=!0),this.config.hasDefault=!0,super.primaryKey()}}class fr extends Ve{static[B]="SQLiteBaseInteger";autoIncrement=this.config.autoIncrement;getSQLType(){return"integer"}}class pu extends hr{static[B]="SQLiteIntegerBuilder";constructor(s){super(s,"number","SQLiteInteger")}build(s){return new xu(s,this.config)}}class xu extends fr{static[B]="SQLiteInteger"}class gu extends hr{static[B]="SQLiteTimestampBuilder";constructor(s,r){super(s,"date","SQLiteTimestamp"),this.config.mode=r}defaultNow(){return this.default(M`(cast((julianday('now') - 2440587.5)*86400000 as integer))`)}build(s){return new yu(s,this.config)}}class yu extends fr{static[B]="SQLiteTimestamp";mode=this.config.mode;mapFromDriverValue(s){return this.config.mode==="timestamp"?new Date(s*1e3):new Date(s)}mapToDriverValue(s){const r=s.getTime();return this.config.mode==="timestamp"?Math.floor(r/1e3):r}}class bu extends hr{static[B]="SQLiteBooleanBuilder";constructor(s,r){super(s,"boolean","SQLiteBoolean"),this.config.mode=r}build(s){return new vu(s,this.config)}}class vu extends fr{static[B]="SQLiteBoolean";mode=this.config.mode;mapFromDriverValue(s){return Number(s)===1}mapToDriverValue(s){return s?1:0}}function T(e,s){const{name:r,config:a}=hs(e,s);return a?.mode==="timestamp"||a?.mode==="timestamp_ms"?new gu(r,a.mode):a?.mode==="boolean"?new bu(r,a.mode):new pu(r)}class wu extends Be{static[B]="SQLiteNumericBuilder";constructor(s){super(s,"string","SQLiteNumeric")}build(s){return new ju(s,this.config)}}class ju extends Ve{static[B]="SQLiteNumeric";getSQLType(){return"numeric"}}function Nu(e){return new wu(e??"")}class Su extends Be{static[B]="SQLiteRealBuilder";constructor(s){super(s,"number","SQLiteReal")}build(s){return new Iu(s,this.config)}}class Iu extends Ve{static[B]="SQLiteReal";getSQLType(){return"real"}}function _u(e){return new Su(e??"")}class Cu extends Be{static[B]="SQLiteTextBuilder";constructor(s,r){super(s,"string","SQLiteText"),this.config.enumValues=r.enum,this.config.length=r.length}build(s){return new Mu(s,this.config)}}class Mu extends Ve{static[B]="SQLiteText";enumValues=this.config.enumValues;length=this.config.length;constructor(s,r){super(s,r)}getSQLType(){return`text${this.config.length?`(${this.config.length})`:""}`}}class Au extends Be{static[B]="SQLiteTextJsonBuilder";constructor(s){super(s,"json","SQLiteTextJson")}build(s){return new ku(s,this.config)}}class ku extends Ve{static[B]="SQLiteTextJson";getSQLType(){return"text"}mapFromDriverValue(s){return JSON.parse(s)}mapToDriverValue(s){return JSON.stringify(s)}}function i(e,s={}){const{name:r,config:a}=hs(e,s);return a.mode==="json"?new Au(r):new Cu(r,a)}function Du(){return{blob:uu,customType:fu,integer:T,numeric:Nu,real:_u,text:i}}const Gs=Symbol.for("drizzle:SQLiteInlineForeignKeys");class Ia extends je{static[B]="SQLiteTable";static Symbol=Object.assign({},je.Symbol,{InlineForeignKeys:Gs});[je.Symbol.Columns];[Gs]=[];[je.Symbol.ExtraConfigBuilder]=void 0}function Tu(e,s,r,a,n=e){const o=new Ia(e,a,n),c=typeof s=="function"?s(Du()):s,d=Object.fromEntries(Object.entries(c).map(([h,u])=>{const f=u;f.setName(h);const p=f.build(o);return o[Gs].push(...f.buildForeignKeys(p,o)),[h,p]})),m=Object.assign(o,d);return m[je.Symbol.Columns]=d,m[je.Symbol.ExtraConfigColumns]=d,r&&(m[Ia.Symbol.ExtraConfigBuilder]=r),m}const Q=(e,s,r)=>Tu(e,s,r);class wi{constructor(s,r){this.name=s,this.unique=r}static[B]="SQLiteIndexBuilderOn";on(...s){return new Lu(this.name,s,this.unique)}}class Lu{static[B]="SQLiteIndexBuilder";config;constructor(s,r,a){this.config={name:s,columns:r,unique:a,where:void 0}}where(s){return this.config.where=s,this}build(s){return new Pu(this.config,s)}}class Pu{static[B]="SQLiteIndex";config;constructor(s,r){this.config={...s,table:r}}}function k(e){return new wi(e,!1)}function oe(e){return new wi(e,!0)}const ie={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function de(e,s){return s.includes(e.columnType)}function ji(e){return"enumValues"in e&&Array.isArray(e.enumValues)&&e.enumValues.length>0}const Eu=ji,Ru=tn([x(),Ko(),sr(),Wo()]),zu=tn([Ru,Go(Xt()),ls(Xt())]),Ou=Zo(e=>e instanceof Buffer);function Ni(e,s){const r=s?.zodInstance??sn,a=s?.coerce??{};let n;return ji(e)&&(n=e.enumValues.length?r.enum(e.enumValues):r.string()),n||(de(e,["PgGeometry","PgPointTuple"])?n=r.tuple([r.number(),r.number()]):de(e,["PgGeometryObject","PgPointObject"])?n=r.object({x:r.number(),y:r.number()}):de(e,["PgHalfVector","PgVector"])?(n=r.array(r.number()),n=e.dimensions?n.length(e.dimensions):n):de(e,["PgLine"])?n=r.tuple([r.number(),r.number(),r.number()]):de(e,["PgLineABC"])?n=r.object({a:r.number(),b:r.number(),c:r.number()}):de(e,["PgArray"])?(n=r.array(Ni(e.baseColumn,r)),n=e.size?n.length(e.size):n):e.dataType==="array"?n=r.array(r.any()):e.dataType==="number"?n=Uu(e,r,a):e.dataType==="bigint"?n=Fu(e,r,a):e.dataType==="boolean"?n=a===!0||a.boolean?r.coerce.boolean():r.boolean():e.dataType==="date"?n=a===!0||a.date?r.coerce.date():r.date():e.dataType==="string"?n=Qu(e,r,a):e.dataType==="json"?n=zu:e.dataType==="custom"?n=r.any():e.dataType==="buffer"&&(n=Ou)),n||(n=r.any()),n}function Uu(e,s,r){let a=e.getSQLType().includes("unsigned"),n,o,c=!1;de(e,["MySqlTinyInt","SingleStoreTinyInt"])?(n=a?0:ie.INT8_MIN,o=a?ie.INT8_UNSIGNED_MAX:ie.INT8_MAX,c=!0):de(e,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(n=a?0:ie.INT16_MIN,o=a?ie.INT16_UNSIGNED_MAX:ie.INT16_MAX,c=!0):de(e,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(n=a?0:ie.INT24_MIN,o=a?ie.INT24_UNSIGNED_MAX:ie.INT24_MAX,c=de(e,["MySqlMediumInt","SingleStoreMediumInt"])):de(e,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(n=a?0:ie.INT32_MIN,o=a?ie.INT32_UNSIGNED_MAX:ie.INT32_MAX,c=!0):de(e,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(n=a?0:ie.INT48_MIN,o=a?ie.INT48_UNSIGNED_MAX:ie.INT48_MAX):de(e,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(a=a||de(e,["MySqlSerial","SingleStoreSerial"]),n=a?0:Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,c=!0):de(e,["MySqlYear","SingleStoreYear"])?(n=1901,o=2155,c=!0):(n=Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER);let d=r===!0||r?.number?s.coerce.number():s.number();return d=d.min(n).max(o),c?d.int():d}function Fu(e,s,r){const a=e.getSQLType().includes("unsigned"),n=a?0n:ie.INT64_MIN,o=a?ie.INT64_UNSIGNED_MAX:ie.INT64_MAX;return(r===!0||r?.bigint?s.coerce.bigint():s.bigint()).min(n).max(o)}function Qu(e,s,r){if(de(e,["PgUUID"]))return s.string().uuid();let a,n,o=!1;de(e,["PgVarchar","SQLiteText"])?a=e.length:de(e,["MySqlVarChar","SingleStoreVarChar"])?a=e.length??ie.INT16_UNSIGNED_MAX:de(e,["MySqlText","SingleStoreText"])&&(e.textType==="longtext"?a=ie.INT32_UNSIGNED_MAX:e.textType==="mediumtext"?a=ie.INT24_UNSIGNED_MAX:e.textType==="text"?a=ie.INT16_UNSIGNED_MAX:a=ie.INT8_UNSIGNED_MAX),de(e,["PgChar","MySqlChar","SingleStoreChar"])&&(a=e.length,o=!0),de(e,["PgBinaryVector"])&&(n=/^[01]+$/,a=e.dimensions);let c=r===!0||r?.string?s.coerce.string():s.string();return c=n?c.regex(n):c,a&&o?c.length(a):a?c.max(a):c}function pr(e){return xi(e)?eu(e):tu(e)}function xr(e,s,r,a){const n={};for(const[o,c]of Object.entries(e)){if(!be(c,Tt)&&!be(c,ce)&&!be(c,ce.Aliased)&&typeof c=="object"){const f=xi(c)||Jd(c)?pr(c):c;n[o]=xr(f,s[o]??{},r,a);continue}const d=s[o];if(d!==void 0&&typeof d!="function"){n[o]=d;continue}const m=be(c,Tt)?c:void 0,h=m?Ni(m,a):Xt(),u=typeof d=="function"?d(h):h;r.never(m)||(n[o]=u,m&&(r.nullable(m)&&(n[o]=n[o].nullable()),r.optional(m)&&(n[o]=n[o].optional())))}return J(n)}function qu(e,s){return sn.enum(e.enumValues)}const $u={never:()=>!1,optional:()=>!1,nullable:e=>!e.notNull},Bu={never:e=>e?.generated?.type==="always"||e?.generatedIdentity?.type==="always",optional:e=>!e.notNull||e.notNull&&e.hasDefault,nullable:e=>!e.notNull},Ye=(e,s)=>{if(Eu(e))return qu(e);const r=pr(e);return xr(r,{},$u)},xe=(e,s)=>{const r=pr(e);return xr(r,s??{},Bu)};function q(){return crypto.randomUUID()}const W=Q("users",{id:i("id").primaryKey().$defaultFn(()=>q()),username:i("username").unique(),email:i("email").unique(),password:i("password"),profilePicture:i("profile_picture"),country:i("country"),isAdmin:i("is_admin").notNull().default("false"),role:i("role").notNull().default("user"),firstName:i("first_name"),lastName:i("last_name"),profileImageUrl:i("profile_image_url"),emailVerified:i("email_verified").notNull().default("false"),emailVerifiedAt:i("email_verified_at"),currencyBalance:T("currency_balance").default(0),stripeCustomerId:i("stripe_customer_id"),createdAt:i("created_at").default(M`(datetime('now'))`),updatedAt:i("updated_at").default(M`(datetime('now'))`)}),He=Q("series",{id:i("id").primaryKey().$defaultFn(()=>q()),title:i("title").notNull(),description:i("description"),author:i("author"),artist:i("artist"),status:i("status").notNull().default("ongoing"),type:i("type").notNull().default("manga"),genres:i("genres"),coverImageUrl:i("cover_image_url"),rating:i("rating"),totalChapters:T("total_chapters"),publishedYear:T("published_year"),isAdult:i("is_adult").notNull().default("false"),isFeatured:i("is_featured").notNull().default("false"),isTrending:i("is_trending").notNull().default("false"),isPopularToday:i("is_popular_today").notNull().default("false"),isLatestUpdate:i("is_latest_update").notNull().default("false"),isPinned:i("is_pinned").notNull().default("false"),createdAt:i("created_at").default(M`(datetime('now'))`),updatedAt:i("updated_at").default(M`(datetime('now'))`)}),Si=Q("languages",{id:i("id").primaryKey().$defaultFn(()=>q()),code:i("code").notNull().unique(),name:i("name").notNull(),nativeName:i("native_name").notNull(),isActive:i("is_active").notNull().default("true"),isDefault:i("is_default").notNull().default("false"),createdAt:i("created_at").default(M`(datetime('now'))`),updatedAt:i("updated_at").default(M`(datetime('now'))`)},e=>({codeIdx:oe("language_code_idx").on(e.code)})),Vu=Q("series_translations",{id:i("id").primaryKey().$defaultFn(()=>q()),seriesId:i("series_id").notNull().references(()=>He.id,{onDelete:"cascade"}),languageId:i("language_id").notNull().references(()=>Si.id,{onDelete:"cascade"}),title:i("title"),description:i("description"),createdAt:i("created_at").default(M`(datetime('now'))`),updatedAt:i("updated_at").default(M`(datetime('now'))`)},e=>({seriesLanguageIdx:k("series_language_idx").on(e.seriesId,e.languageId),uniqueSeriesLanguage:oe("unique_series_language").on(e.seriesId,e.languageId)})),Rt=Q("chapters",{id:i("id").primaryKey().$defaultFn(()=>q()),seriesId:i("series_id").notNull().references(()=>He.id,{onDelete:"cascade"}),chapterNumber:i("chapter_number").notNull(),title:i("title"),pages:i("pages").notNull(),totalPages:T("total_pages").notNull().default(0),coverImageUrl:i("cover_image_url"),isPublished:i("is_published").notNull().default("true"),uploadedBy:i("uploaded_by").references(()=>W.id),requiresManualReorder:i("requires_manual_reorder").notNull().default("false"),naturalSortConfidence:i("natural_sort_confidence").default("1.0"),createdAt:i("created_at").default(M`(datetime('now'))`),updatedAt:i("updated_at").default(M`(datetime('now'))`)},e=>({seriesChapterIdx:k("series_chapter_idx").on(e.seriesId,e.chapterNumber),uniqueSeriesChapter:oe("unique_series_chapter").on(e.seriesId,e.chapterNumber)})),Hu=Q("settings",{id:i("id").primaryKey().$defaultFn(()=>q()),category:i("category").notNull(),key:i("key").notNull(),value:i("value").notNull(),type:i("type").notNull().default("string"),description:i("description"),isPublic:i("is_public").notNull().default("false"),createdAt:i("created_at").default(M`(datetime('now'))`),updatedAt:i("updated_at").default(M`(datetime('now'))`)}),Ku=Q("user_library",{id:i("id").primaryKey().$defaultFn(()=>q()),userId:i("user_id").notNull().references(()=>W.id,{onDelete:"cascade"}),seriesId:i("series_id").notNull().references(()=>He.id,{onDelete:"cascade"}),status:i("status").notNull().default("reading"),addedAt:i("added_at").default(M`(datetime('now'))`),updatedAt:i("updated_at").default(M`(datetime('now'))`)},e=>({userSeriesIdx:k("user_series_idx").on(e.userId,e.seriesId),uniqueUserSeries:oe("unique_user_series").on(e.userId,e.seriesId)}));Q("user_follows",{id:i("id").primaryKey().$defaultFn(()=>q()),userId:i("user_id").notNull().references(()=>W.id,{onDelete:"cascade"}),seriesId:i("series_id").notNull().references(()=>He.id,{onDelete:"cascade"}),followedAt:i("followed_at").default(M`(datetime('now'))`),notificationsEnabled:i("notifications_enabled").notNull().default("true")},e=>({userSeriesFollowIdx:k("user_series_follow_idx").on(e.userId,e.seriesId),uniqueUserSeriesFollow:oe("unique_user_series_follow").on(e.userId,e.seriesId)}));const Wu=Q("comments",{id:i("id").primaryKey().$defaultFn(()=>q()),userId:i("user_id").notNull().references(()=>W.id,{onDelete:"cascade"}),seriesId:i("series_id").references(()=>He.id,{onDelete:"cascade"}),chapterId:i("chapter_id").references(()=>Rt.id,{onDelete:"cascade"}),content:i("content").notNull(),createdAt:i("created_at").default(M`(datetime('now'))`),updatedAt:i("updated_at").default(M`(datetime('now'))`)},e=>({userIdx:k("comments_user_idx").on(e.userId),seriesIdx:k("comments_series_idx").on(e.seriesId),chapterIdx:k("comments_chapter_idx").on(e.chapterId)})),Gu=Q("reading_progress",{id:i("id").primaryKey().$defaultFn(()=>q()),userId:i("user_id").notNull().references(()=>W.id,{onDelete:"cascade"}),seriesId:i("series_id").notNull().references(()=>He.id,{onDelete:"cascade"}),chapterId:i("chapter_id").references(()=>Rt.id,{onDelete:"set null"}),lastReadPage:T("last_read_page").notNull().default(0),lastReadAt:i("last_read_at").default(M`(datetime('now'))`),createdAt:i("created_at").default(M`(datetime('now'))`),updatedAt:i("updated_at").default(M`(datetime('now'))`)},e=>({userSeriesProgressIdx:k("user_series_progress_idx").on(e.userId,e.seriesId),uniqueUserSeriesProgress:oe("unique_user_series_progress").on(e.userId,e.seriesId)}));Q("email_verification_tokens",{id:i("id").primaryKey().$defaultFn(()=>q()),userId:i("user_id").notNull().references(()=>W.id,{onDelete:"cascade"}),token:i("token").notNull().unique(),expiresAt:i("expires_at").notNull(),createdAt:i("created_at").default(M`(datetime('now'))`)},e=>({userIdx:k("email_verification_user_idx").on(e.userId),tokenIdx:oe("email_verification_token_idx").on(e.token)}));Q("password_reset_tokens",{id:i("id").primaryKey().$defaultFn(()=>q()),userId:i("user_id").notNull().references(()=>W.id,{onDelete:"cascade"}),token:i("token").notNull().unique(),expiresAt:i("expires_at").notNull(),used:i("used").notNull().default("false"),createdAt:i("created_at").default(M`(datetime('now'))`)},e=>({userIdx:k("password_reset_user_idx").on(e.userId),tokenIdx:oe("password_reset_token_idx").on(e.token)}));const Zu=Q("user_ratings",{id:i("id").primaryKey().$defaultFn(()=>q()),userId:i("user_id").notNull().references(()=>W.id,{onDelete:"cascade"}),seriesId:i("series_id").notNull().references(()=>He.id,{onDelete:"cascade"}),rating:T("rating").notNull(),review:i("review"),createdAt:i("created_at").default(M`(datetime('now'))`),updatedAt:i("updated_at").default(M`(datetime('now'))`)},e=>({userSeriesIdx:k("user_ratings_user_series_idx").on(e.userId,e.seriesId),uniqueUserSeriesRating:oe("unique_user_series_rating").on(e.userId,e.seriesId),seriesIdx:k("user_ratings_series_idx").on(e.seriesId)}));Q("user_follows_users",{id:i("id").primaryKey().$defaultFn(()=>q()),followerId:i("follower_id").notNull().references(()=>W.id,{onDelete:"cascade"}),followingId:i("following_id").notNull().references(()=>W.id,{onDelete:"cascade"}),followedAt:i("followed_at").default(M`(datetime('now'))`)},e=>({followerIdx:k("user_follows_follower_idx").on(e.followerId),followingIdx:k("user_follows_following_idx").on(e.followingId),uniqueUserFollow:oe("unique_user_follow").on(e.followerId,e.followingId)}));const gr=Q("reading_lists",{id:i("id").primaryKey().$defaultFn(()=>q()),userId:i("user_id").notNull().references(()=>W.id,{onDelete:"cascade"}),name:i("name").notNull(),description:i("description"),visibility:i("visibility").notNull().default("private"),createdAt:i("created_at").default(M`(datetime('now'))`),updatedAt:i("updated_at").default(M`(datetime('now'))`)},e=>({userIdx:k("reading_lists_user_idx").on(e.userId)})),Ii=Q("reading_list_items",{id:i("id").primaryKey().$defaultFn(()=>q()),listId:i("list_id").notNull().references(()=>gr.id,{onDelete:"cascade"}),seriesId:i("series_id").notNull().references(()=>He.id,{onDelete:"cascade"}),addedAt:i("added_at").default(M`(datetime('now'))`)},e=>({listSeriesIdx:k("reading_list_items_list_series_idx").on(e.listId,e.seriesId),uniqueListSeries:oe("unique_list_series").on(e.listId,e.seriesId)})),_i=Q("currency_transactions",{id:i("id").primaryKey().$defaultFn(()=>q()),userId:i("user_id").notNull().references(()=>W.id,{onDelete:"cascade"}),amount:T("amount").notNull(),type:i("type").notNull(),description:i("description").notNull(),relatedEntityId:i("related_entity_id"),createdAt:i("created_at").default(M`(datetime('now'))`)},e=>({userCreatedIdx:k("currency_transactions_user_created_idx").on(e.userId,e.createdAt),userIdx:k("currency_transactions_user_idx").on(e.userId)})),yr=Q("currency_packages",{id:i("id").primaryKey().$defaultFn(()=>q()),name:i("name").notNull(),currencyAmount:T("currency_amount").notNull(),priceUSD:i("price_usd").notNull(),bonusPercentage:T("bonus_percentage").notNull().default(0),isActive:i("is_active").notNull().default("true"),displayOrder:T("display_order").notNull().default(0),createdAt:i("created_at").default(M`(datetime('now'))`),updatedAt:i("updated_at").default(M`(datetime('now'))`)},e=>({activeDisplayIdx:k("currency_packages_active_display_idx").on(e.isActive,e.displayOrder)})),fs=Q("user_purchases",{id:i("id").primaryKey().$defaultFn(()=>q()),userId:i("user_id").notNull().references(()=>W.id,{onDelete:"cascade"}),packageId:i("package_id").references(()=>yr.id,{onDelete:"set null"}),amountPaid:i("amount_paid").notNull(),currencyReceived:T("currency_received").notNull(),paymentProvider:i("payment_provider").notNull(),transactionId:i("transaction_id"),status:i("status").notNull().default("pending"),couponId:i("coupon_id"),trialEndsAt:i("trial_ends_at"),isOffline:i("is_offline").notNull().default("false"),createdAt:i("created_at").default(M`(datetime('now'))`)},e=>({userStatusIdx:k("user_purchases_user_status_idx").on(e.userId,e.status),userIdx:k("user_purchases_user_idx").on(e.userId)})),Ci=Q("chapter_access_control",{id:i("id").primaryKey().$defaultFn(()=>q()),chapterId:i("chapter_id").notNull().references(()=>Rt.id,{onDelete:"cascade"}),accessType:i("access_type").notNull(),unlockCost:T("unlock_cost").notNull().default(0),isActive:i("is_active").notNull().default("true"),createdAt:i("created_at").default(M`(datetime('now'))`),updatedAt:i("updated_at").default(M`(datetime('now'))`)},e=>({uniqueChapter:oe("unique_chapter_access").on(e.chapterId)})),Mi=Q("user_chapter_unlocks",{id:i("id").primaryKey().$defaultFn(()=>q()),userId:i("user_id").notNull().references(()=>W.id,{onDelete:"cascade"}),chapterId:i("chapter_id").notNull().references(()=>Rt.id,{onDelete:"cascade"}),unlockedAt:i("unlocked_at").default(M`(datetime('now'))`),costPaid:T("cost_paid").notNull(),createdAt:i("created_at").default(M`(datetime('now'))`)},e=>({uniqueUserChapter:oe("unique_user_chapter_unlock").on(e.userId,e.chapterId),userIdx:k("user_chapter_unlocks_user_idx").on(e.userId)})),Yu=Q("subscription_packages",{id:i("id").primaryKey().$defaultFn(()=>q()),name:i("name").notNull(),description:i("description"),priceUSD:i("price_usd").notNull(),billingCycle:i("billing_cycle").notNull().default("monthly"),stripePriceId:i("stripe_price_id"),features:i("features"),coinBonus:T("coin_bonus").default(0),discountPercentage:T("discount_percentage").default(0),isAdFree:i("is_ad_free").notNull().default("false"),earlyAccess:i("early_access").notNull().default("false"),exclusiveContent:i("exclusive_content").notNull().default("false"),trialDays:T("trial_days").notNull().default(0),isActive:i("is_active").notNull().default("true"),displayOrder:T("display_order").notNull().default(0),createdAt:i("created_at").default(M`(datetime('now'))`),updatedAt:i("updated_at").default(M`(datetime('now'))`)},e=>({activeDisplayIdx:k("subscription_packages_active_display_idx").on(e.isActive,e.displayOrder)}));Q("user_subscriptions",{id:i("id").primaryKey().$defaultFn(()=>q()),userId:i("user_id").notNull().references(()=>W.id,{onDelete:"cascade"}),packageId:i("package_id").references(()=>Yu.id,{onDelete:"set null"}),stripeCustomerId:i("stripe_customer_id"),stripeSubscriptionId:i("stripe_subscription_id"),status:i("status").notNull().default("active"),currentPeriodStart:i("current_period_start"),currentPeriodEnd:i("current_period_end"),cancelAtPeriodEnd:i("cancel_at_period_end").notNull().default("false"),trialStartDate:i("trial_start_date"),trialEndDate:i("trial_end_date"),isTrialActive:i("is_trial_active").notNull().default("false"),createdAt:i("created_at").default(M`(datetime('now'))`),updatedAt:i("updated_at").default(M`(datetime('now'))`)},e=>({userStatusIdx:k("user_subscriptions_user_status_idx").on(e.userId,e.status),stripeSubscriptionIdx:oe("stripe_subscription_idx").on(e.stripeSubscriptionId)}));Q("daily_rewards",{id:i("id").primaryKey().$defaultFn(()=>q()),day:T("day").notNull().unique(),coinReward:T("coin_reward").notNull(),bonusMultiplier:i("bonus_multiplier").default("1"),isSpecial:i("is_special").notNull().default("false"),specialDescription:i("special_description"),createdAt:i("created_at").default(M`(datetime('now'))`)});Q("user_daily_claims",{id:i("id").primaryKey().$defaultFn(()=>q()),userId:i("user_id").notNull().references(()=>W.id,{onDelete:"cascade"}),claimDate:i("claim_date").notNull(),day:T("day").notNull(),coinsEarned:T("coins_earned").notNull(),createdAt:i("created_at").default(M`(datetime('now'))`)},e=>({userDateIdx:oe("user_daily_claims_user_date_idx").on(e.userId,e.claimDate),userIdx:k("user_daily_claims_user_idx").on(e.userId)}));const Xu=Q("achievements",{id:i("id").primaryKey().$defaultFn(()=>q()),name:i("name").notNull(),description:i("description").notNull(),category:i("category").notNull(),requirement:i("requirement").notNull(),coinReward:T("coin_reward").default(0),badgeIcon:i("badge_icon"),isHidden:i("is_hidden").notNull().default("false"),displayOrder:T("display_order").notNull().default(0),createdAt:i("created_at").default(M`(datetime('now'))`)});Q("user_achievements",{id:i("id").primaryKey().$defaultFn(()=>q()),userId:i("user_id").notNull().references(()=>W.id,{onDelete:"cascade"}),achievementId:i("achievement_id").notNull().references(()=>Xu.id,{onDelete:"cascade"}),earnedAt:i("earned_at").default(M`(datetime('now'))`),progress:i("progress")},e=>({uniqueUserAchievement:oe("unique_user_achievement").on(e.userId,e.achievementId),userIdx:k("user_achievements_user_idx").on(e.userId)}));const Ju=Q("referral_codes",{id:i("id").primaryKey().$defaultFn(()=>q()),userId:i("user_id").notNull().references(()=>W.id,{onDelete:"cascade"}),code:i("code").notNull().unique(),uses:T("uses").notNull().default(0),maxUses:T("max_uses"),coinRewardReferrer:T("coin_reward_referrer").default(100),coinRewardReferred:T("coin_reward_referred").default(50),expiresAt:i("expires_at"),isActive:i("is_active").notNull().default("true"),createdAt:i("created_at").default(M`(datetime('now'))`)},e=>({userIdx:k("referral_codes_user_idx").on(e.userId),codeIdx:oe("referral_codes_code_idx").on(e.code)}));Q("referrals",{id:i("id").primaryKey().$defaultFn(()=>q()),referrerId:i("referrer_id").notNull().references(()=>W.id,{onDelete:"cascade"}),referredId:i("referred_id").notNull().references(()=>W.id,{onDelete:"cascade"}),codeId:i("code_id").references(()=>Ju.id,{onDelete:"set null"}),referrerRewardAmount:T("referrer_reward_amount").default(0),referredRewardAmount:T("referred_reward_amount").default(0),status:i("status").notNull().default("completed"),createdAt:i("created_at").default(M`(datetime('now'))`)},e=>({referrerIdx:k("referrals_referrer_idx").on(e.referrerId),referredIdx:k("referrals_referred_idx").on(e.referredId)}));Q("flash_sales",{id:i("id").primaryKey().$defaultFn(()=>q()),name:i("name").notNull(),description:i("description"),type:i("type").notNull(),targetId:i("target_id"),discountPercentage:T("discount_percentage").notNull(),originalPrice:i("original_price").notNull(),salePrice:i("sale_price").notNull(),startTime:i("start_time").notNull(),endTime:i("end_time").notNull(),maxPurchases:T("max_purchases"),currentPurchases:T("current_purchases").default(0),isActive:i("is_active").notNull().default("true"),createdAt:i("created_at").default(M`(datetime('now'))`)},e=>({activeTimeIdx:k("flash_sales_active_time_idx").on(e.isActive,e.startTime,e.endTime)}));Q("gift_transactions",{id:i("id").primaryKey().$defaultFn(()=>q()),senderId:i("sender_id").notNull().references(()=>W.id,{onDelete:"cascade"}),recipientId:i("recipient_id").references(()=>W.id,{onDelete:"set null"}),recipientEmail:i("recipient_email"),giftType:i("gift_type").notNull(),giftAmount:T("gift_amount"),packageId:i("package_id"),message:i("message"),status:i("status").notNull().default("pending"),claimedAt:i("claimed_at"),expiresAt:i("expires_at"),createdAt:i("created_at").default(M`(datetime('now'))`)},e=>({senderIdx:k("gift_transactions_sender_idx").on(e.senderId),recipientIdx:k("gift_transactions_recipient_idx").on(e.recipientId),statusIdx:k("gift_transactions_status_idx").on(e.status)}));const em=Q("loyalty_tiers",{id:i("id").primaryKey().$defaultFn(()=>q()),name:i("name").notNull(),minPoints:T("min_points").notNull(),maxPoints:T("max_points"),coinBonusPercentage:T("coin_bonus_percentage").default(0),discountPercentage:T("discount_percentage").default(0),perks:i("perks"),badgeColor:i("badge_color").default("#gray"),displayOrder:T("display_order").notNull().default(0),createdAt:i("created_at").default(M`(datetime('now'))`)});Q("user_loyalty",{id:i("id").primaryKey().$defaultFn(()=>q()),userId:i("user_id").notNull().references(()=>W.id,{onDelete:"cascade"}),points:T("points").notNull().default(0),tierId:i("tier_id").references(()=>em.id,{onDelete:"set null"}),lifetimePoints:T("lifetime_points").notNull().default(0),createdAt:i("created_at").default(M`(datetime('now'))`),updatedAt:i("updated_at").default(M`(datetime('now'))`)},e=>({userIdx:oe("user_loyalty_user_idx").on(e.userId)}));const Ai=Q("battle_pass_seasons",{id:i("id").primaryKey().$defaultFn(()=>q()),name:i("name").notNull(),description:i("description"),startDate:i("start_date").notNull(),endDate:i("end_date").notNull(),isPremium:i("is_premium").notNull().default("false"),priceUSD:i("price_usd"),isActive:i("is_active").notNull().default("true"),createdAt:i("created_at").default(M`(datetime('now'))`)});Q("battle_pass_rewards",{id:i("id").primaryKey().$defaultFn(()=>q()),seasonId:i("season_id").notNull().references(()=>Ai.id,{onDelete:"cascade"}),tier:T("tier").notNull(),isPremium:i("is_premium").notNull().default("false"),rewardType:i("reward_type").notNull(),rewardValue:i("reward_value").notNull(),createdAt:i("created_at").default(M`(datetime('now'))`)},e=>({seasonTierIdx:k("battle_pass_rewards_season_tier_idx").on(e.seasonId,e.tier)}));Q("user_battle_pass_progress",{id:i("id").primaryKey().$defaultFn(()=>q()),userId:i("user_id").notNull().references(()=>W.id,{onDelete:"cascade"}),seasonId:i("season_id").notNull().references(()=>Ai.id,{onDelete:"cascade"}),currentTier:T("current_tier").notNull().default(0),experience:T("experience").notNull().default(0),isPremium:i("is_premium").notNull().default("false"),createdAt:i("created_at").default(M`(datetime('now'))`),updatedAt:i("updated_at").default(M`(datetime('now'))`)},e=>({uniqueUserSeason:oe("unique_user_season").on(e.userId,e.seasonId)}));Q("dmca_notices",{id:i("id").primaryKey().$defaultFn(()=>q()),fullName:i("full_name").notNull(),email:i("email").notNull(),phone:i("phone").notNull(),copyrightWork:i("copyright_work").notNull(),infringingUrl:i("infringing_url").notNull(),description:i("description"),signature:i("signature").notNull(),ipAddress:i("ip_address"),goodFaithDeclaration:i("good_faith_declaration").notNull(),accuracyDeclaration:i("accuracy_declaration").notNull(),status:i("status").notNull().default("pending"),reviewedBy:i("reviewed_by").references(()=>W.id,{onDelete:"set null"}),reviewNotes:i("review_notes"),reviewedAt:i("reviewed_at"),createdAt:i("created_at").default(M`(datetime('now'))`),updatedAt:i("updated_at").default(M`(datetime('now'))`)},e=>({statusIdx:k("dmca_status_idx").on(e.status),emailIdx:k("dmca_email_idx").on(e.email),createdIdx:k("dmca_created_idx").on(e.createdAt)}));const tm=Q("coupons",{id:i("id").primaryKey().$defaultFn(()=>q()),code:i("code").notNull().unique(),type:i("type").notNull(),value:i("value").notNull(),minPurchaseAmount:i("min_purchase_amount"),maxUses:T("max_uses"),currentUses:T("current_uses").notNull().default(0),expiresAt:i("expires_at"),isActive:i("is_active").notNull().default("true"),createdAt:i("created_at").default(M`(datetime('now'))`)},e=>({codeIdx:oe("coupons_code_idx").on(e.code),activeIdx:k("coupons_active_idx").on(e.isActive)}));Q("coupon_redemptions",{id:i("id").primaryKey().$defaultFn(()=>q()),couponId:i("coupon_id").notNull().references(()=>tm.id,{onDelete:"cascade"}),userId:i("user_id").notNull().references(()=>W.id,{onDelete:"cascade"}),purchaseId:i("purchase_id").references(()=>fs.id,{onDelete:"set null"}),discountAmount:i("discount_amount").notNull(),createdAt:i("created_at").default(M`(datetime('now'))`)},e=>({couponUserIdx:k("coupon_redemptions_coupon_user_idx").on(e.couponId,e.userId),purchaseIdx:k("coupon_redemptions_purchase_idx").on(e.purchaseId)}));Q("package_bundles",{id:i("id").primaryKey().$defaultFn(()=>q()),name:i("name").notNull(),description:i("description"),bundleType:i("bundle_type").notNull(),priceUSD:i("price_usd").notNull(),items:i("items").notNull(),isActive:i("is_active").notNull().default("true"),displayOrder:T("display_order").notNull().default(0),createdAt:i("created_at").default(M`(datetime('now'))`),updatedAt:i("updated_at").default(M`(datetime('now'))`)},e=>({activeDisplayIdx:k("package_bundles_active_display_idx").on(e.isActive,e.displayOrder)}));const sm=Q("invoices",{id:i("id").primaryKey().$defaultFn(()=>q()),userId:i("user_id").notNull().references(()=>W.id,{onDelete:"cascade"}),purchaseId:i("purchase_id").references(()=>fs.id,{onDelete:"set null"}),invoiceNumber:i("invoice_number").notNull().unique(),totalAmount:i("total_amount").notNull(),taxAmount:i("tax_amount").notNull().default("0.00"),discountAmount:i("discount_amount").notNull().default("0.00"),finalAmount:i("final_amount").notNull(),status:i("status").notNull().default("draft"),pdfPath:i("pdf_path"),createdAt:i("created_at").default(M`(datetime('now'))`)},e=>({userIdx:k("invoices_user_idx").on(e.userId),invoiceNumberIdx:oe("invoices_number_idx").on(e.invoiceNumber),purchaseIdx:k("invoices_purchase_idx").on(e.purchaseId)}));Q("invoice_items",{id:i("id").primaryKey().$defaultFn(()=>q()),invoiceId:i("invoice_id").notNull().references(()=>sm.id,{onDelete:"cascade"}),itemType:i("item_type").notNull(),itemId:i("item_id"),description:i("description").notNull(),quantity:T("quantity").notNull().default(1),unitPrice:i("unit_price").notNull(),totalPrice:i("total_price").notNull()},e=>({invoiceIdx:k("invoice_items_invoice_idx").on(e.invoiceId)}));Q("manual_assignments",{id:i("id").primaryKey().$defaultFn(()=>q()),userId:i("user_id").notNull().references(()=>W.id,{onDelete:"cascade"}),packageId:i("package_id").notNull(),packageType:i("package_type").notNull(),assignedBy:i("assigned_by").notNull().references(()=>W.id,{onDelete:"set null"}),reason:i("reason").notNull(),expiresAt:i("expires_at"),isActive:i("is_active").notNull().default("true"),createdAt:i("created_at").default(M`(datetime('now'))`)},e=>({userIdx:k("manual_assignments_user_idx").on(e.userId),assignedByIdx:k("manual_assignments_assigned_by_idx").on(e.assignedBy),activeIdx:k("manual_assignments_active_idx").on(e.isActive)}));const bt=Q("advertisements",{id:i("id").primaryKey().$defaultFn(()=>q()),title:i("title").notNull(),description:i("description"),imageUrl:i("image_url").notNull(),linkUrl:i("link_url").notNull(),type:i("type").notNull(),placement:i("placement").notNull(),isActive:i("is_active").notNull().default("true"),startDate:i("start_date"),endDate:i("end_date"),displayOrder:T("display_order").notNull().default(0),clickCount:T("click_count").notNull().default(0),impressionCount:T("impression_count").notNull().default(0),variantGroup:i("variant_group"),variantName:i("variant_name"),targetCountries:i("target_countries"),targetDeviceTypes:i("target_device_types"),targetUserRoles:i("target_user_roles"),targetLanguages:i("target_languages"),budget:i("budget"),costPerClick:i("cost_per_click"),costPerImpression:i("cost_per_impression"),conversionGoal:i("conversion_goal"),conversionCount:T("conversion_count").notNull().default(0),frequencyCap:T("frequency_cap"),dailyBudget:i("daily_budget"),totalBudgetSpent:i("total_budget_spent").default("0.00"),tags:i("tags"),notes:i("notes"),createdAt:i("created_at").default(M`(datetime('now'))`),updatedAt:i("updated_at").default(M`(datetime('now'))`)},e=>({placementActiveIdx:k("ads_placement_active_idx").on(e.placement,e.isActive),displayOrderIdx:k("ads_display_order_idx").on(e.displayOrder),activeIdx:k("ads_active_idx").on(e.isActive),variantGroupIdx:k("ads_variant_group_idx").on(e.variantGroup)})),ki=Q("ad_campaigns",{id:i("id").primaryKey().$defaultFn(()=>q()),name:i("name").notNull(),description:i("description"),status:i("status").notNull().default("draft"),budget:i("budget"),spentAmount:i("spent_amount").notNull().default("0.00"),startDate:i("start_date"),endDate:i("end_date"),createdBy:i("created_by").references(()=>W.id,{onDelete:"set null"}),createdAt:i("created_at").default(M`(datetime('now'))`),updatedAt:i("updated_at").default(M`(datetime('now'))`)},e=>({statusIdx:k("ad_campaigns_status_idx").on(e.status),createdByIdx:k("ad_campaigns_created_by_idx").on(e.createdBy)}));Q("advertisements_v2",{id:i("id").primaryKey().$defaultFn(()=>q()),campaignId:i("campaign_id").references(()=>ki.id,{onDelete:"set null"}),title:i("title").notNull(),description:i("description"),imageUrl:i("image_url").notNull(),linkUrl:i("link_url").notNull(),type:i("type").notNull(),placement:i("placement").notNull(),isActive:i("is_active").notNull().default("true"),startDate:i("start_date"),endDate:i("end_date"),displayOrder:T("display_order").notNull().default(0),clickCount:T("click_count").notNull().default(0),impressionCount:T("impression_count").notNull().default(0),status:i("status").notNull().default("approved"),reviewedBy:i("reviewed_by").references(()=>W.id,{onDelete:"set null"}),reviewNotes:i("review_notes"),reviewedAt:i("reviewed_at"),weight:T("weight").notNull().default(1),frequencyCap:T("frequency_cap"),createdAt:i("created_at").default(M`(datetime('now'))`),updatedAt:i("updated_at").default(M`(datetime('now'))`)},e=>({campaignIdx:k("ads_v2_campaign_idx").on(e.campaignId),placementActiveIdx:k("ads_v2_placement_active_idx").on(e.placement,e.isActive),statusIdx:k("ads_v2_status_idx").on(e.status)}));Q("ad_performance_history",{id:i("id").primaryKey().$defaultFn(()=>q()),adId:i("ad_id").notNull().references(()=>bt.id,{onDelete:"cascade"}),date:i("date").notNull(),impressions:T("impressions").notNull().default(0),clicks:T("clicks").notNull().default(0),ctr:i("ctr"),conversionCount:T("conversion_count").notNull().default(0),spend:i("spend"),variantName:i("variant_name"),createdAt:i("created_at").default(M`(datetime('now'))`)},e=>({adDateIdx:oe("ad_performance_ad_date_idx").on(e.adId,e.date),adIdx:k("ad_performance_ad_idx").on(e.adId),dateIdx:k("ad_performance_date_idx").on(e.date),variantNameIdx:k("ad_performance_variant_name_idx").on(e.variantName)}));Q("ad_assets",{id:i("id").primaryKey().$defaultFn(()=>q()),adId:i("ad_id").notNull().references(()=>bt.id,{onDelete:"cascade"}),deviceType:i("device_type").notNull(),imageUrl:i("image_url").notNull(),width:T("width"),height:T("height"),fileSize:T("file_size"),isPrimary:i("is_primary").notNull().default("false"),createdAt:i("created_at").default(M`(datetime('now'))`)},e=>({adDeviceIdx:k("ad_assets_ad_device_idx").on(e.adId,e.deviceType),adIdx:k("ad_assets_ad_idx").on(e.adId)}));Q("ad_compliance",{id:i("id").primaryKey().$defaultFn(()=>q()),adId:i("ad_id").notNull().references(()=>bt.id,{onDelete:"cascade"}),checkType:i("check_type").notNull(),status:i("status").notNull().default("pending"),flagReason:i("flag_reason"),checkedBy:i("checked_by").references(()=>W.id,{onDelete:"set null"}),autoCheckResult:i("auto_check_result"),checkedAt:i("checked_at").default(M`(datetime('now'))`),createdAt:i("created_at").default(M`(datetime('now'))`)},e=>({adStatusIdx:k("ad_compliance_ad_status_idx").on(e.adId,e.status),adIdx:k("ad_compliance_ad_idx").on(e.adId)}));Q("ad_user_impressions",{id:i("id").primaryKey().$defaultFn(()=>q()),adId:i("ad_id").notNull().references(()=>bt.id,{onDelete:"cascade"}),userId:i("user_id").references(()=>W.id,{onDelete:"cascade"}),sessionId:i("session_id"),impressionDate:i("impression_date").notNull(),impressionCount:T("impression_count").notNull().default(1),createdAt:i("created_at").default(M`(datetime('now'))`),updatedAt:i("updated_at").default(M`(datetime('now'))`)},e=>({adUserDateIdx:oe("ad_user_impressions_ad_user_date_idx").on(e.adId,e.userId,e.impressionDate),adSessionDateIdx:k("ad_user_impressions_ad_session_date_idx").on(e.adId,e.sessionId,e.impressionDate)}));Q("ad_alerts",{id:i("id").primaryKey().$defaultFn(()=>q()),adId:i("ad_id").references(()=>bt.id,{onDelete:"cascade"}),campaignId:i("campaign_id").references(()=>ki.id,{onDelete:"cascade"}),alertType:i("alert_type").notNull(),severity:i("severity").notNull().default("info"),message:i("message").notNull(),isRead:i("is_read").notNull().default("false"),isResolved:i("is_resolved").notNull().default("false"),resolvedBy:i("resolved_by").references(()=>W.id,{onDelete:"set null"}),resolvedAt:i("resolved_at"),createdAt:i("created_at").default(M`(datetime('now'))`)},e=>({adIdx:k("ad_alerts_ad_idx").on(e.adId),campaignIdx:k("ad_alerts_campaign_idx").on(e.campaignId),severityIdx:k("ad_alerts_severity_idx").on(e.severity),isResolvedIdx:k("ad_alerts_is_resolved_idx").on(e.isResolved)}));Q("ad_templates",{id:i("id").primaryKey().$defaultFn(()=>q()),name:i("name").notNull(),description:i("description"),type:i("type").notNull(),category:i("category").notNull(),thumbnailUrl:i("thumbnail_url"),defaultConfig:i("default_config"),isActive:i("is_active").notNull().default("true"),usageCount:T("usage_count").notNull().default(0),createdAt:i("created_at").default(M`(datetime('now'))`)},e=>({typeIdx:k("ad_templates_type_idx").on(e.type),categoryIdx:k("ad_templates_category_idx").on(e.category)}));const rm=xe(W).pick({username:!0,email:!0,password:!0,profilePicture:!0,country:!0,isAdmin:!0}),am=xe(W).pick({username:!0,password:!0}),nm=J({username:x().min(3,"Username must be at least 3 characters").max(30,"Username must be less than 30 characters"),email:x().email("Please enter a valid email address"),password:x().min(8,"Password must be at least 8 characters").max(100,"Password too long"),confirmPassword:x().min(1,"Please confirm your password"),country:x().optional(),profilePicture:x().optional()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});rm.pick({username:!0,email:!0,profilePicture:!0,country:!0}).extend({id:x(),firstName:x().optional(),lastName:x().optional(),profileImageUrl:x().optional(),role:z(["user","premium","staff","admin","owner"]).default("user"),createdAt:x().optional(),updatedAt:x().optional()});J({role:z(["user","premium","staff","admin","owner"])});const im=xe(He,{title:x().min(1,"Title is required").max(200,"Title too long"),description:x().max(2e3,"Description too long").optional(),author:x().max(100,"Author name too long").optional(),artist:x().max(100,"Artist name too long").optional(),status:z(["ongoing","completed","hiatus","cancelled"]).default("ongoing"),type:z(["manga","manhwa","manhua","webtoon"]).default("manga"),genres:ls(x()).optional().transform(e=>e?JSON.stringify(e):void 0),coverImageUrl:x().refine(e=>e===void 0||e.startsWith("/uploads/")||e.startsWith("/api/chapters/image/")||/^https?:\/\//.test(e),"Cover image must be a valid URL or upload path").optional(),rating:K.number().min(0,"Rating must be at least 0").max(10,"Rating cannot exceed 10").optional(),totalChapters:K.number().int().min(0).optional(),publishedYear:K.number().int().min(1900).max(new Date().getFullYear()+5).optional(),isAdult:z(["true","false"]).default("false"),isFeatured:z(["true","false"]).default("false"),isTrending:z(["true","false"]).default("false"),isPopularToday:z(["true","false"]).default("false"),isLatestUpdate:z(["true","false"]).default("false"),isPinned:z(["true","false"]).default("false")});im.omit({genres:!0}).partial().extend({genres:ls(x()).optional()});const om=xe(Si,{code:x().min(2,"Language code must be at least 2 characters").max(5,"Language code too long").regex(/^[a-z]{2}(-[A-Z]{2})?$/,"Invalid language code format (e.g., en, es, ja, en-US)"),name:x().min(1,"Language name is required").max(100,"Language name too long"),nativeName:x().min(1,"Native name is required").max(100,"Native name too long"),isActive:z(["true","false"]).default("true"),isDefault:z(["true","false"]).default("false")});om.partial();const lm=xe(Vu,{seriesId:x().min(1,"Series ID is required"),languageId:x().min(1,"Language ID is required"),title:x().min(1,"Translated title is required").max(200,"Title too long").optional(),description:x().max(2e3,"Description too long").optional()});lm.partial().omit({seriesId:!0,languageId:!0});const cm=xe(Rt,{seriesId:x().min(1,"Series ID is required"),chapterNumber:x().min(1,"Chapter number is required").max(20,"Chapter number too long"),title:x().max(200,"Chapter title too long").optional(),pages:ls(x()).min(1,"At least one page is required").transform(e=>JSON.stringify(e)),totalPages:K.number().int().min(1,"Must have at least 1 page").optional(),coverImageUrl:x().refine(e=>e===void 0||e.startsWith("/uploads/")||e.startsWith("/api/chapters/image/")||/^https?:\/\//.test(e),"Cover image must be a valid URL or upload path").optional(),isPublished:z(["true","false"]).default("true"),uploadedBy:x().optional(),requiresManualReorder:z(["true","false"]).default("false"),naturalSortConfidence:x().refine(e=>e===void 0||/^\d*\.?\d+$/.test(e)&&parseFloat(e)>=0&&parseFloat(e)<=1,{message:"Natural sort confidence must be a number between 0.0 and 1.0"}).default("1.0")});cm.partial();const dm=xe(Hu,{category:z(["site","users","content","system"]),key:x().min(1,"Key is required").max(100,"Key too long"),value:x().min(0,"Value is required"),type:z(["string","number","boolean","json"]).default("string"),description:x().max(500,"Description too long").optional(),isPublic:sr().default(!1).transform(e=>e?"true":"false")});dm.partial();J({category:z(["site","users","content","system"]),key:x().min(1),value:Xt(),type:z(["string","number","boolean","json"]).default("string"),description:x().optional(),isPublic:sr().default(!1).transform(e=>e?"true":"false")});xe(Ku,{userId:x().min(1,"User ID is required"),seriesId:x().min(1,"Series ID is required"),status:z(["reading","completed","plan_to_read","on_hold","dropped"]).default("reading")});J({status:z(["reading","completed","plan_to_read","on_hold","dropped"])});xe(Wu,{userId:x().min(1,"User ID is required"),seriesId:x().optional(),chapterId:x().optional(),content:x().min(1,"Comment cannot be empty").max(1e3,"Comment cannot exceed 1000 characters")}).refine(e=>e.seriesId||e.chapterId,{message:"Comment must be for either a series or a chapter",path:["seriesId"]}).refine(e=>!(e.seriesId&&e.chapterId),{message:"Comment cannot be for both a series and a chapter",path:["seriesId"]});J({content:x().min(1,"Comment cannot be empty").max(1e3,"Comment cannot exceed 1000 characters")});xe(Gu,{userId:x().min(1,"User ID is required"),seriesId:x().min(1,"Series ID is required"),chapterId:x().optional(),lastReadPage:K.number().int().min(0,"Page number must be at least 0").default(0)});J({chapterId:x().optional(),lastReadPage:K.number().int().min(0,"Page number must be at least 0")});xe(Zu,{userId:x().min(1,"User ID is required"),seriesId:x().min(1,"Series ID is required"),rating:K.number().int().min(1,"Rating must be at least 1").max(10,"Rating cannot exceed 10"),review:x().max(2e3,"Review cannot exceed 2000 characters").optional()});J({rating:K.number().int().min(1,"Rating must be at least 1").max(10,"Rating cannot exceed 10").optional(),review:x().max(2e3,"Review cannot exceed 2000 characters").optional()});xe(_i,{userId:x().min(1,"User ID is required"),amount:K.number().int().refine(e=>e!==0,"Amount cannot be zero"),type:z(["purchase","admin_grant","unlock_chapter","refund","bonus"]),description:x().min(1,"Description is required").max(500,"Description too long"),relatedEntityId:x().optional()});Ye(_i);const um=xe(yr,{name:x().min(1,"Package name is required").max(100,"Package name too long"),currencyAmount:K.number().int().min(1,"Currency amount must be at least 1"),priceUSD:x().regex(/^\d+(\.\d{1,2})?$/,"Price must be a valid USD amount (e.g., 4.99)"),bonusPercentage:K.number().int().min(0,"Bonus percentage cannot be negative").max(100,"Bonus percentage cannot exceed 100").default(0),isActive:z(["true","false"]).default("true"),displayOrder:K.number().int().min(0,"Display order must be at least 0").default(0)});Ye(yr);um.partial();xe(fs,{userId:x().min(1,"User ID is required"),packageId:x().optional(),amountPaid:x().regex(/^\d+(\.\d{1,2})?$/,"Amount must be a valid USD amount (e.g., 4.99)"),currencyReceived:K.number().int().min(0,"Currency received must be at least 0"),paymentProvider:x().min(1,"Payment provider is required"),transactionId:x().optional(),status:z(["completed","pending","failed","refunded"]).default("pending")});Ye(fs);J({status:z(["completed","pending","failed","refunded"])});const mm=xe(Ci,{chapterId:x().min(1,"Chapter ID is required"),accessType:z(["free","premium","locked"]),unlockCost:K.number().int().min(0,"Unlock cost cannot be negative").default(0),isActive:z(["true","false"]).default("true")});Ye(Ci);mm.partial().omit({chapterId:!0});xe(Mi,{userId:x().min(1,"User ID is required"),chapterId:x().min(1,"Chapter ID is required"),costPaid:K.number().int().min(0,"Cost paid cannot be negative")});Ye(Mi);J({userId:x().min(1,"User ID is required"),amount:K.number().int().min(1,"Amount must be at least 1"),description:x().min(1,"Description is required").max(500,"Description too long"),relatedEntityId:x().optional()});J({userId:x().min(1,"User ID is required"),amount:K.number().int().min(1,"Amount must be at least 1"),description:x().min(1,"Description is required").max(500,"Description too long"),relatedEntityId:x().optional()});const hm=xe(gr,{name:x().min(1,"List name is required").max(100,"Name too long"),description:x().max(500,"Description too long").optional(),visibility:z(["private","public"]).default("private")});Ye(gr);hm.partial().omit({userId:!0});xe(Ii,{listId:x().min(1,"List ID is required"),seriesId:x().min(1,"Series ID is required")});Ye(Ii);J({title:x().min(1,"Title is required").max(200,"Title too long"),description:x().max(1e3,"Description too long").optional(),imageUrl:x().url("Invalid image URL").or(x().startsWith("/uploads/",{message:"Image URL must be a valid URL or upload path"})),linkUrl:x().url("Invalid link URL"),type:z(["banner","sidebar","popup","inline"],{errorMap:()=>({message:"Invalid ad type"})}),placement:z(["homepage","manga-page","chapter-reader","browse","all"],{errorMap:()=>({message:"Invalid placement"})}),isActive:z(["true","false"]).default("true"),startDate:x().datetime().optional().nullable(),endDate:x().datetime().optional().nullable(),displayOrder:K.number().int().min(0,"Display order must be at least 0").default(0),targetCountries:x().optional().nullable(),targetDeviceTypes:x().optional().nullable(),targetUserRoles:x().optional().nullable(),targetLanguages:x().optional().nullable(),budget:x().optional().nullable(),costPerClick:x().optional().nullable(),costPerImpression:x().optional().nullable(),conversionGoal:z(["click","signup","purchase","download"]).optional().nullable(),frequencyCap:K.number().int().min(1).optional().nullable(),dailyBudget:x().optional().nullable(),tags:x().optional().nullable(),notes:x().max(5e3).optional().nullable()}).refine(e=>e.startDate&&e.endDate?new Date(e.startDate)<new Date(e.endDate):!0,{message:"Start date must be before end date",path:["endDate"]});Ye(bt);J({title:x().min(1,"Title is required").max(200,"Title too long").optional(),description:x().max(1e3,"Description too long").optional(),imageUrl:x().url("Invalid image URL").or(x().startsWith("/uploads/",{message:"Image URL must be a valid URL or upload path"})).optional(),linkUrl:x().url("Invalid link URL").optional(),type:z(["banner","sidebar","popup","inline"],{errorMap:()=>({message:"Invalid ad type"})}).optional(),placement:z(["homepage","manga-page","chapter-reader","browse","all"],{errorMap:()=>({message:"Invalid placement"})}).optional(),isActive:z(["true","false"]).optional(),startDate:x().datetime().optional().nullable(),endDate:x().datetime().optional().nullable(),displayOrder:K.number().int().min(0,"Display order must be at least 0").optional(),targetCountries:x().optional().nullable(),targetDeviceTypes:x().optional().nullable(),targetUserRoles:x().optional().nullable(),targetLanguages:x().optional().nullable(),budget:x().optional().nullable(),costPerClick:x().optional().nullable(),costPerImpression:x().optional().nullable(),conversionGoal:z(["click","signup","purchase","download"]).optional().nullable(),frequencyCap:K.number().int().min(1).optional().nullable(),dailyBudget:x().optional().nullable(),tags:x().optional().nullable(),notes:x().max(5e3).optional().nullable()}).refine(e=>e.startDate&&e.endDate?new Date(e.startDate)<new Date(e.endDate):!0,{message:"Start date must be before end date",path:["endDate"]});const Di=J({name:x().min(1,"Campaign name is required").max(200,"Campaign name too long"),description:x().max(1e3,"Description too long").optional(),status:z(["draft","active","paused","completed","archived"]).default("draft"),budget:x().regex(/^\d+(\.\d{1,2})?$/,"Budget must be a valid USD amount").optional().nullable(),startDate:x().datetime().optional().nullable(),endDate:x().datetime().optional().nullable()});Di.refine(e=>e.startDate&&e.endDate?new Date(e.startDate)<new Date(e.endDate):!0,{message:"Start date must be before end date",path:["endDate"]});Di.partial().refine(e=>e.startDate&&e.endDate?new Date(e.startDate)<new Date(e.endDate):!0,{message:"Start date must be before end date",path:["endDate"]});J({adId:x().min(1,"Ad ID is required"),date:x().regex(/^\d{4}-\d{2}-\d{2}$/,"Date must be in YYYY-MM-DD format"),impressions:K.number().int().min(0).default(0),clicks:K.number().int().min(0).default(0),conversionCount:K.number().int().min(0).default(0),spend:x().regex(/^\d+(\.\d{1,2})?$/,"Spend must be a valid USD amount").optional().nullable()});J({adId:x().min(1,"Ad ID is required"),deviceType:z(["mobile","tablet","desktop","all"]),imageUrl:x().url("Invalid image URL").or(x().startsWith("/uploads/",{message:"Image URL must be a valid URL or upload path"})),width:K.number().int().min(1).optional().nullable(),height:K.number().int().min(1).optional().nullable(),fileSize:K.number().int().min(0).optional().nullable(),isPrimary:z(["true","false"]).default("false")});J({adId:x().min(1,"Ad ID is required"),checkType:z(["content_policy","brand_safety","prohibited_content","manual_review"]),status:z(["pending","approved","flagged","rejected"]).default("pending"),flagReason:x().max(500,"Flag reason too long").optional(),autoCheckResult:x().optional()});J({status:z(["pending","approved","flagged","rejected"]),flagReason:x().max(500,"Flag reason too long").optional()});const fm=J({name:x().min(1,"Template name is required").max(200,"Template name too long"),description:x().max(1e3,"Description too long").optional(),type:z(["banner","sidebar","popup","inline"]),category:z(["manga_promotion","sponsor","announcement","partner"]),thumbnailUrl:x().url("Invalid thumbnail URL").or(x().startsWith("/uploads/")).optional(),defaultConfig:x().optional(),isActive:z(["true","false"]).default("true")});fm.partial();J({title:x().min(1,"Title is required").max(200,"Title too long"),description:x().max(1e3,"Description too long").optional(),imageUrl:x().url("Invalid image URL").or(x().startsWith("/uploads/",{message:"Image URL must be a valid URL or upload path"})),linkUrl:x().url("Invalid link URL"),type:z(["banner","sidebar","popup","inline"],{errorMap:()=>({message:"Invalid ad type"})}),placement:z(["homepage","manga-page","chapter-reader","browse","all"],{errorMap:()=>({message:"Invalid placement"})}),isActive:z(["true","false"]).default("true"),startDate:x().datetime().optional().nullable(),endDate:x().datetime().optional().nullable(),displayOrder:K.number().int().min(0,"Display order must be at least 0").default(0),campaignId:x().optional().nullable(),status:z(["draft","pending","approved","rejected"]).default("draft"),weight:K.number().int().min(1,"Weight must be at least 1").default(1),frequencyCap:K.number().int().min(1).optional().nullable()}).refine(e=>e.startDate&&e.endDate?new Date(e.startDate)<new Date(e.endDate):!0,{message:"Start date must be before end date",path:["endDate"]});J({title:x().min(1,"Title is required").max(200,"Title too long").optional(),description:x().max(1e3,"Description too long").optional(),imageUrl:x().url("Invalid image URL").or(x().startsWith("/uploads/",{message:"Image URL must be a valid URL or upload path"})).optional(),linkUrl:x().url("Invalid link URL").optional(),type:z(["banner","sidebar","popup","inline"],{errorMap:()=>({message:"Invalid ad type"})}).optional(),placement:z(["homepage","manga-page","chapter-reader","browse","all"],{errorMap:()=>({message:"Invalid placement"})}).optional(),isActive:z(["true","false"]).optional(),startDate:x().datetime().optional().nullable(),endDate:x().datetime().optional().nullable(),displayOrder:K.number().int().min(0,"Display order must be at least 0").optional(),campaignId:x().optional().nullable(),status:z(["draft","pending","approved","rejected"]).optional(),weight:K.number().int().min(1,"Weight must be at least 1").optional(),frequencyCap:K.number().int().min(1).optional().nullable()}).refine(e=>e.startDate&&e.endDate?new Date(e.startDate)<new Date(e.endDate):!0,{message:"Start date must be before end date",path:["endDate"]});J({reviewNotes:x().max(1e3,"Review notes too long").optional()});J({reviewNotes:x().min(1,"Rejection reason is required").max(1e3,"Review notes too long")});const pm=J({code:x().min(1,"Coupon code is required").max(50,"Code too long").regex(/^[A-Z0-9_-]+$/i,"Code must contain only letters, numbers, dashes, and underscores"),type:z(["percentage","fixed"],{errorMap:()=>({message:"Type must be 'percentage' or 'fixed'"})}),value:x().regex(/^\d+(\.\d{1,2})?$/,"Value must be a valid number"),minPurchaseAmount:x().regex(/^\d+(\.\d{1,2})?$/,"Minimum purchase must be a valid amount").optional().nullable(),maxUses:K.number().int().min(1).optional().nullable(),expiresAt:x().datetime().optional().nullable(),isActive:z(["true","false"]).default("true")});pm.partial();const xm=J({name:x().min(1,"Bundle name is required").max(200,"Name too long"),description:x().max(1e3,"Description too long").optional(),bundleType:z(["currency","subscription","chapter","mixed"]),priceUSD:x().regex(/^\d+(\.\d{1,2})?$/,"Price must be a valid USD amount"),items:x(),isActive:z(["true","false"]).default("true"),displayOrder:K.number().int().min(0).default(0)});xm.partial();const gm=J({userId:x().min(1,"User ID is required"),purchaseId:x().optional().nullable(),invoiceNumber:x().min(1,"Invoice number is required").regex(/^INV-\d{8}-\d{4}$/,"Invalid invoice number format"),totalAmount:x().regex(/^\d+(\.\d{1,2})?$/,"Total must be a valid USD amount"),taxAmount:x().regex(/^\d+(\.\d{1,2})?$/,"Tax must be a valid USD amount").default("0.00"),discountAmount:x().regex(/^\d+(\.\d{1,2})?$/,"Discount must be a valid USD amount").default("0.00"),finalAmount:x().regex(/^\d+(\.\d{1,2})?$/,"Final amount must be a valid USD amount"),status:z(["draft","issued","paid","voided"]).default("draft"),pdfPath:x().optional().nullable()});gm.partial();J({invoiceId:x().min(1,"Invoice ID is required"),itemType:z(["currency_package","subscription","bundle","chapter_unlock"]),itemId:x().optional().nullable(),description:x().min(1,"Description is required").max(500,"Description too long"),quantity:K.number().int().min(1).default(1),unitPrice:x().regex(/^\d+(\.\d{1,2})?$/,"Unit price must be a valid USD amount"),totalPrice:x().regex(/^\d+(\.\d{1,2})?$/,"Total price must be a valid USD amount")});const ym=J({userId:x().min(1,"User ID is required"),packageId:x().min(1,"Package ID is required"),packageType:z(["currency","subscription","bundle"]),assignedBy:x().min(1,"Assigner ID is required"),reason:x().min(1,"Reason is required").max(500,"Reason too long"),expiresAt:x().datetime().optional().nullable(),isActive:z(["true","false"]).default("true")});ym.partial();function bm(){const[,e]=Ne(),{toast:s}=lt(),r=Lt(),a=Xa({resolver:oi(am),defaultValues:{username:"",password:""}}),n=Te({mutationFn:async d=>$e("POST","/api/auth/login",d),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/auth/user"]}),s({title:"Welcome back!",description:"You've successfully logged in to MangaVerse."}),e("/")},onError:d=>{s({title:"Login failed",description:d.message||"Please check your username and password.",variant:"destructive"})}}),o=d=>{n.mutate(d)},c=d=>{d.key==="Enter"&&!n.isPending&&(d.preventDefault(),a.handleSubmit(o)())};return t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx(Et,{}),t.jsx("div",{className:"flex items-center justify-center p-4 min-h-[calc(100vh-4rem)]",children:t.jsxs("div",{className:"w-1/2",children:[t.jsxs("div",{className:"flex flex-col items-center justify-center mb-12",children:[t.jsx("div",{className:"w-20 h-20 mb-6 flex items-center justify-center",children:t.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-primary via-accent to-primary flex items-center justify-center shadow-2xl shadow-primary/40",children:t.jsx(Oe,{className:"w-8 h-8 text-white"})})}),t.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Welcome Back"})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsx(ui,{...a,children:t.jsxs("form",{onSubmit:a.handleSubmit(o),className:"space-y-4",children:[t.jsx(ht,{control:a.control,name:"username",render:({field:d})=>t.jsxs(tt,{children:[t.jsx(st,{className:"text-sm font-medium text-foreground",children:"Username"}),t.jsx(rt,{children:t.jsxs("div",{className:"relative",children:[t.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 z-10 pointer-events-none",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),t.jsx(Re,{placeholder:"Enter your username",className:"pl-10 h-12 bg-card/50 border-border text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-primary/20 rounded-lg backdrop-blur-sm","data-testid":"input-username",autoComplete:"username",onKeyDown:c,...d})]})}),t.jsx(at,{className:"text-red-400 text-xs"})]})}),t.jsx(ht,{control:a.control,name:"password",render:({field:d})=>t.jsxs(tt,{children:[t.jsx(st,{className:"text-sm font-medium text-foreground",children:"Password"}),t.jsx(rt,{children:t.jsxs("div",{className:"relative h-12",children:[t.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 z-10 pointer-events-none",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),t.jsx(Re,{type:"password",placeholder:"",className:"pl-10 h-12 bg-card/50 border-border text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-primary/20 rounded-lg backdrop-blur-sm","data-testid":"input-password",autoComplete:"current-password",onKeyDown:c,...d})]})}),t.jsx(at,{className:"text-red-400 text-xs"})]})}),t.jsx(v,{type:"submit",className:"w-full h-12 mt-6 bg-gradient-to-r from-primary to-accent hover:from-primary/80 hover:to-accent/80 text-primary-foreground font-medium rounded-lg transition-all duration-200 shadow-lg shadow-primary/30",disabled:n.isPending,"data-testid":"button-login",children:n.isPending?"Signing in...":"Login"})]})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"relative my-6",children:[t.jsx("div",{className:"absolute inset-0 flex items-center",children:t.jsx("span",{className:"w-full border-t border-border"})}),t.jsx("div",{className:"relative flex justify-center text-sm",children:t.jsx("span",{className:"bg-background px-4 py-1 text-muted-foreground rounded-md border border-border/50",children:"Or continue with"})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs(v,{type:"button",variant:"outline",className:"h-11 bg-card/50 border-border hover:bg-card/70 text-foreground transition-all duration-200 backdrop-blur-sm",onClick:()=>window.location.href="/api/auth/discord",children:[t.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:t.jsx("path",{d:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.0019 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1568 2.4189Z",fill:"#5865F2"})}),t.jsx("span",{className:"ml-2 text-xs",children:"Discord"})]}),t.jsxs(v,{type:"button",variant:"outline",className:"h-11 bg-card/50 border-border hover:bg-card/70 text-foreground transition-all duration-200 backdrop-blur-sm",onClick:()=>window.location.href="/api/auth/google",children:[t.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:[t.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),t.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),t.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),t.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),t.jsx("span",{className:"ml-2 text-xs",children:"Google"})]})]})]}),t.jsx("div",{className:"text-center",children:t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Not a member?"," ",t.jsx(Y,{href:"/signup",children:t.jsx(v,{variant:"ghost",className:"p-0 h-auto text-blue-400 hover:underline font-medium","data-testid":"link-signup",children:"Create New Account"})})]})})]}),t.jsxs("div",{className:"mt-12 text-center",children:[t.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[t.jsx(Oe,{className:"w-5 h-5 text-primary"}),t.jsx("span",{className:"text-lg font-bold text-white",children:"MangaVerse"})]}),t.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"Read Comics, manga, manhwa. Translated swiftly. MangaVerse your ultimate library."}),t.jsxs("div",{className:"flex justify-center items-center space-x-4 text-xs text-gray-600",children:[t.jsx("span",{children:"Privacy Policy"}),t.jsx("span",{children:""}),t.jsx("span",{children:"DMCA"}),t.jsx("span",{children:""}),t.jsx(Y,{href:"/",className:"text-xs text-gray-600 hover:underline hover:text-gray-400 transition-colors",children:"Discord"})]})]})]})})]})}function vm(){const[,e]=Ne(),{toast:s}=lt(),r=Lt(),[a,n]=l.useState(null),o=Xa({resolver:oi(nm),defaultValues:{username:"",email:"",password:"",confirmPassword:"",profilePicture:""}}),c=Te({mutationFn:async u=>$e("POST","/api/auth/signup",u),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/auth/user"]}),s({title:"Welcome to MangaVerse!",description:"Your account has been created successfully."}),e("/login")},onError:u=>{s({title:"Signup failed",description:u.message||"Unable to create account. Please try again.",variant:"destructive"})}}),d=u=>{c.mutate({...u,profilePicture:a||""})},m=u=>{u.key==="Enter"&&!c.isPending&&(u.preventDefault(),o.handleSubmit(d)())},h=u=>{const f=u.target.files?.[0];if(f){if(f.size>2097152){s({title:"File too large",description:"Please select an image smaller than 2MB.",variant:"destructive"});return}if(!f.type.startsWith("image/")){s({title:"Invalid file type",description:"Please select an image file (JPG, PNG, etc.).",variant:"destructive"});return}const g=new FileReader;g.onload=j=>{const N=j.target?.result;n(N),o.setValue("profilePicture",N)},g.readAsDataURL(f)}};return t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx(Et,{}),t.jsx("div",{className:"flex items-center justify-center p-4 pt-20",children:t.jsxs("div",{className:"w-1/2",children:[t.jsxs("div",{className:"flex flex-col items-center justify-center mb-8",children:[t.jsx("div",{className:"w-20 h-20 mb-4 flex items-center justify-center",children:t.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-primary via-accent to-primary flex items-center justify-center shadow-2xl shadow-primary/40",children:t.jsx(Oe,{className:"w-8 h-8 text-white"})})}),t.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Create New Account"}),t.jsx("p",{className:"text-muted-foreground text-center text-sm",children:"Join MangaVerse to start your manga journey"})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col items-center space-y-3 mb-6",children:[t.jsxs("div",{className:"relative group",children:[t.jsx("div",{className:"w-[77px] h-[77px] rounded-full bg-card/50 border-2 border-border flex items-center justify-center overflow-hidden cursor-pointer hover:border-primary hover:scale-105 transition-all duration-300 backdrop-blur-sm",children:a?t.jsx("img",{src:a,alt:"Profile",className:"w-full h-full object-cover"}):t.jsx(Bl,{className:"w-7 h-7 text-muted-foreground group-hover:text-primary transition-colors"})}),t.jsx("input",{id:"profile-picture-upload",type:"file",accept:"image/*",autoComplete:"off",onChange:h,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),t.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-primary rounded-full flex items-center justify-center hover:scale-110 transition-transform duration-300",children:t.jsx(oc,{className:"w-3 h-3 text-white"})})]}),t.jsx("label",{htmlFor:"profile-picture-upload",className:"text-sm font-medium text-foreground cursor-pointer hover:text-primary transition-colors",children:"Choose Picture"})]}),t.jsx(ui,{...o,children:t.jsxs("form",{onSubmit:o.handleSubmit(d),className:"space-y-4",children:[t.jsx(ht,{control:o.control,name:"username",render:({field:u})=>t.jsxs(tt,{children:[t.jsx(st,{className:"text-sm font-medium text-foreground",children:"Username"}),t.jsx(rt,{children:t.jsxs("div",{className:"relative",children:[t.jsx(Zt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground z-10 pointer-events-none"}),t.jsx(Re,{placeholder:"Enter your username",className:"pl-10 h-12 bg-card/50 border-border text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-primary/20 rounded-lg backdrop-blur-sm",autoComplete:"username",onKeyDown:m,...u})]})}),t.jsx(at,{className:"text-red-400 text-xs"})]})}),t.jsx(ht,{control:o.control,name:"email",render:({field:u})=>t.jsxs(tt,{children:[t.jsx(st,{className:"text-sm font-medium text-foreground",children:"Email"}),t.jsx(rt,{children:t.jsxs("div",{className:"relative",children:[t.jsx(Xl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground z-10 pointer-events-none"}),t.jsx(Re,{type:"email",placeholder:"your@example.com",className:"pl-10 h-12 bg-card/50 border-border text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-primary/20 rounded-lg backdrop-blur-sm",autoComplete:"email",onKeyDown:m,...u})]})}),t.jsx(at,{className:"text-red-400 text-xs"})]})}),t.jsx(ht,{control:o.control,name:"password",render:({field:u})=>t.jsxs(tt,{children:[t.jsx(st,{className:"text-sm font-medium text-foreground",children:"Password"}),t.jsx(rt,{children:t.jsxs("div",{className:"relative",children:[t.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground z-10 pointer-events-none",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),t.jsx(Re,{type:"password",placeholder:"",className:"pl-10 h-12 bg-card/50 border-border text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-primary/20 rounded-lg backdrop-blur-sm",autoComplete:"new-password",onKeyDown:m,...u})]})}),t.jsx(at,{className:"text-red-400 text-xs"})]})}),t.jsx(ht,{control:o.control,name:"confirmPassword",render:({field:u})=>t.jsxs(tt,{children:[t.jsx(st,{className:"text-sm font-medium text-foreground",children:"Confirm Password"}),t.jsx(rt,{children:t.jsxs("div",{className:"relative",children:[t.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground z-10 pointer-events-none",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),t.jsx(Re,{type:"password",placeholder:"",className:"pl-10 h-12 bg-card/50 border-border text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-primary/20 rounded-lg backdrop-blur-sm",autoComplete:"new-password",onKeyDown:m,...u})]})}),t.jsx(at,{className:"text-red-400 text-xs"})]})}),t.jsx(v,{type:"submit",disabled:c.isPending,className:"w-full h-12 mt-6 bg-gradient-to-r from-primary to-accent hover:from-primary/80 hover:to-accent/80 text-primary-foreground font-medium rounded-lg transition-all duration-200 shadow-lg shadow-primary/30 text-center pt-[12px] pb-[12px]",children:c.isPending?"Creating Account...":"Create Account"})]})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"relative my-6",children:[t.jsx("div",{className:"absolute inset-0 flex items-center",children:t.jsx("span",{className:"w-full border-t border-border"})}),t.jsx("div",{className:"relative flex justify-center text-sm",children:t.jsx("span",{className:"bg-background px-4 py-1 text-muted-foreground rounded-md border border-border/50",children:"Or continue with"})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs(v,{type:"button",variant:"outline",className:"h-11 bg-card/50 border-border hover:bg-card/70 text-foreground transition-all duration-200 backdrop-blur-sm",onClick:()=>window.location.href="/api/auth/discord",children:[t.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:t.jsx("path",{d:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.0019 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1568 2.4189Z",fill:"#5865F2"})}),t.jsx("span",{className:"ml-2 text-xs",children:"Discord"})]}),t.jsxs(v,{type:"button",variant:"outline",className:"h-11 bg-card/50 border-border hover:bg-card/70 text-foreground transition-all duration-200 backdrop-blur-sm",onClick:()=>window.location.href="/api/auth/google",children:[t.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:[t.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),t.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),t.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),t.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),t.jsx("span",{className:"ml-2 text-xs",children:"Google"})]})]})]}),t.jsx("div",{className:"text-center",children:t.jsxs("p",{className:"text-sm text-gray-400",children:["Already have an account?"," ",t.jsx(Y,{href:"/login",children:t.jsx(v,{variant:"ghost",className:"p-0 h-auto text-blue-400 underline cursor-pointer font-medium hover:bg-transparent hover:text-blue-400 hover:underline",children:"Login"})})]})})]}),t.jsxs("div",{className:"mt-12 text-center",children:[t.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[t.jsx(Oe,{className:"w-5 h-5 text-primary"}),t.jsx("span",{className:"text-lg font-bold text-foreground",children:"MangaVerse"})]}),t.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Read Comics, manga, manhwa. Translated swiftly. MangaVerse your ultimate library."}),t.jsxs("div",{className:"flex justify-center space-x-4 text-xs text-muted-foreground",children:[t.jsx("span",{children:"Privacy Policy"}),t.jsx("span",{children:""}),t.jsx("span",{children:"DMCA"}),t.jsx("span",{children:""}),t.jsx("span",{children:"Discord"})]})]})]})})]})}function wm(){const{toast:e}=lt(),s=Te({mutationFn:async({token:r})=>$e("POST","/api/auth/verify-email",{token:r}),onSuccess:()=>{e({title:"Email verified!",description:"Your email has been successfully verified. You can now log in."})},onError:r=>{e({title:"Verification failed",description:r.message||"Invalid or expired verification token.",variant:"destructive"})}});return{verifyEmail:s.mutate,isVerifying:s.isPending,isSuccess:s.isSuccess,isError:s.isError,error:s.error}}function jm(){const[,e]=Ne(),r=new URLSearchParams(Bo()).get("token"),{verifyEmail:a,isVerifying:n,isSuccess:o,isError:c,error:d}=wm();l.useEffect(()=>{r&&a({token:r})},[r]),l.useEffect(()=>{if(o){const h=setTimeout(()=>{e("/login")},3e3);return()=>clearTimeout(h)}},[o,e]);const m=()=>d&&typeof d=="object"&&"message"in d?d.message:"Invalid or expired verification token.";return t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx(Et,{}),t.jsx("div",{className:"flex items-center justify-center p-4 min-h-[calc(100vh-4rem)]",children:t.jsxs("div",{className:"w-full max-w-md",children:[t.jsxs("div",{className:"flex flex-col items-center justify-center mb-8",children:[t.jsx("div",{className:"w-20 h-20 mb-6 flex items-center justify-center",children:t.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-primary via-accent to-primary flex items-center justify-center shadow-2xl shadow-primary/40",children:t.jsx(Oe,{className:"w-8 h-8 text-white"})})}),t.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Email Verification"})]}),t.jsxs("div",{className:"bg-card/50 backdrop-blur-sm border border-border rounded-lg p-8",children:[!r&&t.jsxs("div",{className:"text-center",children:[t.jsx(na,{className:"w-12 h-12 text-destructive mx-auto mb-4"}),t.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Invalid Link"}),t.jsx("p",{className:"text-muted-foreground mb-6",children:"No verification token found. Please check your email for the correct link."}),t.jsx(v,{onClick:()=>e("/login"),className:"w-full bg-gradient-to-r from-primary to-accent hover:from-primary/80 hover:to-accent/80",children:"Go to Login"})]}),r&&n&&t.jsxs("div",{className:"text-center",children:[t.jsx(vn,{className:"w-12 h-12 text-primary mx-auto mb-4 animate-spin"}),t.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Verifying Email"}),t.jsx("p",{className:"text-muted-foreground",children:"Please wait while we verify your email address..."})]}),r&&o&&t.jsxs("div",{className:"text-center",children:[t.jsx(Kl,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),t.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Email Verified!"}),t.jsx("p",{className:"text-muted-foreground mb-6",children:"Your email has been successfully verified. Redirecting to login..."}),t.jsx(v,{onClick:()=>e("/login"),className:"w-full bg-gradient-to-r from-primary to-accent hover:from-primary/80 hover:to-accent/80",children:"Go to Login Now"})]}),r&&c&&t.jsxs("div",{className:"text-center",children:[t.jsx(na,{className:"w-12 h-12 text-destructive mx-auto mb-4"}),t.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Verification Failed"}),t.jsx("p",{className:"text-muted-foreground mb-6",children:m()}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(v,{onClick:()=>e("/login"),className:"w-full bg-gradient-to-r from-primary to-accent hover:from-primary/80 hover:to-accent/80",children:"Go to Login"}),t.jsx(v,{onClick:()=>e("/signup"),variant:"outline",className:"w-full",children:"Back to Signup"})]})]})]})]})})]})}function Nm(){const[e]=Ne(),[s,r]=l.useState(!1),[a,n]=l.useState(!1),o=e==="/signup"||e.startsWith("/signup?");l.useEffect(()=>{const d=()=>{r(window.pageYOffset>500)};return window.addEventListener("scroll",d),()=>{window.removeEventListener("scroll",d)}},[]);const c=()=>{window.scrollTo({top:0,behavior:"smooth"})};return t.jsx(t.Fragment,{children:s&&!o&&t.jsxs("div",{className:"fixed bottom-6 right-6 z-50 group",children:[t.jsxs(v,{onClick:c,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),className:`
              relative w-14 h-14 rounded-full border-0 shadow-2xl transition-all duration-500 ease-out
              bg-gradient-to-r from-purple-600 via-pink-500 to-blue-500
              hover:from-purple-700 hover:via-pink-600 hover:to-blue-600
              hover:scale-110 hover:shadow-purple-500/50 hover:shadow-2xl
              active:scale-95 active:duration-75
              backdrop-blur-sm overflow-hidden
              ${a?"animate-pulse":""}
            `,"data-testid":"scroll-to-top-button",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-400/20 via-pink-400/20 to-blue-400/20 animate-spin-slow opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),t.jsx("div",{className:`
              absolute inset-0 rounded-full bg-gradient-to-r from-purple-400 via-pink-400 to-blue-400 
              opacity-0 blur-lg transition-all duration-500
              ${a?"opacity-60 scale-150":"opacity-0 scale-100"}
            `}),t.jsxs("div",{className:"absolute inset-0 rounded-full overflow-hidden",children:[t.jsx("div",{className:`
                absolute top-1 left-1 w-1 h-1 bg-white/80 rounded-full 
                transition-all duration-700 ease-out
                ${a?"translate-x-8 translate-y-8 opacity-0":"translate-x-0 translate-y-0 opacity-100"}
              `}),t.jsx("div",{className:`
                absolute top-2 right-2 w-1 h-1 bg-white/60 rounded-full 
                transition-all duration-1000 ease-out delay-150
                ${a?"translate-x-6 translate-y-6 opacity-0":"translate-x-0 translate-y-0 opacity-100"}
              `}),t.jsx("div",{className:`
                absolute bottom-2 left-2 w-1 h-1 bg-white/70 rounded-full 
                transition-all duration-800 ease-out delay-75
                ${a?"translate-x-8 -translate-y-8 opacity-0":"translate-x-0 translate-y-0 opacity-100"}
              `})]}),t.jsx(Hl,{className:`
                relative z-10 w-6 h-6 text-white transition-all duration-300
                ${a?"animate-bounce scale-110":""}
              `}),t.jsx("div",{className:`
              absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent
              transform -skew-x-12 transition-all duration-700 ease-out
              ${a?"translate-x-full opacity-100":"-translate-x-full opacity-0"}
            `})]}),t.jsxs("div",{className:`
            absolute bottom-16 right-0 mb-2 px-3 py-1.5 bg-black/80 text-white text-sm rounded-lg
            backdrop-blur-sm transition-all duration-300 whitespace-nowrap
            ${a?"opacity-100 translate-y-0":"opacity-0 translate-y-2 pointer-events-none"}
          `,children:["Back to top",t.jsx("div",{className:"absolute top-full right-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-black/80"})]})]})})}function Ti(e){const{data:s,isLoading:r,error:a,isError:n}=we({queryKey:["/api/series",e],queryFn:Pt({on401:"throw"}),retry:!1,enabled:!!e});return{manga:s,isLoading:r,error:a,isError:n}}function br(e){const{data:s,isLoading:r,error:a,isError:n}=we({queryKey:[`/api/series/${e}/chapters`],queryFn:Pt({on401:"throw"}),retry:!1,enabled:!!e});return{chapters:s||[],isLoading:r,error:a,isError:n}}function Sm(e){const{data:s,isLoading:r,error:a,isError:n}=we({queryKey:["/api/series/:seriesId/progress",e],queryFn:async()=>{if(!e)throw new Error("Series ID is required");const o=await fetch(`/api/series/${e}/progress`,{credentials:"include"});if(o.status===401||o.status===404)return null;if(!o.ok)throw new Error("Failed to fetch reading progress");return o.json()},enabled:!!e,retry:!1});return{progress:s||null,isLoading:r,error:a,isError:n}}function Im(){const e=Te({mutationFn:async({seriesId:s,chapterId:r,lastReadPage:a})=>$e("POST",`/api/series/${s}/progress`,{chapterId:r,lastReadPage:a}),onSuccess:(s,r)=>{se.invalidateQueries({queryKey:["/api/series/:seriesId/progress",r.seriesId]}),se.invalidateQueries({queryKey:["/api/progress"]})}});return{saveProgress:e.mutate,saveProgressAsync:e.mutateAsync,isSaving:e.isPending,error:e.error}}function Xh(e=!1){const{data:s,isLoading:r,error:a,isError:n}=we({queryKey:["/api/progress"],queryFn:async()=>{const o=await fetch("/api/progress",{credentials:"include"});if(o.status===401)return[];if(!o.ok)throw new Error("Failed to fetch user reading progress");return o.json()},enabled:e,retry:!1});return{progressList:s||[],isLoading:r,error:a,isError:n}}function Jh(){const e=Te({mutationFn:async s=>$e("DELETE",`/api/series/${s}/progress`),onSuccess:(s,r)=>{se.invalidateQueries({queryKey:["/api/series/:seriesId/progress",r]}),se.invalidateQueries({queryKey:["/api/progress"]})}});return{deleteProgress:e.mutate,isDeleting:e.isPending}}const Zs=l.forwardRef(({className:e,...s},r)=>t.jsx("textarea",{className:b("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...s}));Zs.displayName="Textarea";const _m=yt("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Li=l.forwardRef(({className:e,variant:s,...r},a)=>t.jsx("div",{ref:a,role:"alert",className:b(_m({variant:s}),e),...r}));Li.displayName="Alert";const Cm=l.forwardRef(({className:e,...s},r)=>t.jsx("h5",{ref:r,className:b("mb-1 font-medium leading-none tracking-tight",e),...s}));Cm.displayName="AlertTitle";const Pi=l.forwardRef(({className:e,...s},r)=>t.jsx("div",{ref:r,className:b("text-sm [&_p]:leading-relaxed",e),...s}));Pi.displayName="AlertDescription";function Ei({seriesId:e,chapterId:s}){const{user:r,isStaffOrAbove:a}=ei(),{toast:n}=lt(),[o,c]=l.useState(""),[d,m]=l.useState(null),[h,u]=l.useState(""),f=1e3,p=e?["comments","series",e]:["comments","chapter",s],g=e?`/api/series/${e}/comments`:`/api/chapters/${s}/comments`,{data:j=[],isLoading:N,error:I,isError:C}=we({queryKey:p,queryFn:async()=>{const A=await fetch(g,{credentials:"include"});if(!A.ok)throw new Error("Failed to fetch comments");return A.json()},retry:!1}),S=Te({mutationFn:async A=>(await $e("POST",g,{content:A})).json(),onMutate:async A=>{await se.cancelQueries({queryKey:p});const ue=se.getQueryData(p);if(r){const ae={id:`temp-${Date.now()}`,userId:r.id,seriesId:e||null,chapterId:s||null,content:A,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),user:{id:r.id,username:r.username,profilePicture:r.profilePicture||null,profileImageUrl:r.profileImageUrl||null}};se.setQueryData(p,(ge=[])=>[ae,...ge])}return{previousComments:ue}},onSuccess:()=>{se.invalidateQueries({queryKey:p}),c(""),n({title:"Comment posted",description:"Your comment has been posted successfully."})},onError:(A,ue,ae)=>{ae?.previousComments&&se.setQueryData(p,ae.previousComments),n({title:"Failed to post comment",description:A.message||"Unable to post your comment. Please try again.",variant:"destructive"})}}),D=Te({mutationFn:async({commentId:A,content:ue})=>(await $e("PATCH",`/api/comments/${A}`,{content:ue})).json(),onMutate:async({commentId:A,content:ue})=>{await se.cancelQueries({queryKey:p});const ae=se.getQueryData(p);return se.setQueryData(p,(ge=[])=>ge.map(Ce=>Ce.id===A?{...Ce,content:ue,updatedAt:new Date().toISOString()}:Ce)),{previousComments:ae}},onSuccess:()=>{se.invalidateQueries({queryKey:p}),m(null),u(""),n({title:"Comment updated",description:"Your comment has been updated successfully."})},onError:(A,ue,ae)=>{ae?.previousComments&&se.setQueryData(p,ae.previousComments),n({title:"Failed to update comment",description:A.message||"Unable to update your comment. Please try again.",variant:"destructive"})}}),O=Te({mutationFn:async A=>$e("DELETE",`/api/comments/${A}`),onMutate:async A=>{await se.cancelQueries({queryKey:p});const ue=se.getQueryData(p);return se.setQueryData(p,(ae=[])=>ae.filter(ge=>ge.id!==A)),{previousComments:ue}},onSuccess:()=>{se.invalidateQueries({queryKey:p}),n({title:"Comment deleted",description:"Your comment has been deleted successfully."})},onError:(A,ue,ae)=>{ae?.previousComments&&se.setQueryData(p,ae.previousComments),n({title:"Failed to delete comment",description:A.message||"Unable to delete your comment. Please try again.",variant:"destructive"})}}),$=async A=>{A.preventDefault(),!(!o.trim()||S.isPending)&&S.mutate(o.trim())},Z=A=>{m(A.id),u(A.content)},_=()=>{m(null),u("")},R=async A=>{!h.trim()||D.isPending||D.mutate({commentId:A,content:h.trim()})},E=async A=>{confirm("Are you sure you want to delete this comment?")&&O.mutate(A)},te=A=>A.user.profileImageUrl||A.user.profilePicture||void 0,V=A=>(A.user.username||"User").substring(0,2).toUpperCase(),re=A=>{if(!A)return"Just now";try{return rn(new Date(A),{addSuffix:!0})}catch{return"Recently"}};return N?t.jsxs("div",{className:"w-full p-6 border border-white/10 bg-white/5 rounded-xl",children:[t.jsxs("div",{className:"flex items-center gap-2 text-white/60 mb-4",children:[t.jsx($t,{className:"w-5 h-5"}),t.jsx("h3",{className:"text-lg font-semibold",children:"Comments"})]}),t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})})]}):C?t.jsxs("div",{className:"w-full p-6 border border-white/10 bg-white/5 rounded-xl",children:[t.jsxs("div",{className:"flex items-center gap-2 text-white mb-4",children:[t.jsx($t,{className:"w-5 h-5"}),t.jsx("h3",{className:"text-lg font-semibold",children:"Comments"})]}),t.jsxs(Li,{variant:"destructive",className:"bg-red-500/10 border-red-500/50",children:[t.jsx(bn,{className:"h-4 w-4"}),t.jsx(Pi,{children:I?.message||"Failed to load comments. Please try refreshing the page."})]})]}):t.jsxs("div",{className:"w-full p-6 border border-white/10 bg-white/5 rounded-xl",children:[t.jsxs("div",{className:"flex items-center gap-2 text-white mb-4",children:[t.jsx($t,{className:"w-5 h-5"}),t.jsxs("h3",{className:"text-lg font-semibold",children:["Comments (",j.length,")"]})]}),r?t.jsx("form",{onSubmit:$,className:"mb-6",children:t.jsxs("div",{className:"relative",children:[t.jsx(Zs,{value:o,onChange:A=>c(A.target.value.slice(0,f)),placeholder:"Share your thoughts...",className:"min-h-[100px] bg-white/10 border-white/20 text-white placeholder:text-white/40 resize-none",disabled:S.isPending}),t.jsxs("div",{className:"flex items-center justify-between mt-2",children:[t.jsxs("span",{className:`text-sm ${o.length>f*.9?"text-red-400":"text-white/40"}`,children:[o.length," / ",f]}),t.jsx(v,{type:"submit",disabled:!o.trim()||S.isPending,className:"bg-blue-600 hover:bg-blue-700",children:S.isPending?t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Posting..."]}):t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsx(ac,{className:"w-4 h-4"}),"Post Comment"]})})]})]})}):t.jsx("div",{className:"mb-6 p-4 bg-white/5 border border-white/10 rounded-lg text-center text-white/60",children:"Please log in to leave a comment"}),t.jsx("div",{className:"space-y-4",children:j.length===0?t.jsxs("div",{className:"text-center py-12 text-white/40",children:[t.jsx($t,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),t.jsx("p",{className:"text-lg",children:"No comments yet"}),t.jsx("p",{className:"text-sm mt-1",children:"Be the first to share your thoughts!"})]}):j.map(A=>t.jsx("div",{className:"p-4 bg-white/5 border border-white/10 rounded-lg hover:bg-white/10 transition-colors",children:t.jsxs("div",{className:"flex gap-3",children:[t.jsxs(Ct,{className:"w-10 h-10",children:[t.jsx(Mt,{src:te(A)}),t.jsx(At,{className:"bg-blue-600 text-white",children:V(A)})]}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-white",children:A.user.username||"Anonymous"}),t.jsxs("span",{className:"text-sm text-white/40 ml-2",children:[re(A.createdAt),A.updatedAt!==A.createdAt&&" (edited)"]})]}),r&&(r.id===A.userId||a)&&t.jsx("div",{className:"flex gap-2",children:d!==A.id&&t.jsxs(t.Fragment,{children:[r.id===A.userId&&t.jsx(v,{size:"sm",variant:"ghost",onClick:()=>Z(A),className:"text-white/60 hover:text-white hover:bg-white/10",children:t.jsx(ec,{className:"w-4 h-4"})}),t.jsx(v,{size:"sm",variant:"ghost",onClick:()=>E(A.id),disabled:O.isPending,className:"text-red-400 hover:text-red-300 hover:bg-red-500/10",title:a&&r.id!==A.userId?"Moderate as staff":"Delete comment",children:t.jsx(nc,{className:"w-4 h-4"})})]})})]}),d===A.id?t.jsxs("div",{children:[t.jsx(Zs,{value:h,onChange:ue=>u(ue.target.value.slice(0,f)),className:"min-h-[80px] bg-white/10 border-white/20 text-white mb-2 resize-none",disabled:D.isPending}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:`text-sm ${h.length>f*.9?"text-red-400":"text-white/40"}`,children:[h.length," / ",f]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(v,{size:"sm",variant:"ghost",onClick:_,disabled:D.isPending,className:"text-white/60 hover:text-white",children:"Cancel"}),t.jsx(v,{size:"sm",onClick:()=>R(A.id),disabled:!h.trim()||D.isPending,className:"bg-blue-600 hover:bg-blue-700",children:D.isPending?"Saving...":"Save"})]})]})]}):t.jsx("p",{className:"text-white/80 whitespace-pre-wrap break-words",children:A.content})]})]})},A.id))})]})}function Mm(){return t.jsxs("div",{className:"bg-[--theme_color] text-white select-none min-h-screen",style:{"--theme_color":"#090000","--header":"#030303","--footer":"#030303","--button":"#09090b"},children:[t.jsx("header",{className:"grid sm:-mb-4 -mb-[4vw] sm:relative transition-all duration-300 sticky top-0 left-0 z-[161] border-white/5",children:t.jsx("div",{className:"grid sm:gap-10 gap-[4vw] w-full 2xl:max-w-[100rem] max-w-6xl mx-auto sm:p-4 p-[4vw]",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex sm:gap-4 gap-[4vw] items-center",children:[t.jsx(P,{className:"w-11 h-11 rounded-full"}),t.jsx(P,{className:"sm:block hidden w-32 h-7"})]}),t.jsx(P,{className:"sm:hidden w-32 h-7"}),t.jsx(P,{className:"sm:w-32 w-11 h-11 rounded-full"})]})})}),t.jsx("div",{className:"grid sm:gap-10 gap-[4vw] w-full 2xl:max-w-[100rem] max-w-6xl mx-auto sm:p-4 p-[4vw]",children:t.jsx("div",{className:"flex w-full sm:gap-10 gap-[4vw] relative",children:t.jsx("div",{className:"grid sm:gap-10 gap-[4vw] w-full h-fit",children:t.jsxs("div",{className:"grid sm:gap-10 gap-[4vw]",children:[t.jsxs("div",{className:"flex lg:flex-row flex-col sm:gap-10 gap-[4vw]",children:[t.jsx("div",{className:"lg:block flex",children:t.jsx("div",{className:"grid border border-white/10 overflow-hidden rounded-xl sm:w-64 w-1/2",children:t.jsx(P,{className:"aspect-[0.75/1] rounded-none"})})}),t.jsxs("div",{className:"grid sm:gap-6 gap-[4vw] h-fit flex-1",children:[t.jsxs("div",{className:"grid sm:gap-4 gap-[4vw]",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx(P,{className:"h-12 sm:h-16 w-full"}),t.jsx(P,{className:"h-12 sm:h-16 w-3/4"})]}),t.jsxs("div",{className:"grid",children:[t.jsx(P,{className:"h-6 w-36 mb-2"}),t.jsx(P,{className:"h-5 w-48"})]}),t.jsxs("div",{className:"flex flex-wrap sm:gap-2 gap-[2vw]",children:[t.jsx(P,{className:"h-8 w-20 rounded-lg"}),t.jsx(P,{className:"h-8 w-24 rounded-lg"}),t.jsx(P,{className:"h-8 w-32 rounded-lg"}),t.jsx(P,{className:"h-8 w-20 rounded-lg"}),t.jsx(P,{className:"h-8 w-24 rounded-lg"})]})]}),t.jsx("div",{className:"grid",children:t.jsxs("div",{className:"space-y-2 p-4 bg-white/10 rounded-lg",children:[t.jsx(P,{className:"h-4 w-full"}),t.jsx(P,{className:"h-4 w-full"}),t.jsx(P,{className:"h-4 w-full"}),t.jsx(P,{className:"h-4 w-3/4"})]})}),t.jsx("div",{className:"flex sm:flex-row flex-col sm:mt-0 mt-2 sm:w-fit sm:gap-4 gap-[4vw]",children:t.jsxs("div",{className:"sm:flex grid grid-cols-2 sm:w-fit sm:gap-2 gap-[2vw]",children:[t.jsx(P,{className:"h-11 w-full sm:w-40 rounded-lg"}),t.jsx(P,{className:"h-11 w-full sm:w-32 rounded-lg"})]})})]})]}),t.jsxs("div",{className:"grid sm:gap-6 gap-[4vw]",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx(P,{className:"h-8 w-32"}),t.jsx(P,{className:"h-8 w-24 rounded-lg"})]}),t.jsx("div",{className:"space-y-2",children:[...Array(6)].map((e,s)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg border border-white/10",children:[t.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[t.jsx(P,{className:"w-10 h-10 rounded-lg"}),t.jsxs("div",{className:"space-y-1 flex-1",children:[t.jsx(P,{className:"h-5 w-32"}),t.jsx(P,{className:"h-4 w-24"})]})]}),t.jsx(P,{className:"h-8 w-8 rounded-full"})]},s))})]})]})})})}),t.jsx("div",{className:"fixed inset-0 -translate-x-full animate-[shimmer_2s_infinite] bg-gradient-to-r from-transparent via-white/5 to-transparent pointer-events-none"})]})}function Am(){const{id:e}=Ja(),{manga:s,isLoading:r,isError:a}=Ti(e),{chapters:n,isLoading:o,isError:c}=br(e),{progress:d}=Sm(e),[m,h]=l.useState(!1),[u,f]=l.useState(!1),[p,g]=l.useState(!1);if(r)return t.jsx(Mm,{});if(a||!s)return t.jsx("div",{className:"min-h-screen bg-[--theme_color] text-white select-none",style:{"--theme_color":"#0a0e1a","--header":"#0d1117","--footer":"#0d1117","--button":"#161b22"},children:t.jsx("div",{className:"grid sm:gap-12 gap-[5vw] w-full 2xl:max-w-[90rem] max-w-7xl mx-auto sm:p-6 p-[5vw]",children:t.jsxs("div",{className:"border border-slate-600/40 bg-slate-500/8 rounded-xl p-6 text-center",children:[t.jsx("h1",{className:"text-2xl font-semibold text-teal-400 mb-4",children:"Series Not Available"}),t.jsx("p",{className:"text-slate-400 mb-6",children:"This series is currently unavailable or may have been removed."}),t.jsx(Y,{href:"/",children:t.jsxs("div",{className:"flex w-fit justify-center items-center h-12 gap-3 bg-slate-500/8 hover:bg-slate-400/12 transition-all duration-200 ease-in-out cursor-pointer rounded-xl px-6 mx-auto",children:[t.jsx("img",{className:"w-6",src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik0xMC41IDE5LjVMMyAxMm0wIDBsNy41LTcuNU0zIDEyaDE4IiAvPjwvc3ZnPgo="}),t.jsx("span",{className:"text-white font-medium",children:"Return Home"})]})})]})})});const j=s.genres?Array.isArray(s.genres)?s.genres:JSON.parse(s.genres):[],N=j.join(", ");return t.jsxs("div",{className:"bg-[--theme_color] text-white select-none",style:{"--theme_color":"#0a0e1a","--header":"#0d1117","--footer":"#0d1117","--button":"#161b22"},children:[t.jsx(ur,{title:s.title,description:s.description||`Read ${s.title} - ${s.type} ${s.status} with ${n?.length||0} chapters`,keywords:`${s.title}, ${s.type}, ${s.status}, ${N}, read ${s.title} online, ${s.title} chapters`,image:s.coverImageUrl,type:"book",author:s.author||"Unknown",publishedTime:s.createdAt,modifiedTime:s.updatedAt}),t.jsx(Dd,{type:"CreativeWorkSeries",data:{name:s.title,description:s.description||`Read ${s.title} online`,image:s.coverImageUrl,author:{"@type":"Person",name:s.author||"Unknown"},genre:j,inLanguage:"en",datePublished:s.createdAt,dateModified:s.updatedAt,aggregateRating:s.rating?{"@type":"AggregateRating",ratingValue:s.rating,bestRating:"5",worstRating:"1"}:void 0,numberOfEpisodes:n?.length||0,publisher:{"@type":"Organization",name:"PanelVerse Platform"},workExample:{"@type":"Book",bookFormat:"GraphicNovel",inLanguage:"en"}}}),t.jsx("header",{id:"panel_header",className:"grid sm:-mb-4 -mb-[4vw] sm:relative transition-all duration-200 ease-in-out sticky top-0 left-0 z-[161] border-slate-700/30",children:t.jsx("div",{className:"grid sm:gap-12 gap-[5vw] w-full 2xl:max-w-[90rem] max-w-7xl mx-auto sm:p-6 p-[5vw]",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex sm:gap-5 gap-[4.5vw] items-center",children:[t.jsx(Y,{href:"/",className:"flex w-fit justify-center items-center h-12 aspect-square gap-3 bg-slate-500/8 hover:bg-slate-400/12 transition-all duration-200 ease-in-out cursor-pointer rounded-full",children:t.jsx("img",{className:"w-6",src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik0xMC41IDE5LjVMMyAxMm0wIDBsNy41LTcuNU0zIDEyaDE4IiAvPjwvc3ZnPgo="})}),t.jsx(Y,{href:"/",className:"sm:block hidden sm:text-xl text-[4.5vw] font-semibold",children:"PanelVerse"})]}),t.jsx(Y,{href:"/",className:"sm:hidden break-word text-[4.5vw] font-semibold sf-hidden",children:"PanelVerse"}),t.jsx("div",{className:"flex sm:gap-5 gap-[4.5vw]",children:t.jsxs("div",{className:"flex sm:pl-4 sm:w-fit w-11 justify-center items-center h-12 sm:px-5 gap-3 bg-slate-500/8 hover:bg-slate-400/12 transition-all duration-200 ease-in-out cursor-pointer rounded-full",children:[t.jsx("img",{className:"w-6 ml-0.5",src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik0yMSAyMWwtNS4xOTctNS4xOTdtMCAwQTcuNSA3LjUgMCAxMDUuMTk2IDUuMTk2YTcuNSA3LjUgMCAwMDEwLjYwNyAxMC42MDd6IiAvPjwvc3ZnPgo="}),t.jsx("div",{className:"sm:block hidden font-medium",children:"Find"})]})})]})})}),t.jsxs("div",{className:"grid sm:gap-12 gap-[5vw] w-full 2xl:max-w-[90rem] max-w-7xl mx-auto sm:p-6 p-[5vw]",children:[t.jsx("div",{className:"w-[calc(100%+2.5rem)] sm:opacity-50 absolute top-0 left-0 blur-[100rem] -ml-10 sm:aspect-[2/1] aspect-[0.5/1] bg-cover bg-center",style:{backgroundImage:s.coverImageUrl?`url(${s.coverImageUrl})`:"none"}}),t.jsx("div",{className:"flex w-full sm:gap-12 gap-[5vw] relative",children:t.jsx("div",{className:"grid sm:gap-12 gap-[5vw] w-full h-fit",children:t.jsxs("div",{className:"grid sm:gap-12 gap-[5vw]",children:[t.jsxs("div",{className:"flex lg:flex-row flex-col sm:gap-12 gap-[5vw]",children:[t.jsx("div",{className:"lg:block flex",children:t.jsx("div",{className:"grid border border-slate-600/40 overflow-hidden rounded-xl sm:w-64 w-1/2",children:t.jsx("div",{className:"bg-[image:--photoURL] aspect-[0.75/1] bg-cover bg-center bg-slate-500/8",style:{"--photoURL":s.coverImageUrl?`url(${s.coverImageUrl})`:"none"}})})}),t.jsxs("div",{className:"grid sm:gap-6 gap-[4vw] h-fit",children:[t.jsxs("div",{className:"grid sm:gap-5 gap-[4.5vw]",children:[t.jsx("h1",{className:"sm:text-5xl sm:leading-tight text-[9vw] leading-[1.1] font-semibold",children:s.title}),t.jsxs("div",{className:"grid",children:[t.jsx("div",{className:"text-base font-medium",children:"Other Names"}),t.jsx("div",{className:"flex flex-wrap gap-1 w-full mb-2",children:t.jsx("span",{className:"text-md leading-none text-slate-400",children:"No other names listed"})})]}),t.jsxs("div",{className:"flex flex-wrap sm:gap-3 gap-[2.5vw]",children:[t.jsx("div",{className:"leading-none bg-violet-600/75 border border-slate-700/30 h-9 px-3 flex justify-center items-center sm:gap-3 gap-[2.5vw] transition-all duration-200 ease-in-out cursor-pointer rounded-lg",title:"Status",children:t.jsx("span",{className:"capitalize",children:s.status})}),t.jsxs("div",{className:"leading-none h-9 px-3 flex justify-center items-center sm:gap-1.5 gap-[1.5vw] bg-slate-500/8 hover:bg-slate-400/12 transition-all duration-200 ease-in-out cursor-pointer rounded-lg",title:"Series Type",children:[t.jsx("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgNjQgNjQiPjxjaXJjbGUgY3g9IjMyIiBjeT0iMzIiIHI9IjMwIiBmaWxsPSIjZjVmNWY1Ii8+PHBhdGggZmlsbD0iI2VkNGM1YyIgZD0iTTIzLjQgMzMuN2MyLjggMS45IDYuNyAxLjEgOC42LTEuN3M1LjctMy42IDguNi0xLjdjMi43IDEuOCAzLjUgNS4zIDIgOGMzLjMtNS42IDEuOC0xMi45LTMuOC0xNi42Yy01LjctMy44LTEzLjQtMi4zLTE3LjIgMy40Yy0uMS4yLS4yLjQtLjMuNWMtMS40IDIuOS0uNSA2LjMgMi4xIDguMSIvPjxwYXRoIGZpbGw9IiMwMDM0NzgiIGQ9Ik00Mi4zIDM4LjljLjEtLjIuMi0uNC4zLS41Yy0uMS4xLS4yLjMtLjMuNSIvPjxwYXRoIGZpbGw9IiM0MjhiYzEiIGQ9Ik00MC42IDMwLjNjLTIuOC0xLjktNi43LTEuMS04LjYgMS43cy01LjcgMy42LTguNiAxLjdjLTIuNy0xLjgtMy41LTUuMy0yLThjLTMuNCA1LjYtMS44IDEyLjkgMy44IDE2LjZjNS43IDMuOCAxMy40IDIuMyAxNy4yLTMuNGMuMS0uMi4yLS40LjMtLjVjMS40LTIuOS41LTYuMy0yLjEtOC4xIi8+PC9zdmc+",className:"w-5 -ml-1",alt:"type"}),t.jsx("span",{className:"capitalize",children:s.type})]}),t.jsxs("div",{className:"leading-none h-9 px-3 flex justify-center items-center sm:gap-1.5 gap-[1.5vw] bg-slate-500/8 hover:bg-slate-400/12 transition-all duration-200 ease-in-out cursor-pointer rounded-lg",title:"Last Updated At",children:[t.jsx("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik0xMiA2djZoNC41bTQuNSAwYTkgOSAwIDExLTE4IDAgOSA5IDAgMDExOCAweiIgLz48L3N2Zz4K",className:"w-5 -ml-1",alt:"created at"}),t.jsx("span",{children:s.updatedAt?new Date(s.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Unknown"})]}),s.genres&&(()=>{try{const I=JSON.parse(s.genres);return Array.isArray(I)?I.map((C,S)=>t.jsx("a",{href:"#",className:"leading-none h-9 px-3 flex justify-center items-center sm:gap-1.5 gap-[1.5vw] bg-slate-500/8 hover:bg-slate-400/12 transition-all duration-200 ease-in-out cursor-pointer rounded-lg",title:C,children:t.jsx("span",{className:"capitalize",children:C})},S)):null}catch{return null}})()]})]}),t.jsxs("div",{className:"grid",children:[t.jsx("div",{id:"description_content",className:`${m?"h-auto":"sm:h-[6rem] h-[30vw]"} container overflow-hidden`,style:{maxWidth:"100%"},children:t.jsx("p",{style:{whiteSpace:"pre-wrap"},className:"p-4 bg-slate-500/8 rounded-lg",children:s.description||"Description not provided."})}),t.jsx("div",{id:"description_button_head",className:"flex justify-center items-center -mt-7 relative",children:t.jsxs("div",{id:"description_button",className:"leading-none h-9 px-3 flex w-fit justify-center items-center sm:gap-1.5 gap-[1.5vw] backdrop-blur-3xl bg-slate-500/8 hover:bg-slate-400/12 transition-all duration-200 ease-in-out cursor-pointer rounded-lg",onClick:()=>h(!m),children:[t.jsx("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik0xOS41IDguMjVsLTcuNSA3LjUtNy41LTcuNSIgLz48L3N2Zz4K",className:"w-5 -ml-1",alt:"Expand"}),t.jsx("span",{children:m?"Show Less":"Read More"})]})}),t.jsx("style",{children:".container{-webkit-mask-image:linear-gradient(to bottom,black -150%,transparent 100%);mask-image:linear-gradient(to bottom,black 0%,transparent 100%)}"})]}),t.jsxs("div",{className:"flex sm:flex-row flex-col sm:mt-0 mt-2 sm:w-fit sm:gap-5 gap-[4.5vw]",children:[t.jsxs("div",{className:"sm:flex grid grid-cols-2 sm:w-fit sm:gap-3 gap-[2.5vw]",children:[d&&d.chapterId?(()=>{const I=n.find(C=>C.id===d.chapterId);if(I)return t.jsx(Y,{href:`/manga/${e}/chapter/${I.chapterNumber}`,children:t.jsxs("div",{className:"flex justify-center items-center h-12 px-4 gap-3 bg-teal-600 hover:bg-teal-700 transition-all duration-200 ease-in-out rounded-lg cursor-pointer",children:[t.jsx("img",{className:"w-7 -mx-1",src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik01LjI1IDUuNjUzYzAtLjg1Ni45MTctMS4zOTggMS42NjctLjk4NmwxMS41NCA2LjM0OGExLjEyNSAxLjEyNSAwIDAxMCAxLjk3MWwtMTEuNTQgNi4zNDdhMS4xMjUgMS4xMjUgMCAwMS0xLjY2Ny0uOTg1VjUuNjUzeiIgLz48L3N2Zz4K",alt:"Continue Reading"}),t.jsxs("span",{className:"font-medium",children:["Continue Ch. ",I.chapterNumber]})]})})})():null,n.length>0?t.jsx(Y,{href:`/manga/${e}/chapter/${n.sort((I,C)=>{const S=Number(I.chapterNumber)||0,D=Number(C.chapterNumber)||0;return S-D})[0]?.chapterNumber}`,children:t.jsxs("div",{className:"flex justify-center items-center h-12 px-4 gap-3 bg-slate-500/8 hover:bg-slate-400/12 transition-all duration-200 ease-in-out rounded-lg cursor-pointer",children:[t.jsx("img",{className:"w-7 -mx-1",src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik01LjI1IDUuNjUzYzAtLjg1Ni45MTctMS4zOTggMS42NjctLjk4NmwxMS41NCA2LjM0OGExLjEyNSAxLjEyNSAwIDAxMCAxLjk3MWwtMTEuNTQgNi4zNDdhMS4xMjUgMS4xMjUgMCAwMS0xLjY2Ny0uOTg1VjUuNjUzeiIgLz48L3N2Zz4K",alt:"Start Reading"}),t.jsx("span",{className:"font-medium",children:d&&d.chapterId?"Restart":"Begin Reading"})]})}):t.jsxs("div",{className:"flex justify-center items-center h-12 px-4 gap-3 bg-slate-500/4 opacity-50 transition-all duration-200 ease-in-out rounded-lg cursor-not-allowed",children:[t.jsx("img",{className:"w-7 -mx-1",src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik01LjI1IDUuNjUzYzAtLjg1Ni45MTctMS4zOTggMS42NjctLjk4NmwxMS41NCA2LjM0OGExLjEyNSAxLjEyNSAwIDAxMCAxLjk3MWwtMTEuNTQgNi4zNDdhMS4xMjUgMS4xMjUgMCAwMS0xLjY2Ny0uOTg1VjUuNjUzeiIgLz48L3N2Zz4K",alt:"Start Reading"}),t.jsx("span",{className:"font-medium",children:"Begin Reading"})]}),n.length>0?t.jsx(Y,{href:`/manga/${e}/chapter/${n.sort((I,C)=>{const S=Number(I.chapterNumber)||0;return(Number(C.chapterNumber)||0)-S})[0]?.chapterNumber}`,children:t.jsxs("div",{className:"flex justify-center items-center h-12 px-4 gap-3 bg-slate-500/8 hover:bg-slate-400/12 transition-all duration-200 ease-in-out rounded-lg cursor-pointer",children:[t.jsx("img",{className:"w-7 -mx-1",src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik01LjI1IDUuNjUzYzAtLjg1Ni45MTctMS4zOTggMS42NjctLjk4NmwxMS41NCA2LjM0OGExLjEyNSAxLjEyNSAwIDAxMCAxLjk3MWwtMTEuNTQgNi4zNDdhMS4xMjUgMS4xMjUgMCAwMS0xLjY2Ny0uOTg1VjUuNjUzeiIgLz48L3N2Zz4K",alt:"New Chapter"}),t.jsx("span",{className:"font-medium",children:"Latest"})]})}):t.jsxs("div",{className:"flex justify-center items-center h-12 px-4 gap-3 bg-slate-500/4 opacity-50 transition-all duration-200 ease-in-out rounded-lg cursor-not-allowed",children:[t.jsx("img",{className:"w-7 -mx-1",src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik01LjI1IDUuNjUzYzAtLjg1Ni45MTctMS4zOTggMS42NjctLjk4NmwxMS41NCA2LjM0OGExLjEyNSAxLjEyNSAwIDAxMCAxLjk3MWwtMTEuNTQgNi4zNDdhMS4xMjUgMS4xMjUgMCAwMS0xLjY2Ny0uOTg1VjUuNjUzeiIgLz48L3N2Zz4K",alt:"New Chapter"}),t.jsx("span",{className:"font-medium",children:"New Chapter"})]})]}),t.jsx("div",{className:"sm:h-full h-1 sm:w-1 w-full bg-slate-400/12 rounded-full"}),t.jsxs("div",{className:"flex sm:gap-3 gap-[2.5vw]",children:[t.jsxs("div",{id:"bookmarkSeriesButton",className:"flex sm:w-fit sm:min-w-[15rem] w-full justify-center items-center h-12 px-4 gap-3 bg-slate-500/8 hover:bg-slate-400/12 transition-all duration-200 ease-in-out cursor-pointer rounded-lg",children:[t.jsx("img",{className:"w-7 -mx-1",src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik0xNy41OTMgMy4zMjJjMS4xLjEyOCAxLjkwNyAxLjA3NyAxLjkwNyAyLjE4NVYyMUwxMiAxNy4yNSA0LjUgMjFWNS41MDdjMC0xLjEwOC44MDYtMi4wNTcgMS45MDctMi4xODVhNDguNTA3IDQ4LjUwNyAwIDAxMTEuMTg2IDB6IiAvPjwvc3ZnPgo=",alt:"Add to Library"}),t.jsx("span",{className:"font-medium",children:"Bookmark Series"})]}),t.jsx("div",{className:"sm:w-fit w-1/3 opacity-50 flex justify-center items-center h-12 sm:px-4 gap-3 bg-slate-500/8 transition-all duration-200 ease-in-out rounded-lg",children:t.jsx("img",{className:"w-5",src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik0xNC44NTcgMTcuMDgyYTIzLjg0OCAyMy44NDggMCAwMDUuNDU0LTEuMzFBOC45NjcgOC45NjcgMCAwMTE4IDkuNzV2LS43VjlBNiA2IDAgMDA2IDl2Ljc1YTguOTY3IDguOTY3IDAgMDEtMi4zMTIgNi4wMjJjMS43MzMuNjQgMy41NiAxLjA4NSA1LjQ1NSAxLjMxbTUuNzE0IDBhMjQuMjU1IDI0LjI1NSAwIDAxLTUuNzE0IDBtNS43MTQgMGEzIDMgMCAxMS01LjcxNCAwIiAvPjwvc3ZnPgo=",alt:"bell icon"})})]})]})]})]}),t.jsxs("div",{className:"grid md:grid-cols-2 sm:gap-4 gap-2",children:[t.jsxs("div",{className:"sm:flex hidden justify-between bg-gradient-to-b from-white/10 to-transparent gap-6 p-4 rounded-t-2xl overflow-hidden z-[1] col-span-full md:-mb-4",children:[t.jsxs("div",{className:"flex gap-4 justify-center items-center",children:[t.jsx("div",{className:"h-full w-1 rounded-lg bg-slate-400/12"}),t.jsxs("div",{className:"grid",children:[t.jsx("div",{className:"font-medium truncate",children:"Share PanelVerse"}),t.jsx("div",{className:"text-sm truncate",children:"with others"})]})]}),t.jsx("div",{className:"flex items-center",children:t.jsxs("div",{className:"h-10 gap-2 px-6 bg-slate-500/8 hover:bg-slate-400/12 flex justify-center items-center rounded-full transition-all duration-200 ease-in-out cursor-pointer",children:[t.jsx("img",{alt:"sharethis sharing button",src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik03LjIxNyAxMC45MDdhMi4yNSAyLjI1IDAgMTAwIDIuMTg2bTAtMi4xODZjLjE4LjMyNC4yODMuNjk2LjI4MyAxLjA5M3MtLjEwMy43Ny0uMjgzIDEuMDkzbTAtMi4xODZsOS41NjYtNS4zMTRtLTkuNTY2IDcuNWw5LjU2NiA1LjMxNG0wIDBhMi4yNSAyLjI1IDAgMTAzLjkzNSAyLjE4NiAyLjI1IDIuMjUgMCAwMC0zLjkzNS0yLjE4NnptMC0xMi44MTRhMi4yNSAyLjI1IDAgMTAzLjkzMy0yLjE4NSAyLjI1IDIuMjUgMCAwMC0zLjkzMyAyLjE4NXoiIC8+PC9zdmc+Cg=="}),t.jsx("span",{children:"Share"})]})})]}),t.jsxs("div",{className:"flex justify-between gap-6 bg-slate-500/8 p-4 rounded-xl",children:[t.jsxs("div",{className:"flex gap-4 justify-center items-center",children:[t.jsx("div",{className:"w-fit h-full",children:t.jsx("div",{className:"h-full w-1 rounded-lg bg-slate-400/12"})}),t.jsxs("div",{className:"grid",children:[t.jsx("div",{className:"font-medium truncate",children:"Need Help?"}),t.jsx("div",{className:"text-sm truncate",children:"Contact support for assistance"})]})]}),t.jsxs("button",{className:"h-10 gap-2 px-6 bg-amber-500 hover:bg-amber-600 hover:bg-opacity-80 flex justify-center items-center rounded-full",children:[t.jsx("div",{className:"w-6",children:t.jsx("img",{className:"w-6",src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik0xMiA5djMuNzVtOS0uNzVhOSA5IDAgMTEtMTggMCA5IDkgMCAwMTE4IDB6bS05IDMuNzVoLjAwOHYuMDA4SDEydi0uMDA4eiIgLz48L3N2Zz4K"})}),t.jsx("div",{className:"font-medium",children:"Flag Issue"})]})]}),t.jsxs("div",{className:"flex justify-between gap-6 bg-slate-500/8 p-4 rounded-xl",children:[t.jsxs("div",{className:"flex gap-4 justify-center items-center",children:[t.jsx("div",{className:"h-full w-1 rounded-lg bg-slate-400/12"}),t.jsxs("div",{className:"grid",children:[t.jsx("div",{className:"font-medium truncate",children:"Connect With Us"}),t.jsx("div",{className:"text-sm truncate",children:"on social media"})]})]}),t.jsxs("a",{href:"#",target:"_blank",className:"h-10 gap-2 px-6 bg-[#7289da] hover:bg-opacity-80 flex justify-center items-center rounded-full",title:"Community",children:[t.jsx("div",{className:"w-6",children:t.jsx("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGZpbGw9IiNmZmZmZmYiIGQ9Ik0xOC45NTcgNS42NjhhLjA2LjA2IDAgMCAwLS4wMjYtLjAyNGExNi41IDE2LjUgMCAwIDAtNC4wNzEtMS4yNjJhLjA2LjA2IDAgMCAwLS4wNjUuMDMxYTExIDExIDAgMCAwLS41MDcgMS4wNDFhMTUuMiAxNS4yIDAgMCAwLTQuNTczIDBBMTEgMTEgMCAwIDAgOS4yIDQuNDEzYS4wNy4wNyAwIDAgMC0uMDY2LS4wMzFhMTYuNSAxNi41IDAgMCAwLTQuMDcgMS4yNjJhLjEuMSAwIDAgMC0uMDI3LjAyM2ExNi44NiAxNi44NiAwIDAgMC0yLjk1NCAxMS4zNzlhLjA3LjA3IDAgMCAwIC4wMjYuMDQ3QTE2LjYgMTYuNiAwIDAgMCA3LjEgMTkuNjE2YS4wNi4wNiAwIDAgMCAuMDctLjAyM2ExMiAxMiAwIDAgMCAxLjAzLTEuNjYxYS4wNjQuMDY0IDAgMCAwLS4wMjgtLjA4NWgtLjAwN0ExMSAxMSAwIDAgMSA2LjYgMTcuMWEuMDY0LjA2NCAwIDAgMS0uMDIzLS4wODhsLjAxNi0uMDE5cS4xNTktLjExNy4zMS0uMjQyYS4wNi4wNiAwIDAgMSAuMDY1LS4wMDlhMTEuODMgMTEuODMgMCAwIDAgMTAuMDUxIDBhLjA2LjA2IDAgMCAxIC4wNjUuMDA4cS4xNTIuMTI2LjMxMS4yNDNhLjA2NS4wNjUgMCAwIDEgLjAxMy4wOWwtLjAxOC4wMTdhMTAuMyAxMC4zIDAgMCAxLTEuNTYxLjc0MmEuMDY0LjA2NCAwIDAgMC0uMDM3LjA4M3YuMDA2YTEzIDEzIDAgMCAwIDEuMDIxIDEuNjZhLjA2LjA2IDAgMCAwIC4wNy4wMjRhMTYuNiAxNi42IDAgMCAwIDUtMi41MjNhLjA3LjA3IDAgMCAwIC4wMjYtLjA0NmExNi43NiAxNi43NiAwIDAgMC0yLjk1Mi0xMS4zNzhNOC42ODMgMTQuNzc1YTEuOTIgMS45MiAwIDAgMS0xLjgtMi4wMTVhMS45MSAxLjkxIDAgMCAxIDEuOC0yLjAxNWExLjkgMS45IDAgMCAxIDEuOCAyLjAxNWExLjkxIDEuOTEgMCAwIDEtMS44IDIuMDE1bTYuNjQ2IDBhMS45MiAxLjkyIDAgMCAxLTEuOC0yLjAxNWExLjkxIDEuOTEgMCAwIDEgMS44LTIuMDE1YTEuOSAxLjkgMCAwIDEgMS44IDIuMDE1YTEuOTA2IDEuOTA2IDAgMCAxLTEuOCAyLjAxNSIvPjwvc3ZnPg==",className:"w-6",alt:"community"})}),t.jsx("div",{className:"font-medium",children:"Community"})]})]})]}),t.jsx(Ud,{placement:"manga-page",className:"my-6"}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h2",{className:"sm:text-2xl text-[5.5vw] font-bold",children:[n.length," Chapter",n.length!==1?"s":""]}),t.jsx("div",{className:"cursor-pointer group",id:"sort_control",onClick:()=>f(!u),children:t.jsx("img",{className:`w-10 transition-all duration-200 ease-in-out ${u?"rotate-180":""}`,src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgMTYgMTYiPjxnIGZpbGw9IndoaXRlIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMS4zNiA3LjA5OGMtMS4xMzcgMC0xLjcwOC0uNjU3LTEuNzYyLTEuMjc4aDEuMDA0Yy4wNTguMjIzLjM0My40NS43NzMuNDVjLjgyNCAwIDEuMTY0LS44MjkgMS4xMzMtMS44NTZoLS4wNTljLS4xNDguMzktLjU3Ljc0Mi0xLjI2MS43NDJjLS45MSAwLTEuNzItLjYxMy0xLjcyLTEuNzU4YzAtMS4xNDguODQ4LTEuODM2IDEuOTczLTEuODM2YzEuMDkgMCAyLjA2My42MzcgMi4wNjMgMi42ODhjMCAxLjg2Ny0uNzIzIDIuODQ4LTIuMTQ1IDIuODQ4em0uMDYyLTIuNzM1Yy41MDQgMCAuOTMzLS4zMzYuOTMzLS45NzJjMC0uNjMzLS4zOTgtMS4wMDgtLjk0LTEuMDA4Yy0uNTIgMC0uOTI3LjM3NS0uOTI3IDFjMCAuNjQuNDE4Ljk4LjkzNC45OCIvPjxwYXRoIGQ9Ik0xMi40MzggOC42NjhWMTRIMTEuMzlWOS42ODRoLS4wNTFsLTEuMjExLjg1OXYtLjk2OWwxLjI2Mi0uOTA2aDEuMDQ2ek00LjUgMi41YS41LjUgMCAwIDAtMSAwdjkuNzkzbC0xLjE0Ni0xLjE0N2EuNS41IDAgMCAwLS43MDguNzA4bDIgMS45OTlsLjAwNy4wMDdhLjQ5Ny40OTcgMCAwIDAgLjctLjAwNmwyLTJhLjUuNSAwIDAgMC0uNzA3LS43MDhMNC41IDEyLjI5M3oiLz48L2c+PC9zdmc+",alt:""})})]}),t.jsxs("div",{className:"grid relative overflow-hidden",children:[t.jsxs("div",{id:"chapters_panel",className:"grid containerz overflow-hidden",children:[t.jsx("div",{id:"chapters",className:"grid lg:grid-cols-3 sm:grid-cols-2 grid-cols-1 sm:gap-4 gap-[3vw]",children:o?t.jsx("div",{className:"flex items-center justify-center py-8 col-span-full",children:t.jsx("div",{className:"animate-spin rounded-full h-9 w-8 border-b-2 border-blue-500"})}):c?t.jsx("div",{className:"border border-slate-600/40 bg-slate-500/8 rounded-xl p-6 text-center col-span-full",children:t.jsx("p",{className:"text-gray-400",children:"Failed to load chapters. Please try again later."})}):n.length===0?t.jsx("div",{className:"border border-slate-600/40 bg-slate-500/8 rounded-xl p-6 text-center col-span-full",children:t.jsx("p",{className:"text-gray-400",children:"No chapters available yet."})}):(()=>{const I=[...n].sort((S,D)=>{const O=Number(S.chapterNumber)||0,$=Number(D.chapterNumber)||0;return u?O-$:$-O});return(p?I:I.slice(0,12)).map(S=>t.jsx(Y,{href:`/manga/${e}/chapter/${S.chapterNumber}`,children:t.jsx("div",{className:"group cursor-pointer relative overflow-hidden flex items-center justify-between sm:gap-5 gap-[4.5vw] hover:bg-slate-400/12 bg-slate-500/8 rounded-xl sm:p-2 p-[2vw] transition-all duration-200 ease-in-out",children:t.jsxs("div",{className:"flex items-center sm:gap-5 gap-[4.5vw]",children:[t.jsx("div",{className:"border inline-table border-slate-600/40 bg-slate-500/8 overflow-hidden rounded-xl relative",children:t.jsx("div",{className:"aspect-[2/1.5] w-28 bg-slate-500/8 bg-cover bg-center rounded-lg",style:{backgroundImage:s.coverImageUrl?`url(${s.coverImageUrl})`:"none"}})}),t.jsxs("div",{className:"grid h-fit",children:[t.jsx("span",{className:"flex gap-1 justify-start items-center overflow-hidden",children:t.jsxs("span",{className:"text-sm truncate",children:["Chapter ",S.chapterNumber,S.title&&t.jsxs("span",{className:"text-xs text-white/70 ml-2",children:["- ",S.title]})]})}),t.jsx("div",{className:"flex items-start flex-col justify-start gap-1.5",children:t.jsx("div",{className:"text-xs text-white/50 w-fit",children:new Date(S.createdAt||Date.now()).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})})]})]})})},S.id))})()}),!o&&!c&&n.length>12&&t.jsx("div",{className:"flex justify-center mt-6",children:t.jsxs("button",{onClick:()=>g(!p),className:"flex justify-center items-center h-12 px-6 gap-3 bg-slate-500/8 hover:bg-slate-400/12 transition-all duration-200 ease-in-out rounded-lg cursor-pointer",children:[t.jsx("span",{className:"font-medium",children:p?"Show Less":`View All ${n.length} Chapters`}),t.jsx("img",{className:`w-4 transition-transform ${p?"rotate-180":""}`,src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik0xOS41IDguMjVsLTcuNSA3LjUtNy41LTcuNSIgLz48L3N2Zz4K",alt:"Expand/Collapse"})]})})]}),t.jsx("div",{className:"mt-8",children:t.jsx(Ei,{seriesId:e})})]})]})})})]})]})}var Ri=["PageUp","PageDown"],zi=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Oi={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},vt="Slider",[Ys,km,Dm]=Ro(vt),[Ui]=os(vt,[Dm]),[Tm,ps]=Ui(vt),Fi=l.forwardRef((e,s)=>{const{name:r,min:a=0,max:n=100,step:o=1,orientation:c="horizontal",disabled:d=!1,minStepsBetweenThumbs:m=0,defaultValue:h=[a],value:u,onValueChange:f=()=>{},onValueCommit:p=()=>{},inverted:g=!1,form:j,...N}=e,I=l.useRef(new Set),C=l.useRef(0),D=c==="horizontal"?Lm:Pm,[O=[],$]=Wa({prop:u,defaultProp:h,onChange:V=>{[...I.current][C.current]?.focus(),f(V)}}),Z=l.useRef(O);function _(V){const re=Um(O,V);te(V,re)}function R(V){te(V,C.current)}function E(){const V=Z.current[C.current];O[C.current]!==V&&p(O)}function te(V,re,{commit:A}={commit:!1}){const ue=$m(o),ae=Bm(Math.round((V-a)/o)*o+a,ue),ge=Ga(ae,[a,n]);$((Ce=[])=>{const Me=zm(Ce,ge,re);if(qm(Me,m*o)){C.current=Me.indexOf(ge);const Se=String(Me)!==String(Ce);return Se&&A&&p(Me),Se?Me:Ce}else return Ce})}return t.jsx(Tm,{scope:e.__scopeSlider,name:r,disabled:d,min:a,max:n,valueIndexToChangeRef:C,thumbs:I.current,values:O,orientation:c,form:j,children:t.jsx(Ys.Provider,{scope:e.__scopeSlider,children:t.jsx(Ys.Slot,{scope:e.__scopeSlider,children:t.jsx(D,{"aria-disabled":d,"data-disabled":d?"":void 0,...N,ref:s,onPointerDown:Ie(N.onPointerDown,()=>{d||(Z.current=O)}),min:a,max:n,inverted:g,onSlideStart:d?void 0:_,onSlideMove:d?void 0:R,onSlideEnd:d?void 0:E,onHomeKeyDown:()=>!d&&te(a,0,{commit:!0}),onEndKeyDown:()=>!d&&te(n,O.length-1,{commit:!0}),onStepKeyDown:({event:V,direction:re})=>{if(!d){const ae=Ri.includes(V.key)||V.shiftKey&&zi.includes(V.key)?10:1,ge=C.current,Ce=O[ge],Me=o*ae*re;te(Ce+Me,ge,{commit:!0})}}})})})})});Fi.displayName=vt;var[Qi,qi]=Ui(vt,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Lm=l.forwardRef((e,s)=>{const{min:r,max:a,dir:n,inverted:o,onSlideStart:c,onSlideMove:d,onSlideEnd:m,onStepKeyDown:h,...u}=e,[f,p]=l.useState(null),g=Ue(s,D=>p(D)),j=l.useRef(void 0),N=zo(n),I=N==="ltr",C=I&&!o||!I&&o;function S(D){const O=j.current||f.getBoundingClientRect(),$=[0,O.width],_=vr($,C?[r,a]:[a,r]);return j.current=O,_(D-O.left)}return t.jsx(Qi,{scope:e.__scopeSlider,startEdge:C?"left":"right",endEdge:C?"right":"left",direction:C?1:-1,size:"width",children:t.jsx($i,{dir:N,"data-orientation":"horizontal",...u,ref:g,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:D=>{const O=S(D.clientX);c?.(O)},onSlideMove:D=>{const O=S(D.clientX);d?.(O)},onSlideEnd:()=>{j.current=void 0,m?.()},onStepKeyDown:D=>{const $=Oi[C?"from-left":"from-right"].includes(D.key);h?.({event:D,direction:$?-1:1})}})})}),Pm=l.forwardRef((e,s)=>{const{min:r,max:a,inverted:n,onSlideStart:o,onSlideMove:c,onSlideEnd:d,onStepKeyDown:m,...h}=e,u=l.useRef(null),f=Ue(s,u),p=l.useRef(void 0),g=!n;function j(N){const I=p.current||u.current.getBoundingClientRect(),C=[0,I.height],D=vr(C,g?[a,r]:[r,a]);return p.current=I,D(N-I.top)}return t.jsx(Qi,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:t.jsx($i,{"data-orientation":"vertical",...h,ref:f,style:{...h.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:N=>{const I=j(N.clientY);o?.(I)},onSlideMove:N=>{const I=j(N.clientY);c?.(I)},onSlideEnd:()=>{p.current=void 0,d?.()},onStepKeyDown:N=>{const C=Oi[g?"from-bottom":"from-top"].includes(N.key);m?.({event:N,direction:C?-1:1})}})})}),$i=l.forwardRef((e,s)=>{const{__scopeSlider:r,onSlideStart:a,onSlideMove:n,onSlideEnd:o,onHomeKeyDown:c,onEndKeyDown:d,onStepKeyDown:m,...h}=e,u=ps(vt,r);return t.jsx(_e.span,{...h,ref:s,onKeyDown:Ie(e.onKeyDown,f=>{f.key==="Home"?(c(f),f.preventDefault()):f.key==="End"?(d(f),f.preventDefault()):Ri.concat(zi).includes(f.key)&&(m(f),f.preventDefault())}),onPointerDown:Ie(e.onPointerDown,f=>{const p=f.target;p.setPointerCapture(f.pointerId),f.preventDefault(),u.thumbs.has(p)?p.focus():a(f)}),onPointerMove:Ie(e.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&n(f)}),onPointerUp:Ie(e.onPointerUp,f=>{const p=f.target;p.hasPointerCapture(f.pointerId)&&(p.releasePointerCapture(f.pointerId),o(f))})})}),Bi="SliderTrack",Vi=l.forwardRef((e,s)=>{const{__scopeSlider:r,...a}=e,n=ps(Bi,r);return t.jsx(_e.span,{"data-disabled":n.disabled?"":void 0,"data-orientation":n.orientation,...a,ref:s})});Vi.displayName=Bi;var Xs="SliderRange",Hi=l.forwardRef((e,s)=>{const{__scopeSlider:r,...a}=e,n=ps(Xs,r),o=qi(Xs,r),c=l.useRef(null),d=Ue(s,c),m=n.values.length,h=n.values.map(p=>Gi(p,n.min,n.max)),u=m>1?Math.min(...h):0,f=100-Math.max(...h);return t.jsx(_e.span,{"data-orientation":n.orientation,"data-disabled":n.disabled?"":void 0,...a,ref:d,style:{...e.style,[o.startEdge]:u+"%",[o.endEdge]:f+"%"}})});Hi.displayName=Xs;var Js="SliderThumb",Ki=l.forwardRef((e,s)=>{const r=km(e.__scopeSlider),[a,n]=l.useState(null),o=Ue(s,d=>n(d)),c=l.useMemo(()=>a?r().findIndex(d=>d.ref.current===a):-1,[r,a]);return t.jsx(Em,{...e,ref:o,index:c})}),Em=l.forwardRef((e,s)=>{const{__scopeSlider:r,index:a,name:n,...o}=e,c=ps(Js,r),d=qi(Js,r),[m,h]=l.useState(null),u=Ue(s,S=>h(S)),f=m?c.form||!!m.closest("form"):!0,p=Za(m),g=c.values[a],j=g===void 0?0:Gi(g,c.min,c.max),N=Om(a,c.values.length),I=p?.[d.size],C=I?Fm(I,j,d.direction):0;return l.useEffect(()=>{if(m)return c.thumbs.add(m),()=>{c.thumbs.delete(m)}},[m,c.thumbs]),t.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[d.startEdge]:`calc(${j}% + ${C}px)`},children:[t.jsx(Ys.ItemSlot,{scope:e.__scopeSlider,children:t.jsx(_e.span,{role:"slider","aria-label":e["aria-label"]||N,"aria-valuemin":c.min,"aria-valuenow":g,"aria-valuemax":c.max,"aria-orientation":c.orientation,"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,tabIndex:c.disabled?void 0:0,...o,ref:u,style:g===void 0?{display:"none"}:e.style,onFocus:Ie(e.onFocus,()=>{c.valueIndexToChangeRef.current=a})})}),f&&t.jsx(Wi,{name:n??(c.name?c.name+(c.values.length>1?"[]":""):void 0),form:c.form,value:g},a)]})});Ki.displayName=Js;var Rm="RadioBubbleInput",Wi=l.forwardRef(({__scopeSlider:e,value:s,...r},a)=>{const n=l.useRef(null),o=Ue(n,a),c=Ya(s);return l.useEffect(()=>{const d=n.current;if(!d)return;const m=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(m,"value").set;if(c!==s&&u){const f=new Event("input",{bubbles:!0});u.call(d,s),d.dispatchEvent(f)}},[c,s]),t.jsx(_e.input,{style:{display:"none"},...r,ref:o,defaultValue:s})});Wi.displayName=Rm;function zm(e=[],s,r){const a=[...e];return a[r]=s,a.sort((n,o)=>n-o)}function Gi(e,s,r){const o=100/(r-s)*(e-s);return Ga(o,[0,100])}function Om(e,s){return s>2?`Value ${e+1} of ${s}`:s===2?["Minimum","Maximum"][e]:void 0}function Um(e,s){if(e.length===1)return 0;const r=e.map(n=>Math.abs(n-s)),a=Math.min(...r);return r.indexOf(a)}function Fm(e,s,r){const a=e/2,o=vr([0,50],[0,a]);return(a-o(s)*r)*r}function Qm(e){return e.slice(0,-1).map((s,r)=>e[r+1]-s)}function qm(e,s){if(s>0){const r=Qm(e);return Math.min(...r)>=s}return!0}function vr(e,s){return r=>{if(e[0]===e[1]||s[0]===s[1])return s[0];const a=(s[1]-s[0])/(e[1]-e[0]);return s[0]+a*(r-e[0])}}function $m(e){return(String(e).split(".")[1]||"").length}function Bm(e,s){const r=Math.pow(10,s);return Math.round(e*r)/r}var Zi=Fi,Vm=Vi,Hm=Hi,Km=Ki;const er=l.forwardRef(({className:e,...s},r)=>t.jsxs(Zi,{ref:r,className:b("relative flex w-full touch-none select-none items-center",e),...s,children:[t.jsx(Vm,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:t.jsx(Hm,{className:"absolute h-full bg-primary"})}),t.jsx(Km,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));er.displayName=Zi.displayName;var xs="Switch",[Wm]=os(xs),[Gm,Zm]=Wm(xs),Yi=l.forwardRef((e,s)=>{const{__scopeSwitch:r,name:a,checked:n,defaultChecked:o,required:c,disabled:d,value:m="on",onCheckedChange:h,form:u,...f}=e,[p,g]=l.useState(null),j=Ue(s,D=>g(D)),N=l.useRef(!1),I=p?u||!!p.closest("form"):!0,[C,S]=Wa({prop:n,defaultProp:o??!1,onChange:h,caller:xs});return t.jsxs(Gm,{scope:r,checked:C,disabled:d,children:[t.jsx(_e.button,{type:"button",role:"switch","aria-checked":C,"aria-required":c,"data-state":to(C),"data-disabled":d?"":void 0,disabled:d,value:m,...f,ref:j,onClick:Ie(e.onClick,D=>{S(O=>!O),I&&(N.current=D.isPropagationStopped(),N.current||D.stopPropagation())})}),I&&t.jsx(eo,{control:p,bubbles:!N.current,name:a,value:m,checked:C,required:c,disabled:d,form:u,style:{transform:"translateX(-100%)"}})]})});Yi.displayName=xs;var Xi="SwitchThumb",Ji=l.forwardRef((e,s)=>{const{__scopeSwitch:r,...a}=e,n=Zm(Xi,r);return t.jsx(_e.span,{"data-state":to(n.checked),"data-disabled":n.disabled?"":void 0,...a,ref:s})});Ji.displayName=Xi;var Ym="SwitchBubbleInput",eo=l.forwardRef(({__scopeSwitch:e,control:s,checked:r,bubbles:a=!0,...n},o)=>{const c=l.useRef(null),d=Ue(c,o),m=Ya(r),h=Za(s);return l.useEffect(()=>{const u=c.current;if(!u)return;const f=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(f,"checked").set;if(m!==r&&g){const j=new Event("click",{bubbles:a});g.call(u,r),u.dispatchEvent(j)}},[m,r,a]),t.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...n,tabIndex:-1,ref:d,style:{...n.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});eo.displayName=Ym;function to(e){return e?"checked":"unchecked"}var so=Yi,Xm=Ji;const tr=l.forwardRef(({className:e,...s},r)=>t.jsx(so,{className:b("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...s,ref:r,children:t.jsx(Xm,{className:b("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));tr.displayName=so.displayName;function Jm(e,s){const r=Lt(),{chapters:a,isLoading:n,error:o,isError:c}=br(e),d=l.useMemo(()=>{if(!a.length)return{currentChapter:null,pages:[],nextChapter:null,previousChapter:null,chapterIndex:-1,totalChapters:0};const m=[...a].sort((j,N)=>{const I=parseFloat(j.chapterNumber)||0,C=parseFloat(N.chapterNumber)||0;return I-C});let h=m.findIndex(j=>j.chapterNumber===s);if(h===-1){const j=parseFloat(s);isNaN(j)||(h=m.findIndex(N=>parseFloat(N.chapterNumber)===j))}const u=h>=0?m[h]:null;let f=[];u?.pages&&Array.isArray(u.pages)&&(f=u.pages);const p=h>=0&&h<m.length-1?m[h+1]:null,g=h>0?m[h-1]:null;return{currentChapter:u,pages:f,nextChapter:p,previousChapter:g,chapterIndex:h,totalChapters:m.length}},[a,s]);return l.useEffect(()=>{const m=d.nextChapter?.id;if(m&&typeof window<"u"){const h=[`/api/chapters/${m}`];r.fetchQuery({queryKey:h,queryFn:Pt({on401:"throw"}),staleTime:300*1e3}).then(u=>{u?.pages&&Array.isArray(u.pages)&&u.pages.slice(0,3).forEach(f=>{try{const p=new Image;p.src=f}catch{}})}).catch(u=>{})}},[d.nextChapter?.id,r]),{...d,isLoading:n,error:o,isError:c}}function eh(e={speed:100,enabled:!1}){const[s,r]=l.useState(e),a=l.useRef(),n=l.useRef(0),o=l.useCallback(()=>{if(!s.enabled)return;const h=u=>{n.current===0&&(n.current=u);const f=u-n.current,p=s.speed*f/1e3;if(window.scrollBy(0,p),window.scrollY+window.innerHeight>=document.documentElement.scrollHeight){c();return}n.current=u,a.current=requestAnimationFrame(h)};a.current=requestAnimationFrame(h)},[s.enabled,s.speed]),c=l.useCallback(()=>{a.current&&(cancelAnimationFrame(a.current),a.current=void 0,n.current=0)},[]),d=l.useCallback(()=>{r(h=>{const u=!h.enabled;return u||c(),{...h,enabled:u}})},[c]),m=l.useCallback(h=>{r(u=>({...u,speed:h}))},[]);return l.useEffect(()=>(s.enabled?o():c(),()=>{c()}),[s.enabled,o,c]),{isAutoScrolling:s.enabled,speed:s.speed,toggleAutoScroll:d,setSpeed:m,stopAutoScroll:c}}function th(e){return we({queryKey:["/api/chapters",e,"access"],queryFn:async()=>{if(!e)throw new Error("Chapter ID is required");const s=await fetch(`/api/chapters/${e}/access`,{credentials:"include"});if(s.status===401)throw new Error("UNAUTHORIZED");if(!s.ok)throw new Error("Failed to check chapter access");return s.json()},enabled:!!e,retry:!1})}function sh(){const{toast:e}=lt();return Te({mutationFn:async s=>{const r=await fetch(`/api/chapters/${s}/unlock`,{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"include"});if(!r.ok){const a=await r.json();throw new Error(a.message||"Failed to unlock chapter")}return r.json()},onSuccess:(s,r)=>{se.invalidateQueries({queryKey:["/api/chapters",r,"access"]}),se.invalidateQueries({queryKey:["/api/currency/balance"]}),se.invalidateQueries({queryKey:["/api/currency/transactions"]}),e({title:"Chapter Unlocked",description:"You can now read this chapter!"})},onError:s=>{e({title:"Unlock Failed",description:s.message,variant:"destructive"})}})}function rh(){const{seriesId:e,chapterNumber:s}=Ja(),[,r]=Ne(),[a,n]=l.useState(0),[o,c]=l.useState(1),[d,m]=l.useState(!0),[h,u]=l.useState([]),[f,p]=l.useState(null),[g,j]=l.useState(()=>{const y=localStorage.getItem("manga-reading-mode");return y==="vertical"?(localStorage.setItem("manga-reading-mode","webtoon"),"webtoon"):["single","double","webtoon"].includes(y)?y:"webtoon"}),[N,I]=l.useState(!1),[C,S]=l.useState(!1),[D,O]=l.useState(!1),[$,Z]=l.useState(()=>localStorage.getItem("manga-fit-width")==="true"),[_,R]=l.useState(()=>localStorage.getItem("manga-dark-mode")!=="false"),[E,te]=l.useState(()=>localStorage.getItem("manga-reading-direction")||"ltr"),[V,re]=l.useState("chapters"),[A,ue]=l.useState(""),[ae,ge]=l.useState(!1),[Ce,Me]=l.useState(!1),[Se,wt]=l.useState(""),[gs,zt]=l.useState(!1),[Ae,wr]=l.useState(null),ys=l.useRef(!1),[Fh,bs]=l.useState(new Set([0,1,2,3])),[jr,Nr]=l.useState(!1),ro=l.useRef(null),Sr=l.useRef(null),Xe=l.useRef(null),vs=l.useRef(null),Ke=l.useRef(),{currentChapter:me,pages:L,nextChapter:he,previousChapter:ye,chapterIndex:Ir,totalChapters:_r,isLoading:ao,error:Cr,isError:no}=Jm(e,s),{manga:Mr}=Ti(e),{chapters:Ar}=br(e),{saveProgress:ws}=Im(),{data:jt,isLoading:io,error:kr}=th(me?.id),{mutate:oo,isPending:Dr}=sh(),{data:lo,isLoading:co}=ti(),We=eh({speed:parseInt(localStorage.getItem("manga-autoscroll-speed")||"100"),enabled:!1}),ct=l.useCallback(()=>`manga-read-position-${e}-${s}`,[e,s]),Tr=l.useCallback(y=>{if(L.length===0)return;const w=ct(),U={pageIndex:y,timestamp:Date.now(),totalPages:L.length};localStorage.setItem(w,JSON.stringify(U))},[ct,L.length]),Lr=l.useCallback(()=>{const y=ct(),w=localStorage.getItem(y);if(!w)return null;try{const U=JSON.parse(w);if(U.totalPages===L.length&&U.pageIndex>=0&&U.pageIndex<L.length)return U}catch{localStorage.removeItem(y)}return null},[ct,L.length]);l.useCallback(()=>{const y=ct();localStorage.removeItem(y)},[ct]),l.useEffect(()=>{if(c(1),m(!0),zt(!1),wr(null),ys.current=!1,L.length>0){u(new Array(L.length).fill(!0));const y=Lr();if(y&&y.pageIndex>0&&!ys.current){wr(y.pageIndex),zt(!0);const w=E==="rtl"?L.length-1:0;n(w)}else{const w=E==="rtl"?L.length-1:0;n(w)}g==="webtoon"&&E==="rtl"?(ge(!0),setTimeout(()=>{const w=document.querySelector(`[data-page-index="${L.length-1}"]`);w?w.scrollIntoView({behavior:"auto",block:"start"}):window.scrollTo(0,document.body.scrollHeight),setTimeout(()=>ge(!1),300)},100)):(ge(!1),g==="webtoon"?window.scrollTo(0,0):Sr.current&&Sr.current.scrollTo(0,0))}else u([]),n(0),ge(!1)},[s,e,L.length,E,g,Lr]),l.useEffect(()=>{const y=()=>{O(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",y),()=>document.removeEventListener("fullscreenchange",y)},[]),l.useEffect(()=>{if(Xe.current&&(Xe.current.disconnect(),Xe.current=null),g!=="webtoon"||L.length===0||ae)return;const y=G=>{if(ae)return;let fe=0,qe=0;G.forEach(Ut=>{if(Ut.isIntersecting&&Ut.intersectionRatio>fe){fe=Ut.intersectionRatio;const vo=Ut.target;qe=parseInt(vo.dataset.pageIndex||"0")}}),qe!==a&&fe>.5&&n(qe)},w=new IntersectionObserver(y,{threshold:[0,.25,.5,.75,1],rootMargin:"-20% 0px -20% 0px"});return Xe.current=w,document.querySelectorAll(".webtoon-page-image").forEach(G=>w.observe(G)),()=>{Xe.current&&(Xe.current.disconnect(),Xe.current=null)}},[g,L.length,a,ae,E]),l.useEffect(()=>{localStorage.setItem("manga-reading-mode",g)},[g]),l.useEffect(()=>{localStorage.setItem("manga-fit-width",$.toString())},[$]),l.useEffect(()=>{localStorage.setItem("manga-dark-mode",_.toString())},[_]),l.useEffect(()=>{localStorage.setItem("manga-reading-direction",E)},[E]),l.useEffect(()=>{const y=w=>{if(!(w.target instanceof HTMLInputElement||w.target instanceof HTMLTextAreaElement))switch(w.key){case"ArrowLeft":w.preventDefault(),Qe();break;case"ArrowRight":case" ":w.preventDefault(),Fe();break;case"ArrowUp":w.preventDefault(),Er();break;case"ArrowDown":w.preventDefault(),Pr();break;case"Escape":w.preventDefault(),r(`/manga/${e}`);break;case"f":w.preventDefault(),js();break}};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[a,L.length,he,ye]);const Ee=l.useCallback(()=>{m(!0),Ke.current&&clearTimeout(Ke.current),Ke.current=setTimeout(()=>{m(!1)},3e3)},[]);l.useEffect(()=>(Ee(),()=>{Ke.current&&clearTimeout(Ke.current)}),[a,Ee]);const Ot=l.useMemo(()=>{let y=null,w=null;const U=G=>{w=G,y&&clearTimeout(y),y=setTimeout(()=>{w&&ws(w),y=null,w=null},2e3)};return U.flush=()=>{y&&(clearTimeout(y),y=null),w&&(ws(w),w=null)},U},[ws]);l.useEffect(()=>{if(!e||!me||L.length===0)return;const y={seriesId:e,chapterId:me.id,lastReadPage:a};return Ot.flush(),Ot(y),()=>{Ot.flush()}},[e,me,a,L.length,Ot]);const Fe=l.useCallback(()=>{if(g==="webtoon"){const G=document.querySelectorAll(".webtoon-page-image"),fe=E==="rtl"?Math.max(a-1,0):Math.min(a+1,G.length-1);G[fe]?.scrollIntoView({behavior:"smooth",block:"start"});return}const y=g==="double"?2:1;let w,U;if(E==="rtl"){if(w=a-y,U=ye,w<0){U&&r(`/manga/${e}/chapter/${U.chapterNumber}`);return}}else if(w=a+y,U=he,w>=L.length){U&&r(`/manga/${e}/chapter/${U.chapterNumber}`);return}n(w),Ee()},[a,L.length,he,ye,e,r,Ee,g,E]),Qe=l.useCallback(()=>{if(g==="webtoon"){const G=document.querySelectorAll(".webtoon-page-image"),fe=E==="rtl"?Math.min(a+1,G.length-1):Math.max(a-1,0);G[fe]?.scrollIntoView({behavior:"smooth",block:"start"});return}const y=g==="double"?2:1;let w,U;if(E==="rtl"){if(w=a+y,U=he,w>=L.length){U&&r(`/manga/${e}/chapter/${U.chapterNumber}`);return}}else if(w=a-y,U=ye,w<0){U&&r(`/manga/${e}/chapter/${U.chapterNumber}`);return}n(w),Ee()},[a,ye,he,e,r,Ee,g,E]),Pr=l.useCallback(()=>{he&&r(`/manga/${e}/chapter/${he.chapterNumber}`)},[he,e,r]),Er=l.useCallback(()=>{ye&&r(`/manga/${e}/chapter/${ye.chapterNumber}`)},[ye,e,r]),Rr=l.useCallback(()=>{c(y=>Math.min(y+.25,3))},[]),zr=l.useCallback(()=>{c(y=>Math.max(y-.25,.5))},[]),uo=l.useCallback(()=>{c(1)},[]),mo=l.useCallback(y=>{const w=y.touches[0];p({x:w.clientX,y:w.clientY})},[]),ho=l.useCallback(y=>{if(!f)return;const w=y.changedTouches[0],U=f.x-w.clientX,G=Math.abs(f.y-w.clientY);Math.abs(U)>50&&G<100&&(U>0?Fe():Qe()),p(null)},[f,Fe,Qe]),ke=l.useCallback(y=>{u(w=>{const U=[...w];return U[y]=!1,U})},[]),js=l.useCallback(()=>{document.fullscreenElement?document.exitFullscreen().catch(console.error):document.documentElement.requestFullscreen().catch(console.error)},[]),fo=l.useCallback(y=>{const w=y.currentTarget.getBoundingClientRect(),G=(y.clientX-w.left)/w.width;G<.3?Qe():G>.7?Fe():Ee()},[Fe,Qe,Ee]),Ns=l.useCallback(y=>{const U=Math.max(1,Math.min(y,L.length))-1;if(g==="webtoon"){const fe=document.querySelectorAll(".webtoon-page-image")[U];fe&&(n(U),fe.scrollIntoView({behavior:"smooth",block:"start"}))}else if(g==="double"){let G=U;E==="rtl"?G=U-(U+1)%2:G=U-U%2,n(Math.max(0,Math.min(G,L.length-1)))}else n(U);Me(!1),wt(""),Ee()},[L.length,g,E,Ee]),po=l.useCallback(y=>{y.preventDefault();const w=parseInt(Se);isNaN(w)?Se.trim()&&Ns(1):Ns(w)},[Se,Ns]),xo=l.useCallback(y=>{y.key==="Escape"&&(Me(!1),wt(""))},[]),go=l.useCallback(()=>{if(Ae!==null){if(g==="webtoon")n(Ae),setTimeout(()=>{const w=document.querySelectorAll(".webtoon-page-image")[Ae];w&&w.scrollIntoView({behavior:"smooth",block:"start"})},100);else if(g==="double"){let y=Ae;E==="rtl"?y=Ae-(Ae+1)%2:y=Ae-Ae%2,n(Math.max(0,Math.min(y,L.length-1)))}else n(Ae);zt(!1)}},[Ae,g,E,L.length]),yo=l.useCallback(()=>{zt(!1),ys.current=!0},[]),bo=l.useCallback(()=>{if(!Se.trim())return!1;const y=parseInt(Se);return!isNaN(y)&&y>=1&&y<=L.length},[Se,L.length]);l.useCallback(y=>{const w=g==="webtoon"?5:g==="double"?2:1,U=Math.max(0,y-w),G=Math.min(L.length-1,y+w),fe=new Set;for(let qe=U;qe<=G;qe++)fe.add(qe);bs(fe)},[L.length,g]);const Or=l.useCallback(()=>{if(!he||jr)return;L.length-a<=3&&he&&Nr(!0)},[a,L.length,he,jr]),Ur=l.useCallback(y=>{const w=g==="webtoon"?5:3,U=[];if(E==="rtl")for(let G=1;G<=w;G++){const fe=y-G;fe>=0&&U.push(fe)}else for(let G=1;G<=w;G++){const fe=y+G;fe<L.length&&U.push(fe)}return U},[g,E,L.length]);if(l.useEffect(()=>{Or()},[a,Or]),l.useEffect(()=>{if(L.length===0||a<0||a===0||gs)return;const y=setTimeout(()=>{Tr(a)},1e3);return()=>clearTimeout(y)},[a,L.length,gs,Tr]),l.useEffect(()=>{if(g!=="webtoon"){const y=Ur(a),w=new Set;w.add(a),y.forEach(U=>w.add(U)),bs(w)}},[a,g,Ur]),l.useEffect(()=>{if(L.length!==0){if(g!=="webtoon"){let y=new Set;if(E==="rtl"){const w=L.length-1,U=Math.max(0,w-4);for(let G=U;G<=w;G++)y.add(G)}else{const w=Math.min(4,L.length-1);for(let U=0;U<=w;U++)y.add(U)}bs(y)}Nr(!1)}},[s,e,L.length,E,g]),l.useEffect(()=>()=>{vs.current&&(vs.current.disconnect(),vs.current=null)},[]),ao)return t.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:t.jsxs("div",{className:"text-white text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),t.jsx("p",{children:"Loading chapter..."})]})});if(io||co)return t.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:t.jsxs("div",{className:"text-white text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),t.jsx("p",{children:"Checking access..."})]})});if(kr){const y=kr.message==="UNAUTHORIZED";return t.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black flex items-center justify-center p-4",children:t.jsx(Ze,{className:"max-w-md w-full bg-gray-800/50 border-gray-700 backdrop-blur-md",children:t.jsxs("div",{className:"p-8 text-center space-y-6",children:[t.jsx("div",{className:"w-20 h-20 mx-auto bg-gradient-to-br from-yellow-500/20 to-orange-500/20 rounded-full flex items-center justify-center",children:t.jsx(Gt,{className:"w-10 h-10 text-yellow-500"})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:y?"Login Required":"Access Check Failed"}),t.jsx("p",{className:"text-gray-400",children:y?"Please log in to check if you have access to this chapter":"Unable to verify chapter access. Please try again."})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(v,{onClick:()=>r(y?"/login?returnTo="+encodeURIComponent(window.location.pathname):`/series/${e}`),className:"w-full bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90 text-white",size:"lg",children:y?"Log In":"Back to Series"}),t.jsxs(v,{variant:"outline",onClick:()=>r(`/series/${e}`),className:"w-full border-gray-600 text-gray-300 hover:bg-gray-800",children:[t.jsx(dt,{className:"w-4 h-4 mr-2"}),"Back to Series"]})]})]})})})}if(jt&&!jt.hasAccess){const y=lo?.balance||0,w=y>=jt.unlockCost;return t.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black flex items-center justify-center p-4",children:t.jsx(Ze,{className:"max-w-md w-full bg-gray-800/50 border-gray-700 backdrop-blur-md",children:t.jsxs("div",{className:"p-8 text-center space-y-6",children:[t.jsx("div",{className:"w-20 h-20 mx-auto bg-gradient-to-br from-primary/20 to-accent/20 rounded-full flex items-center justify-center",children:t.jsx(Gt,{className:"w-10 h-10 text-primary"})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:"Premium Chapter"}),t.jsxs("p",{className:"text-gray-400",children:["This chapter requires ",jt.unlockCost," coins to unlock"]})]}),t.jsx("div",{className:"p-4 bg-gray-900/50 rounded-lg border border-gray-700",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Your Balance:"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(mt,{className:"w-5 h-5 text-primary"}),t.jsx("span",{className:"text-xl font-bold text-white",children:y})]})]})}),t.jsxs("div",{className:"space-y-3",children:[w?t.jsx(v,{onClick:()=>me&&oo(me.id),disabled:Dr,className:"w-full bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90 text-white",size:"lg",children:Dr?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Unlocking..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Gt,{className:"w-5 h-5 mr-2"}),"Unlock for ",jt.unlockCost," Coins"]})}):t.jsxs(v,{onClick:()=>r("/shop"),className:"w-full bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90 text-white",size:"lg",children:[t.jsx(mt,{className:"w-5 h-5 mr-2"}),"Get More Coins"]}),t.jsxs(v,{variant:"outline",onClick:()=>r(`/series/${e}`),className:"w-full border-gray-600 text-gray-300 hover:bg-gray-800",children:[t.jsx(dt,{className:"w-4 h-4 mr-2"}),"Back to Series"]})]})]})})})}if(no||!me)return t.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Chapter Not Found"}),t.jsx("p",{className:"text-gray-400 mb-6",children:Cr instanceof Error?Cr.message:"The chapter you're looking for doesn't exist."}),t.jsx(Y,{href:`/manga/${e}`,children:t.jsxs(v,{variant:"outline",children:[t.jsx(dt,{className:"w-4 h-4 mr-2"}),"Back to Manga"]})})]})});if(me&&L.length===0)return t.jsxs("div",{className:"min-h-screen bg-white",children:[t.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-50",children:t.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Y,{href:`/manga/${e}`,children:t.jsxs(v,{variant:"ghost",size:"sm",className:"text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:[t.jsx(dt,{className:"w-4 h-4 mr-1"}),"Back"]})}),t.jsx(Y,{href:"/",children:t.jsx(v,{variant:"ghost",size:"sm",className:"text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:t.jsx(Bs,{className:"w-4 h-4"})})})]}),t.jsxs("div",{className:"flex gap-2",children:[ye&&t.jsx(Y,{href:`/manga/${e}/chapter/${ye.chapterNumber}`,children:t.jsxs(v,{variant:"outline",size:"sm",className:"text-xs",children:[t.jsx(Nt,{className:"w-3 h-3 mr-1"}),"Prev"]})}),he&&t.jsx(Y,{href:`/manga/${e}/chapter/${he.chapterNumber}`,children:t.jsxs(v,{size:"sm",className:"text-xs bg-indigo-600 hover:bg-indigo-700",children:["Next",t.jsx(Je,{className:"w-3 h-3 ml-1"})]})})]})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:Mr?.title||"Loading..."}),t.jsxs("h2",{className:"text-lg text-gray-600",children:["Chapter ",me.chapterNumber,me.title&&` - ${me.title}`]})]})]})}),t.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:t.jsx("div",{className:"text-center",children:t.jsx("div",{className:"max-w-2xl mx-auto",children:t.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-8 mb-8",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-6 bg-gray-100 rounded-full flex items-center justify-center",children:t.jsx(ra,{className:"w-8 h-8 text-gray-400"})}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Chapter Not Available"}),t.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:"This chapter hasn't been uploaded yet. Please check back later or explore other available chapters."}),t.jsx("div",{className:"bg-white border border-gray-100 rounded-md p-4 mb-6",children:t.jsxs("div",{className:"flex items-center justify-center gap-8 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Chapter:"}),t.jsxs("span",{className:"ml-2 font-medium text-gray-900",children:[Ir+1," of ",_r]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Status:"}),t.jsx("span",{className:"ml-2 text-orange-600 font-medium",children:"Coming Soon"})]})]})}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[t.jsx(Y,{href:`/manga/${e}`,children:t.jsxs(v,{variant:"outline",className:"w-full sm:w-auto",children:[t.jsx(dt,{className:"w-4 h-4 mr-2"}),"Back to Series"]})}),ye&&t.jsx(Y,{href:`/manga/${e}/chapter/${ye.chapterNumber}`,children:t.jsxs(v,{variant:"outline",className:"w-full sm:w-auto border-indigo-200 text-indigo-600 hover:bg-indigo-50",children:[t.jsx(Nt,{className:"w-4 h-4 mr-2"}),"Previous Chapter"]})}),he&&t.jsx(Y,{href:`/manga/${e}/chapter/${he.chapterNumber}`,children:t.jsxs(v,{className:"w-full sm:w-auto bg-indigo-600 hover:bg-indigo-700",children:["Next Chapter",t.jsx(Je,{className:"w-4 h-4 ml-2"})]})})]})]})})})}),t.jsx("div",{className:"border-t border-gray-200 bg-white",children:t.jsx("div",{className:"max-w-4xl mx-auto px-4 py-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[ye?t.jsx(Y,{href:`/manga/${e}/chapter/${ye.chapterNumber}`,children:t.jsxs(v,{variant:"outline",className:"flex items-center",children:[t.jsx(Nt,{className:"w-4 h-4 mr-2"}),"Previous Chapter"]})}):t.jsx("div",{}),t.jsxs("div",{className:"text-sm text-gray-500",children:["Chapter ",Ir+1," of ",_r]}),he?t.jsx(Y,{href:`/manga/${e}/chapter/${he.chapterNumber}`,children:t.jsxs(v,{className:"bg-indigo-600 hover:bg-indigo-700",children:["Next Chapter",t.jsx(Je,{className:"w-4 h-4 ml-2"})]})}):t.jsx("div",{})]})})})]});const Fr=L.length>0?(a+1)/L.length*100:0;return t.jsxs("div",{className:b("min-h-screen relative flex flex-col transition-colors duration-300",_?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"),children:[gs&&Ae!==null&&t.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-40 animate-in slide-in-from-top duration-300",children:t.jsx("div",{className:b("bg-white rounded-lg shadow-lg border p-4 mx-4 min-w-80",_&&"bg-gray-800 border-gray-700"),children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:b("font-semibold text-sm mb-1",_?"text-gray-100":"text-gray-900"),children:"Continue Reading"}),t.jsxs("p",{className:b("text-sm",_?"text-gray-300":"text-gray-600"),children:["You were on page ",Ae+1," of ",L.length]})]}),t.jsxs("div",{className:"flex space-x-2 ml-4",children:[t.jsx(v,{size:"sm",variant:"outline",onClick:yo,className:"text-xs",children:"Dismiss"}),t.jsx(v,{size:"sm",onClick:go,className:"text-xs",children:"Continue"})]})]})})}),t.jsxs("header",{className:b("sticky top-0 z-50 border-b backdrop-blur-sm transition-all duration-300",_?"bg-gray-900/95 border-gray-800":"bg-white/95 border-gray-200",d?"opacity-100":"opacity-90"),children:[t.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(v,{variant:"ghost",size:"sm",onClick:()=>S(!C),className:b(_?"text-gray-300 hover:text-white hover:bg-gray-800":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:t.jsx(wn,{className:"w-4 h-4"})}),t.jsx(Y,{href:`/manga/${e}`,children:t.jsxs(v,{variant:"ghost",size:"sm",className:b(_?"text-gray-300 hover:text-white hover:bg-gray-800":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[t.jsx(dt,{className:"w-4 h-4 mr-1"}),t.jsx("span",{className:"hidden sm:inline",children:"Back"})]})}),t.jsx(Y,{href:"/",children:t.jsx(v,{variant:"ghost",size:"sm",className:b(_?"text-gray-300 hover:text-white hover:bg-gray-800":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:t.jsx(Bs,{className:"w-4 h-4"})})})]}),t.jsxs("div",{className:"flex-1 text-center mx-4 min-w-0",children:[t.jsx("h1",{className:b("text-base font-semibold truncate",_?"text-white":"text-gray-900"),children:Mr?.title||"Loading..."}),t.jsxs("p",{className:b("text-xs truncate",_?"text-gray-400":"text-gray-500"),children:["Chapter ",me?.chapterNumber,me?.title&&` - ${me.title}`]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsxs("div",{className:"hidden sm:flex items-center gap-1",children:[t.jsxs(v,{variant:"ghost",size:"sm",onClick:Er,disabled:!ye,className:b("text-xs",_?"text-gray-300 hover:text-white hover:bg-gray-800":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[t.jsx(Nt,{className:"w-3 h-3"}),"Prev"]}),t.jsxs(v,{variant:"ghost",size:"sm",onClick:Pr,disabled:!he,className:b("text-xs",_?"text-gray-300 hover:text-white hover:bg-gray-800":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:["Next",t.jsx(Je,{className:"w-3 h-3"})]})]}),t.jsx(v,{variant:"ghost",size:"sm",onClick:()=>I(!N),className:b(_?"text-gray-300 hover:text-white hover:bg-gray-800":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:t.jsx(Vs,{className:"w-4 h-4"})})]})]}),L.length>0&&t.jsx("div",{className:"px-4 pb-2",children:t.jsx("div",{className:b("relative h-1 rounded-full overflow-hidden",_?"bg-gray-800":"bg-gray-200"),children:t.jsx("div",{className:b("h-full rounded-full transition-all duration-300","bg-gradient-to-r from-blue-500 to-purple-500"),style:{width:`${Fr}%`}})})})]}),t.jsxs("div",{className:"flex flex-1 relative overflow-hidden",children:[t.jsxs("div",{className:b("fixed left-0 z-[70] w-64 transform transition-transform duration-300","top-0","bottom-0",C?"translate-x-0":"-translate-x-full",_?"bg-gray-800 border-gray-700":"bg-white border-gray-200","border-r flex flex-col shadow-2xl"),children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-current border-opacity-20 flex-shrink-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(v,{variant:V==="chapters"?"default":"ghost",size:"sm",onClick:()=>re("chapters"),className:"text-xs",children:[t.jsx(Yl,{className:"w-3 h-3 mr-1"}),"Ch"]}),t.jsxs(v,{variant:V==="pages"?"default":"ghost",size:"sm",onClick:()=>re("pages"),className:"text-xs",children:[t.jsx(Zl,{className:"w-3 h-3 mr-1"}),"Pages"]})]}),t.jsx(v,{variant:"ghost",size:"sm",onClick:()=>S(!1),children:t.jsx(Dt,{className:"w-4 h-4"})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto",children:[V==="chapters"&&t.jsxs("div",{className:"p-2 space-y-3",children:[t.jsxs("div",{className:"relative",children:[t.jsx(rs,{className:b("absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4",_?"text-gray-400":"text-gray-500")}),t.jsx("input",{type:"text",placeholder:"Search chapters...",value:A,onChange:y=>ue(y.target.value),className:b("w-full pl-10 pr-4 py-2 text-sm rounded-md border transition-colors",_?"bg-gray-700 border-gray-600 text-gray-100 placeholder-gray-400 focus:border-blue-500 focus:ring-1 focus:ring-blue-500":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-500 focus:border-blue-500 focus:ring-1 focus:ring-blue-500","focus:outline-none")})]}),t.jsxs("div",{className:"space-y-1",children:[Ar?.filter(y=>A===""||y.chapterNumber.toLowerCase().includes(A.toLowerCase())||y.title?.toLowerCase().includes(A.toLowerCase())).map(y=>t.jsx(Y,{href:`/manga/${e}/chapter/${y.chapterNumber}`,children:t.jsxs(v,{variant:y.chapterNumber===me?.chapterNumber?"secondary":"ghost",className:b("w-full justify-start text-left h-auto py-3 px-3 transition-colors",y.chapterNumber===me?.chapterNumber&&"bg-blue-100 dark:bg-blue-900/30"),children:[t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsxs("div",{className:"text-sm font-medium truncate",children:["Chapter ",y.chapterNumber]}),y.title&&t.jsx("div",{className:b("text-xs truncate",_?"text-gray-400":"text-gray-500"),children:y.title})]}),y.chapterNumber===me?.chapterNumber&&t.jsx("div",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-blue-500"})]})},y.id)),A&&Ar?.filter(y=>y.chapterNumber.toLowerCase().includes(A.toLowerCase())||y.title?.toLowerCase().includes(A.toLowerCase())).length===0&&t.jsxs("div",{className:b("text-center py-8 text-sm",_?"text-gray-400":"text-gray-500"),children:['No chapters found for "',A,'"']})]})]}),V==="pages"&&L.length>0&&t.jsx("div",{className:"p-2",children:t.jsx("div",{className:"grid grid-cols-2 gap-2",children:L.map((y,w)=>t.jsxs("button",{onClick:()=>{n(w),g==="webtoon"&&document.querySelector(`[data-page-index="${w}"]`)?.scrollIntoView({behavior:"smooth",block:"start"}),S(!1)},className:b("relative aspect-[3/4] rounded-md overflow-hidden border-2 transition-all duration-200",w===a?"border-blue-500 shadow-lg":"border-gray-300 dark:border-gray-600 hover:border-gray-400","bg-gray-100 dark:bg-gray-700"),children:[t.jsx("img",{src:y,alt:`Page ${w+1}`,className:"w-full h-full object-cover",loading:"lazy"}),t.jsx("div",{className:b("absolute bottom-0 left-0 right-0 bg-black/70 text-white text-xs py-1 px-2 text-center",w===a&&"bg-blue-500"),children:w+1})]},w))})}),t.jsx("div",{className:"p-2 border-t border-current border-opacity-20 mt-auto",children:t.jsx(mr,{placement:"chapter-reader",type:"sidebar",className:"w-full",maxAds:1})})]})]}),C&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[60] lg:hidden",onClick:()=>S(!1)}),t.jsx("div",{className:"flex-1 relative overflow-hidden",onClick:()=>{m(!0),Ke.current&&clearTimeout(Ke.current),Ke.current=setTimeout(()=>{m(!1)},3e3)},onTouchStart:mo,onTouchEnd:ho,children:t.jsxs("div",{className:b("relative w-full h-full flex items-center justify-center",_?"bg-gray-900":"bg-gray-50"),children:[L.length>0&&t.jsxs(t.Fragment,{children:[g==="webtoon"&&t.jsx("div",{className:"w-full max-w-4xl mx-auto",children:L.map((y,w)=>t.jsxs("div",{className:"flex justify-center relative","data-page-index":w,children:[h[w]&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10",children:t.jsxs("div",{className:b("flex flex-col items-center justify-center p-8 rounded-lg",_?"bg-gray-800/80":"bg-white/80"),children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mb-2"}),t.jsxs("p",{className:b("text-sm font-medium",_?"text-gray-300":"text-gray-600"),children:["Loading Page ",w+1,"..."]})]})}),t.jsx("img",{src:y,alt:`Page ${w+1}`,className:b("webtoon-page-image max-w-full h-auto transition-opacity duration-300 block",h[w]?"opacity-30":"opacity-100",$?"w-full":"max-h-screen"),style:{transform:`scale(${o})`,transformOrigin:"center top"},onLoad:()=>ke(w),onError:()=>ke(w),draggable:!1,loading:"lazy"})]},w))}),g==="single"&&t.jsx("div",{className:"relative flex items-center justify-center w-full h-full",children:t.jsx("img",{ref:ro,src:L[a],alt:`Page ${a+1}`,className:b("max-w-full max-h-full object-contain transition-all duration-200",h[a]?"opacity-0":"opacity-100"),style:{transform:`scale(${o})`,width:$?"100%":"auto",height:$?"auto":"100%"},onLoad:()=>ke(a),onError:()=>ke(a),onClick:fo,draggable:!1})}),g==="double"&&t.jsxs("div",{className:"relative flex items-center justify-center w-full h-full gap-2",children:[E==="rtl"?a+1<L.length&&t.jsx("img",{src:L[a+1],alt:`Page ${a+2}`,className:b("max-h-full object-contain transition-all duration-200",h[a+1]?"opacity-0":"opacity-100"),style:{transform:`scale(${o})`,maxWidth:"50%"},onLoad:()=>ke(a+1),onError:()=>ke(a+1),onClick:Qe,draggable:!1}):t.jsx("img",{src:L[a],alt:`Page ${a+1}`,className:b("max-h-full object-contain transition-all duration-200",h[a]?"opacity-0":"opacity-100"),style:{transform:`scale(${o})`,maxWidth:"50%"},onLoad:()=>ke(a),onError:()=>ke(a),onClick:Qe,draggable:!1}),E==="rtl"?t.jsx("img",{src:L[a],alt:`Page ${a+1}`,className:b("max-h-full object-contain transition-all duration-200",h[a]?"opacity-0":"opacity-100"),style:{transform:`scale(${o})`,maxWidth:"50%"},onLoad:()=>ke(a),onError:()=>ke(a),onClick:Fe,draggable:!1}):a+1<L.length&&t.jsx("img",{src:L[a+1],alt:`Page ${a+2}`,className:b("max-h-full object-contain transition-all duration-200",h[a+1]?"opacity-0":"opacity-100"),style:{transform:`scale(${o})`,maxWidth:"50%"},onLoad:()=>ke(a+1),onError:()=>ke(a+1),onClick:Fe,draggable:!1})]})]}),L.length>0&&h.some(y=>y)&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}),t.jsxs("div",{className:"md:hidden absolute inset-0 pointer-events-none",children:[t.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1/3 pointer-events-auto",onClick:Qe}),t.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1/3 pointer-events-auto",onClick:Fe})]})]})})]}),L.length>0&&t.jsx("footer",{className:b("sticky bottom-0 z-50 border-t backdrop-blur-sm transition-all duration-300",_?"bg-gray-900/95 border-gray-800":"bg-white/95 border-gray-200",d?"opacity-100":"opacity-90"),children:t.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("span",{className:b("text-sm font-medium",_?"text-gray-300":"text-gray-600"),children:[a+1," / ",L.length]}),t.jsxs("div",{className:b("text-xs px-2 py-1 rounded",_?"bg-gray-800 text-gray-400":"bg-gray-100 text-gray-500"),children:[Math.round(Fr),"%"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(v,{variant:"outline",size:"sm",onClick:Qe,disabled:a===0&&!ye,className:b("text-xs",_?"border-gray-600 text-gray-300 hover:bg-gray-800":"border-gray-300 text-gray-600 hover:bg-gray-50"),children:t.jsx(Nt,{className:"w-3 h-3"})}),Ce?t.jsxs("form",{onSubmit:po,className:"flex items-center gap-1",children:[t.jsx(Re,{type:"number",min:1,max:L.length,value:Se,onChange:y=>wt(y.target.value),onKeyDown:xo,placeholder:`1-${L.length}`,className:b("w-16 h-8 text-xs text-center px-2",_?"bg-gray-800 border-gray-600 text-gray-300 placeholder:text-gray-500":"bg-white border-gray-300 text-gray-900 placeholder:text-gray-400",Se.trim()&&!bo()?_?"border-red-500":"border-red-400":""),autoFocus:!0,onBlur:y=>{y.relatedTarget?.hasAttribute("data-jump-go")||(Me(!1),wt(""))}}),t.jsx(v,{type:"submit","data-jump-go":"true",variant:"outline",size:"sm",disabled:!Se.trim(),className:b("h-8 px-2 text-xs",_?"border-gray-600 text-gray-300 hover:bg-gray-800":"border-gray-300 text-gray-600 hover:bg-gray-50",!Se.trim()&&"opacity-50"),children:"Go"})]}):t.jsxs(v,{variant:"ghost",size:"sm",onClick:()=>{Me(!0),wt((a+1).toString())},className:b("text-xs px-2 h-8",_?"text-gray-400 hover:text-gray-300 hover:bg-gray-800":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"),title:"Jump to page",children:[a+1," / ",L.length]}),t.jsx(v,{variant:"outline",size:"sm",onClick:Fe,disabled:a===L.length-1&&!he,className:b("text-xs",_?"border-gray-600 text-gray-300 hover:bg-gray-800":"border-gray-300 text-gray-600 hover:bg-gray-50"),children:t.jsx(Je,{className:"w-3 h-3"})})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"hidden sm:flex items-center gap-1",children:[t.jsx(v,{variant:"ghost",size:"sm",onClick:zr,disabled:o<=.5,className:b("text-xs w-8 h-8 p-0",_?"text-gray-300 hover:bg-gray-800":"text-gray-600 hover:bg-gray-100"),children:t.jsx(ma,{className:"w-3 h-3"})}),t.jsxs("span",{className:b("text-xs w-12 text-center",_?"text-gray-400":"text-gray-500"),children:[Math.round(o*100),"%"]}),t.jsx(v,{variant:"ghost",size:"sm",onClick:Rr,disabled:o>=3,className:b("text-xs w-8 h-8 p-0",_?"text-gray-300 hover:bg-gray-800":"text-gray-600 hover:bg-gray-100"),children:t.jsx(ua,{className:"w-3 h-3"})})]}),t.jsx(v,{variant:"ghost",size:"sm",onClick:js,className:b("text-xs w-8 h-8 p-0",_?"text-gray-300 hover:bg-gray-800":"text-gray-600 hover:bg-gray-100"),children:D?t.jsx(ca,{className:"w-3 h-3"}):t.jsx(la,{className:"w-3 h-3"})})]})]})}),N&&t.jsx("div",{className:"fixed inset-0 z-60 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:t.jsx(Ze,{className:b("w-96 max-w-[90vw] max-h-[80vh] overflow-y-auto",_?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:b("text-lg font-semibold",_?"text-white":"text-gray-900"),children:"Reading Settings"}),t.jsx(v,{variant:"ghost",size:"sm",onClick:()=>I(!1),className:b(_?"text-gray-400 hover:text-white hover:bg-gray-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:t.jsx(Dt,{className:"w-4 h-4"})})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx("label",{className:b("text-sm font-medium",_?"text-gray-200":"text-gray-700"),children:"Reading Mode"}),t.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{mode:"single",label:"Single"},{mode:"double",label:"Double"},{mode:"webtoon",label:"Webtoon"}].map(({mode:y,label:w})=>t.jsx(v,{variant:g===y?"default":"outline",size:"sm",onClick:()=>j(y),className:b("transition-colors duration-200",g===y?"bg-blue-600 text-white":_?"border-gray-600 text-gray-300 hover:bg-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-100"),children:w},y))})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("label",{className:b("text-sm font-medium",_?"text-gray-200":"text-gray-700"),children:"Dark Mode"}),t.jsx(tr,{checked:_,onCheckedChange:R})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("label",{className:b("text-sm font-medium",_?"text-gray-200":"text-gray-700"),children:"Fit to Width"}),t.jsx(tr,{checked:$,onCheckedChange:Z})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("label",{className:b("text-sm font-medium",_?"text-gray-200":"text-gray-700"),children:["Zoom: ",Math.round(o*100),"%"]}),t.jsx(er,{value:[o],onValueChange:y=>c(y[0]),min:.5,max:3,step:.1,className:"w-full"}),t.jsxs("div",{className:"flex gap-2 justify-center",children:[t.jsx(v,{size:"sm",variant:"outline",onClick:zr,children:t.jsx(ma,{className:"w-3 h-3"})}),t.jsx(v,{size:"sm",variant:"outline",onClick:uo,children:t.jsx(rc,{className:"w-3 h-3"})}),t.jsx(v,{size:"sm",variant:"outline",onClick:Rr,children:t.jsx(ua,{className:"w-3 h-3"})})]})]}),g==="webtoon"&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("label",{className:b("text-sm font-medium",_?"text-gray-200":"text-gray-700"),children:"Auto-Scroll"}),t.jsxs(v,{size:"sm",variant:We.isAutoScrolling?"default":"outline",onClick:We.toggleAutoScroll,className:b("transition-colors duration-200",We.isAutoScrolling?"bg-blue-600 text-white":_?"border-gray-600 text-gray-300 hover:bg-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-100"),children:[We.isAutoScrolling?t.jsx(Jl,{className:"w-3 h-3 mr-1"}):t.jsx(tc,{className:"w-3 h-3 mr-1"}),We.isAutoScrolling?"Pause":"Start"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:b("text-xs font-medium",_?"text-gray-400":"text-gray-600"),children:["Speed: ",We.speed,"px/s"]}),t.jsx(er,{value:[We.speed],onValueChange:y=>{We.setSpeed(y[0]),localStorage.setItem("manga-autoscroll-speed",y[0].toString())},min:50,max:300,step:10,className:"w-full"})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("label",{className:b("text-sm font-medium",_?"text-gray-200":"text-gray-700"),children:"Quick Actions"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs(v,{variant:"outline",size:"sm",onClick:js,className:b(_?"border-gray-600 text-gray-300 hover:bg-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-100"),children:[D?t.jsx(ca,{className:"w-3 h-3 mr-2"}):t.jsx(la,{className:"w-3 h-3 mr-2"}),D?"Exit":"Fullscreen"]}),t.jsxs(v,{variant:"outline",size:"sm",onClick:()=>n(0),className:b(_?"border-gray-600 text-gray-300 hover:bg-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-100"),children:[t.jsx(ra,{className:"w-3 h-3 mr-2"}),"First Page"]})]})]})]})]})})}),me&&g==="webtoon"&&t.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:t.jsx(Ei,{chapterId:me.id})})]})}function ah(){const[e,s]=l.useState([]),[r,a]=l.useState(!0),[n,o]=l.useState("all"),[c,d]=Ne();return l.useEffect(()=>{const h=new URLSearchParams(window.location.search).get("filter");h==="hot"||h==="popular"?o("hot"):h==="new"||h==="latest"?o("new"):h==="all"&&o("all")},[c]),l.useEffect(()=>{(async()=>{a(!0);try{let h="/api/series";n==="hot"?h="/api/sections/popular-today":n==="new"&&(h="/api/sections/latest-updates");const u=await fetch(h,{cache:"no-cache"});if(u.ok){const f=await u.json();s(f)}}catch{}finally{a(!1)}})()},[n]),t.jsxs("div",{className:"min-h-screen bg-background w-full overflow-x-hidden",children:[t.jsx(ur,{title:"Browse Manga",description:"Browse our extensive collection of manga and manhwa. Filter by genre, status, and popularity to find your next favorite series.",keywords:"browse manga, manga collection, manhwa library, manga genres"}),t.jsx(Et,{}),t.jsxs("div",{className:"max-w-none mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-foreground mb-6",children:"All Series"}),t.jsxs("div",{className:"flex items-center space-x-2 flex-wrap gap-2",children:[t.jsx(v,{variant:n==="all"?"default":"outline",size:"sm",className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${n==="all"?"bg-primary hover:bg-primary/90 text-primary-foreground":"bg-transparent border-border text-muted-foreground hover:text-foreground hover:border-primary"}`,onClick:()=>o("all"),children:" All"}),t.jsx(v,{variant:n==="hot"?"default":"outline",size:"sm",className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${n==="hot"?"bg-primary hover:bg-primary/90 text-primary-foreground":"bg-transparent border-border text-muted-foreground hover:text-foreground hover:border-primary"}`,onClick:()=>o("hot"),children:" Hot"}),t.jsx(v,{variant:n==="new"?"default":"outline",size:"sm",className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${n==="new"?"bg-primary hover:bg-primary/90 text-primary-foreground":"bg-transparent border-border text-muted-foreground hover:text-foreground hover:border-primary"}`,onClick:()=>o("new"),children:" New"})]})]}),t.jsx(ni,{placement:"browse",className:"mb-8"}),r&&t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-[4vw] sm:gap-6 w-full",children:[...Array(8)].map((m,h)=>t.jsx(si,{},h))}),!r&&e.length===0&&t.jsx("div",{className:"text-center py-12 bg-muted/30 rounded-lg",children:t.jsx("p",{className:"text-muted-foreground",children:"No series found."})}),!r&&e.length>0&&t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-[4vw] sm:gap-6 w-full",children:e.map(m=>t.jsx(nh,{item:m,navigate:d},m.id))})]})]})}function nh({item:e,navigate:s}){const[r,a]=l.useState(4),n=l.useRef(null),o=l.useRef(null),c=l.useRef(null);l.useEffect(()=>{const h=()=>{if(!n.current||!o.current||!c.current)return;const f=n.current.offsetHeight,p=c.current.offsetHeight,j=f-p-32,I=Math.floor(j/28),C=Math.max(1,Math.min(I,4));a(C)};h();const u=new ResizeObserver(h);return n.current&&u.observe(n.current),()=>{u.disconnect()}},[]);const d=e.latestChapters||[],m=d.length>0;return t.jsx("div",{ref:n,className:"group anime-card bg-gradient-to-br from-card/80 to-card/60 backdrop-blur-md rounded-2xl border border-border/40 p-0 transition-all duration-300 hover:border-primary/60 hover:from-card/90 hover:to-card/80 relative overflow-hidden hover:shadow-2xl hover:shadow-primary/20 hover:scale-[1.02]",style:{aspectRatio:"4.5 / 2.5"},"data-testid":`series-item-${e.id}`,children:t.jsxs("div",{className:"flex h-full",children:[t.jsx("div",{className:"relative cursor-pointer flex-shrink-0",onClick:()=>s(`/manga/${e.id}`),style:{width:"42%"},children:t.jsxs("div",{className:"relative w-full h-full overflow-hidden",children:[e.coverImageUrl?t.jsx("img",{src:e.coverImageUrl,alt:e.title,className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full bg-gradient-to-br from-muted/80 to-muted/60 flex items-center justify-center",children:t.jsx("span",{className:"text-muted-foreground text-xs font-medium",children:"No cover"})}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-transparent to-background/10"}),t.jsx("div",{className:"absolute top-2 left-2",children:t.jsx(ze,{className:"bg-gradient-to-r from-primary to-primary/80 text-primary-foreground text-[10px] px-2 py-1 rounded-full font-medium shadow-lg backdrop-blur-sm border border-primary/20",children:e.genres?.[0]||"Manhwa"})}),t.jsx("div",{className:"absolute bottom-2 left-2",children:t.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-full p-1.5 shadow-lg",children:t.jsx(yn,{className:"w-3 h-3 text-white",fill:"currentColor"})})})]})}),t.jsxs("div",{ref:o,className:"flex flex-col min-w-0 p-2 sm:p-3 lg:p-4",style:{width:"58%"},children:[t.jsx("div",{ref:c,className:"mb-2 sm:mb-3 flex-shrink-0",children:t.jsx("h3",{className:"text-foreground font-bold text-xs sm:text-sm lg:text-base line-clamp-2 mb-1 sm:mb-2 group-hover:text-primary transition-colors duration-300 leading-tight break-words",children:e.title})}),t.jsx("div",{className:"space-y-1 flex-1",children:m?d.slice(0,r).map((h,u)=>{const f=h.createdAt&&new Date(h.createdAt).getTime()>Date.now()-6048e5,p=h.createdAt?rn(new Date(h.createdAt),{addSuffix:!0}):"";return t.jsxs("div",{className:`group/chapter transition-all duration-300 cursor-pointer hover:shadow-md ${u===0?"bg-gradient-to-r from-primary/10 to-accent/10 border border-primary/30 hover:from-primary/20 hover:to-accent/20 hover:border-primary/50 relative overflow-hidden":u===1?"bg-card/40 border border-border/20 hover:bg-card/60 hover:border-border/40":"bg-card/30 border border-border/10 hover:bg-card/50 hover:border-border/30"} rounded-md px-2 py-1`,children:[u===0&&t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/5 to-transparent opacity-0 group-hover/chapter:opacity-100 transition-opacity duration-300"}),t.jsxs("div",{className:"flex items-center justify-between relative z-10 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-1.5 min-w-0 flex-1",children:[t.jsx("div",{className:"w-2.5 h-2.5 flex items-center justify-center flex-shrink-0",children:t.jsx("div",{className:"w-1.5 h-1.5 bg-foreground/40 rounded-full"})}),t.jsxs("span",{className:`font-medium truncate text-[11px] sm:text-xs ${u===0?"text-foreground":u===1?"text-foreground/90":"text-foreground/80"}`,children:["Chapter ",h.chapterNumber]}),f&&u===0&&t.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 text-white text-[8px] px-1 py-0.5 rounded-full font-medium shadow-sm hidden sm:inline-flex items-center",children:t.jsx(ts,{className:"w-2 h-2"})})]}),t.jsx("span",{className:"text-muted-foreground text-[9px] sm:text-[10px] font-medium flex-shrink-0 ml-1",children:p})]})]},h.id)}):t.jsx("div",{className:"text-muted-foreground text-xs text-center py-2",children:"No chapters yet"})})]})]})})}const ih=l.lazy(()=>ee(()=>import("./Settings-G7jRz-Es.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),oh=l.lazy(()=>ee(()=>import("./Library-D6PYPnje.js"),__vite__mapDeps([9,1,2,8]))),lh=l.lazy(()=>ee(()=>import("./History-frxILVgN.js"),__vite__mapDeps([10,1,2,8]))),ch=l.lazy(()=>ee(()=>import("./Privacy-CVraYpC5.js"),__vite__mapDeps([11,1,2,12,13,8]))),dh=l.lazy(()=>ee(()=>import("./DMCA-B-mIxIXP.js"),__vite__mapDeps([14,1,2,15,8]))),uh=l.lazy(()=>ee(()=>import("./Shop-DtrpKT-D.js"),__vite__mapDeps([16,1,2,17,18,4,19,6,20,21,22,8]))),mh=l.lazy(()=>ee(()=>import("./ReadingLists-DYjQVMw9.js"),__vite__mapDeps([23,1,2,4,3,24,25,26,13,8]))),hh=l.lazy(()=>ee(()=>import("./Admin-DjZnUjbR.js"),__vite__mapDeps([27,1,2,28,29,30,7,31,12,32,15,8]))),fh=l.lazy(()=>ee(()=>import("./UserManagement-DFFgiWln.js"),__vite__mapDeps([33,1,2,4,34,3,28,5,35,26,36,19,8]))),ph=l.lazy(()=>ee(()=>import("./SeriesManagement-C2_8-4NY.js"),__vite__mapDeps([37,1,2,3,4,34,32,13,18,38,39,40,35,26,41,36,24,8]))),xh=l.lazy(()=>ee(()=>import("./Analytics-DzFfxOWe.js"),__vite__mapDeps([42,1,2,43,29,44,28,30,45,8]))),gh=l.lazy(()=>ee(()=>import("./SystemSettings-CYwiSczy.js"),__vite__mapDeps([46,1,2,4,34,3,17,47,30,24,25,28,13,40,26,36,8]))),yh=l.lazy(()=>ee(()=>import("./CurrencyManagement-D8We7Z5n.js"),__vite__mapDeps([48,1,2,49,4,3,24,31,26,8]))),bh=l.lazy(()=>ee(()=>import("./ChapterAccessManagement-TXoavxl2.js"),__vite__mapDeps([50,1,2,51,4,3,39,38,31,8]))),vh=l.lazy(()=>ee(()=>import("./UserCurrencyManagement-kL618clY.js"),__vite__mapDeps([52,1,2,4,24,53,8]))),wh=l.lazy(()=>ee(()=>import("./AdminAds-BPMk4b4x.js"),__vite__mapDeps([54,1,2,3,4,34,51,17,41,13,7,43,45,30,24,47,29,38,44,35,25,28,31,26,15,8]))),jh=l.lazy(()=>ee(()=>import("./Subscriptions-__JSUxVO.js"),__vite__mapDeps([55,1,2,19,56,20,21,8]))),Nh=l.lazy(()=>ee(()=>import("./SubscriptionManage-DHkkEpnV.js"),__vite__mapDeps([57,1,2,34,19,35,8]))),Sh=l.lazy(()=>ee(()=>import("./FlashSales-Bkjtudr1.js"),__vite__mapDeps([58,1,2,18,20,59,22,8]))),Ih=l.lazy(()=>ee(()=>import("./BattlePass-CtYOsdML.js"),__vite__mapDeps([60,1,2,18,6,19,56,20,8]))),_h=l.lazy(()=>ee(()=>import("./AdminMonetization-BKYgFHLd.js"),__vite__mapDeps([61,1,2,17,3,4,49,43,31,19,20,56,24,26,44,28,15,32,29,53,8]))),Ch=l.lazy(()=>ee(()=>import("./DailyRewards-DsUorp15.js"),__vite__mapDeps([62,1,2,56,35,8]))),Mh=l.lazy(()=>ee(()=>import("./Achievements-xoAmBZTO.js"),__vite__mapDeps([63,1,2,18,6,8]))),Ah=l.lazy(()=>ee(()=>import("./Referrals-BNeWLJp-.js"),__vite__mapDeps([64,1,2,28,56,8]))),kh=l.lazy(()=>ee(()=>import("./Loyalty-QNeSddWR.js"),__vite__mapDeps([65,1,2,18,6,19,56,8]))),Dh=l.lazy(()=>ee(()=>import("./Wallet-4K7KAKrU.js"),__vite__mapDeps([66,1,2,17,22,45,31,56,8]))),Th=l.lazy(()=>ee(()=>import("./AdminFlashSales-dk7J7Ytd.js"),__vite__mapDeps([67,1,2,4,3,24,20,59,26,8]))),Lh=l.lazy(()=>ee(()=>import("./AdminSubscriptions-Docut9Wl.js"),__vite__mapDeps([68,1,2,4,3,19,24,26,8]))),X=()=>t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-background/95 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]"}),t.jsx("p",{className:"mt-4 text-sm text-muted-foreground",children:"Loading admin panel..."})]})});function Ph(){return t.jsx(le,{children:t.jsxs(Vo,{children:[t.jsx(H,{path:"/",component:Fd}),t.jsx(H,{path:"/browse",component:ah}),t.jsx(H,{path:"/manga/:seriesId/chapter/:chapterNumber",component:rh}),t.jsx(H,{path:"/manga/:id",component:Am}),t.jsx(H,{path:"/login",component:bm}),t.jsx(H,{path:"/signup",component:vm}),t.jsx(H,{path:"/verify-email",component:jm}),t.jsx(H,{path:"/library",children:t.jsx(l.Suspense,{fallback:t.jsx(X,{}),children:t.jsx(oh,{})})}),t.jsx(H,{path:"/history",children:t.jsx(l.Suspense,{fallback:t.jsx(X,{}),children:t.jsx(lh,{})})}),t.jsx(H,{path:"/reading-lists",children:t.jsx(l.Suspense,{fallback:t.jsx(X,{}),children:t.jsx(mh,{})})}),t.jsx(H,{path:"/settings",children:t.jsx(l.Suspense,{fallback:t.jsx(X,{}),children:t.jsx(ih,{})})}),t.jsx(H,{path:"/shop",children:t.jsx(l.Suspense,{fallback:t.jsx(X,{}),children:t.jsx(uh,{})})}),t.jsx(H,{path:"/privacy",children:t.jsx(l.Suspense,{fallback:t.jsx(X,{}),children:t.jsx(ch,{})})}),t.jsx(H,{path:"/dmca",children:t.jsx(l.Suspense,{fallback:t.jsx(X,{}),children:t.jsx(dh,{})})}),t.jsx(H,{path:"/admin",children:t.jsx(le,{children:t.jsx(l.Suspense,{fallback:t.jsx(X,{}),children:t.jsx(hh,{})})})}),t.jsx(H,{path:"/admin/users",children:t.jsx(le,{children:t.jsx(l.Suspense,{fallback:t.jsx(X,{}),children:t.jsx(fh,{})})})}),t.jsx(H,{path:"/admin/series",children:t.jsx(le,{children:t.jsx(l.Suspense,{fallback:t.jsx(X,{}),children:t.jsx(ph,{})})})}),t.jsx(H,{path:"/admin/analytics",children:t.jsx(le,{children:t.jsx(l.Suspense,{fallback:t.jsx(X,{}),children:t.jsx(xh,{})})})}),t.jsx(H,{path:"/admin/system-settings",children:t.jsx(le,{children:t.jsx(l.Suspense,{fallback:t.jsx(X,{}),children:t.jsx(gh,{})})})}),t.jsx(H,{path:"/admin/currency",children:t.jsx(le,{children:t.jsx(l.Suspense,{fallback:t.jsx(X,{}),children:t.jsx(yh,{})})})}),t.jsx(H,{path:"/admin/chapter-access",children:t.jsx(le,{children:t.jsx(l.Suspense,{fallback:t.jsx(X,{}),children:t.jsx(bh,{})})})}),t.jsx(H,{path:"/admin/user-currency",children:t.jsx(le,{children:t.jsx(l.Suspense,{fallback:t.jsx(X,{}),children:t.jsx(vh,{})})})}),t.jsx(H,{path:"/admin/ads",children:t.jsx(le,{children:t.jsx(l.Suspense,{fallback:t.jsx(X,{}),children:t.jsx(wh,{})})})}),t.jsx(H,{path:"/admin/monetization",children:t.jsx(le,{children:t.jsx(l.Suspense,{fallback:t.jsx(X,{}),children:t.jsx(_h,{})})})}),t.jsx(H,{path:"/admin/flash-sales",children:t.jsx(le,{children:t.jsx(l.Suspense,{fallback:t.jsx(X,{}),children:t.jsx(Th,{})})})}),t.jsx(H,{path:"/admin/subscriptions",children:t.jsx(le,{children:t.jsx(l.Suspense,{fallback:t.jsx(X,{}),children:t.jsx(Lh,{})})})}),t.jsx(H,{path:"/subscriptions",children:t.jsx(le,{children:t.jsx(l.Suspense,{fallback:t.jsx(X,{}),children:t.jsx(jh,{})})})}),t.jsx(H,{path:"/subscriptions/manage",children:t.jsx(le,{children:t.jsx(l.Suspense,{fallback:t.jsx(X,{}),children:t.jsx(Nh,{})})})}),t.jsx(H,{path:"/flash-sales",children:t.jsx(le,{children:t.jsx(l.Suspense,{fallback:t.jsx(X,{}),children:t.jsx(Sh,{})})})}),t.jsx(H,{path:"/battle-pass",children:t.jsx(le,{children:t.jsx(l.Suspense,{fallback:t.jsx(X,{}),children:t.jsx(Ih,{})})})}),t.jsx(H,{path:"/daily-rewards",children:t.jsx(le,{children:t.jsx(l.Suspense,{fallback:t.jsx(X,{}),children:t.jsx(Ch,{})})})}),t.jsx(H,{path:"/achievements",children:t.jsx(le,{children:t.jsx(l.Suspense,{fallback:t.jsx(X,{}),children:t.jsx(Mh,{})})})}),t.jsx(H,{path:"/referrals",children:t.jsx(le,{children:t.jsx(l.Suspense,{fallback:t.jsx(X,{}),children:t.jsx(Ah,{})})})}),t.jsx(H,{path:"/loyalty",children:t.jsx(le,{children:t.jsx(l.Suspense,{fallback:t.jsx(X,{}),children:t.jsx(kh,{})})})}),t.jsx(H,{path:"/wallet",children:t.jsx(le,{children:t.jsx(l.Suspense,{fallback:t.jsx(X,{}),children:t.jsx(Dh,{})})})}),t.jsx(H,{component:qc})]})})}function _a(){return t.jsx(Nl,{client:se,children:t.jsx(Pc,{attribute:"class",defaultTheme:"dark",enableSystem:!0,disableTransitionOnChange:!1,children:t.jsxs(Ac,{children:[t.jsx(uc,{}),t.jsx(Ph,{}),t.jsx(Nm,{})]})})})}const Eh=async()=>{if("serviceWorker"in navigator&&"PushManager"in window)try{const e=await navigator.serviceWorker.register("/sw.js",{scope:"/",updateViaCache:"none"});e.addEventListener("updatefound",()=>{const s=e.installing;s&&s.addEventListener("statechange",()=>{s.state==="installed"&&navigator.serviceWorker.controller&&window.confirm("New version available! Refresh to update?")&&(s.postMessage({type:"SKIP_WAITING"}),window.location.reload())})}),navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()}),setInterval(()=>{e.update()},3600*1e3),window.swRegistration=e}catch{}},Rh=()=>{let e=null;window.addEventListener("beforeinstallprompt",s=>{s.preventDefault(),e=s,window.deferredPrompt=e;const r=document.createElement("div");r.id="pwa-install-banner",r.style.cssText=`
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(135deg, #7c3aed 0%, #a855f7 100%);
      color: white;
      padding: 12px 24px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(124, 58, 237, 0.3);
      z-index: 1000;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      font-size: 14px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      animation: slideUp 0.3s ease-out;
    `,r.innerHTML=`
       Install MangaVerse App
      <span style="margin-left: 8px; opacity: 0.8;"></span>
    `,r.addEventListener("click",async a=>{if(a.target.textContent===""){r.remove();return}if(e){e.prompt();const{outcome:o}=await e.userChoice;e=null,r.remove()}}),document.body.appendChild(r),setTimeout(()=>{r.parentNode&&r.remove()},1e4)}),window.addEventListener("appinstalled",()=>{e=null;const s=document.getElementById("pwa-install-banner");s&&s.remove()})},zh=()=>{const e=()=>{const r=navigator.onLine;window.dispatchEvent(new CustomEvent("networkstatus",{detail:{isOnline:r}})),document.documentElement.classList.toggle("offline",!r),r||s()},s=()=>{if(document.getElementById("offline-toast"))return;const a=document.createElement("div");a.id="offline-toast",a.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      background: #dc2626;
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
      z-index: 1001;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      font-size: 14px;
      animation: slideInRight 0.3s ease-out;
    `,a.innerHTML=" You're offline - using cached content",document.body.appendChild(a);const n=()=>{navigator.onLine&&a.parentNode&&(a.remove(),window.removeEventListener("online",n))};window.addEventListener("online",n)};e(),window.addEventListener("online",e),window.addEventListener("offline",e)},Oh=async()=>{await Eh(),Rh(),zh();const e=document.createElement("style");e.textContent=`
    @keyframes slideUp {
      from { transform: translateX(-50%) translateY(100%); opacity: 0; }
      to { transform: translateX(-50%) translateY(0); opacity: 1; }
    }
    
    @keyframes slideInRight {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    
    .offline body::before {
      content: ' Offline Mode';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: #dc2626;
      color: white;
      text-align: center;
      padding: 4px;
      font-size: 12px;
      z-index: 9999;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }
    
    .offline body {
      padding-top: 24px;
    }
  `,document.head.appendChild(e)},Uh=async()=>{try{const e=document.getElementById("root");if(e)qr.createRoot(e).render(t.jsx(_a,{}));else throw new Error("Root element not found");Oh().catch(s=>{})}catch{const s=document.getElementById("root");s&&qr.createRoot(s).render(t.jsx(_a,{}))}};Uh();export{mt as $,Ct as A,v as B,Ze as C,Vt as D,ne as E,kd as F,Zl as G,Yl as H,Re as I,si as J,$s as K,vn as L,Xl as M,Et as N,Jh as O,lt as P,Ms as Q,ur as R,ut as S,nc as T,Zt as U,ks as V,bn as W,ac as X,Zs as Y,ti as Z,Gh as _,id as a,P as a0,Vl as a1,Qc as a2,Le as a3,Yt as a4,$e as a5,Vs as a6,Bt as a7,dt as a8,rs as a9,Dt as aa,ic as ab,rc as ac,Kl as ad,na as ae,tr as af,sc as ag,Lt as ah,b as ai,Gl as aj,Wl as ak,zd as al,Fc as am,da as an,Hl as ao,aa as ap,Jc as aq,Gn as ar,Zn as as,Yn as at,sd as au,Zh as av,Yh as aw,we as b,F as c,Te as d,Oe as e,Rn as f,zn as g,On as h,us as i,Mt as j,At as k,oc as l,di as m,Gt as n,Cs as o,ze as p,oa as q,se as r,Xh as s,Fl as t,ei as u,As as v,Ht as w,ia as x,It as y,Wh as z};
