import{j as e}from"./ui-vendor-BpIggZZ9.js";import{b as o}from"./react-vendor-C7VPsBAG.js";import{c as R,P as G,b as $,B as r,C as h,f as j,g as p,i as x,h as J,D as W,w as X,y as Z,E as w,a4 as _,T as ee,p as se,m as l,I as C,Y as D,n as g,a5 as v,r as y}from"./index-Bshoxa3b.js";import{D as E,a as L,b as k,c as S,d as F,e as P}from"./dialog-B4soTW2z.js";import{S as T,a as M,b as q,c as V,d as m}from"./select-DT_5i3rD.js";import{P as O}from"./plus-CIXQeA2Y.js";import{G as u}from"./globe-WU3sxzli.js";import{S as ie}from"./square-pen-C7u-hRzu.js";import{E as te}from"./eye-QF1-RHmE.js";import"./utils-vendor-BUCX3MvZ.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=R("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=R("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);function je(){const{toast:t}=G(),[H,n]=o.useState(!1),[I,d]=o.useState(!1),[b,N]=o.useState(null),[i,a]=o.useState({name:"",description:"",visibility:"private"}),{data:c,isLoading:Y}=$({queryKey:["/api/reading-lists"],queryFn:async()=>{const s=await fetch("/api/reading-lists",{credentials:"include"});if(!s.ok)throw new Error("Failed to fetch reading lists");return s.json()}}),B=async()=>{if(!i.name.trim()){t({title:"Error",description:"Please enter a list name",variant:"destructive"});return}try{await v("POST","/api/reading-lists",i),y.invalidateQueries({queryKey:["/api/reading-lists"]}),n(!1),a({name:"",description:"",visibility:"private"}),t({title:"List Created",description:"Your reading list has been created successfully."})}catch(s){t({title:"Error",description:s.message||"Failed to create list",variant:"destructive"})}},z=async()=>{if(b){if(!i.name.trim()){t({title:"Error",description:"Please enter a list name",variant:"destructive"});return}try{await v("PATCH",`/api/reading-lists/${b.id}`,i),y.invalidateQueries({queryKey:["/api/reading-lists"]}),d(!1),N(null),t({title:"List Updated",description:"Your reading list has been updated successfully."})}catch(s){t({title:"Error",description:s.message||"Failed to update list",variant:"destructive"})}}},K=async s=>{if(confirm("Are you sure you want to delete this reading list? This cannot be undone."))try{await v("DELETE",`/api/reading-lists/${s}`),y.invalidateQueries({queryKey:["/api/reading-lists"]}),t({title:"List Deleted",description:"Your reading list has been deleted successfully."})}catch(U){t({title:"Error",description:U.message||"Failed to delete list",variant:"destructive"})}},Q=s=>{N(s),a({name:s.name,description:s.description||"",visibility:s.visibility}),d(!0)},A=s=>s==="public"?e.jsx(u,{className:"w-4 h-4"}):e.jsx(g,{className:"w-4 h-4"});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Reading Lists"}),e.jsx("p",{className:"text-muted-foreground",children:"Create custom collections of your favorite series"})]}),e.jsxs(r,{onClick:()=>n(!0),children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Create List"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(h,{children:[e.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium",children:"Total Lists"}),e.jsx(f,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(x,{children:e.jsx("div",{className:"text-2xl font-bold",children:c?.length||0})})]}),e.jsxs(h,{children:[e.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium",children:"Public Lists"}),e.jsx(u,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(x,{children:e.jsx("div",{className:"text-2xl font-bold",children:c?.filter(s=>s.visibility==="public").length||0})})]})]}),Y?e.jsx("div",{children:"Loading your reading lists..."}):c&&c.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(s=>e.jsxs(h,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(j,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(f,{className:"w-5 h-5"}),s.name]}),e.jsx(J,{className:"mt-2",children:s.description||"No description"})]}),e.jsxs(W,{children:[e.jsx(X,{asChild:!0,children:e.jsx(r,{variant:"ghost",size:"icon",children:e.jsx(ae,{className:"w-4 h-4"})})}),e.jsxs(Z,{align:"end",children:[e.jsxs(w,{onClick:()=>Q(s),children:[e.jsx(ie,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.jsx(_,{}),e.jsxs(w,{onClick:()=>K(s.id),className:"text-destructive",children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]})}),e.jsx(x,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(se,{variant:s.visibility==="public"?"default":"secondary",children:[A(s.visibility),e.jsx("span",{className:"ml-1",children:s.visibility})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(te,{className:"w-4 h-4"}),s.itemCount||0," items"]})]})})]},s.id))}):e.jsx(h,{children:e.jsxs(x,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(f,{className:"w-16 h-16 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Reading Lists Yet"}),e.jsx("p",{className:"text-muted-foreground text-center mb-4",children:"Create your first reading list to organize your favorite series"}),e.jsxs(r,{onClick:()=>n(!0),children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Create Your First List"]})]})}),e.jsx(E,{open:H,onOpenChange:n,children:e.jsxs(L,{children:[e.jsxs(k,{children:[e.jsx(S,{children:"Create Reading List"}),e.jsx(F,{children:"Create a custom list to organize your favorite series"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"name",children:"List Name"}),e.jsx(C,{id:"name",placeholder:"My Favorites",value:i.name,onChange:s=>a({...i,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(D,{id:"description",placeholder:"Describe your reading list...",value:i.description,onChange:s=>a({...i,description:s.target.value}),rows:3})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"visibility",children:"Visibility"}),e.jsxs(T,{value:i.visibility,onValueChange:s=>a({...i,visibility:s}),children:[e.jsx(M,{id:"visibility",children:e.jsx(q,{})}),e.jsxs(V,{children:[e.jsx(m,{value:"private",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4"}),"Private - Only you can see this"]})}),e.jsx(m,{value:"public",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"w-4 h-4"}),"Public - Everyone can see this"]})})]})]})]})]}),e.jsxs(P,{children:[e.jsx(r,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(r,{onClick:B,children:"Create List"})]})]})}),e.jsx(E,{open:I,onOpenChange:d,children:e.jsxs(L,{children:[e.jsxs(k,{children:[e.jsx(S,{children:"Edit Reading List"}),e.jsx(F,{children:"Update your reading list details"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"edit-name",children:"List Name"}),e.jsx(C,{id:"edit-name",value:i.name,onChange:s=>a({...i,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"edit-description",children:"Description (Optional)"}),e.jsx(D,{id:"edit-description",value:i.description,onChange:s=>a({...i,description:s.target.value}),rows:3})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"edit-visibility",children:"Visibility"}),e.jsxs(T,{value:i.visibility,onValueChange:s=>a({...i,visibility:s}),children:[e.jsx(M,{id:"edit-visibility",children:e.jsx(q,{})}),e.jsxs(V,{children:[e.jsx(m,{value:"private",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4"}),"Private - Only you can see this"]})}),e.jsx(m,{value:"public",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"w-4 h-4"}),"Public - Everyone can see this"]})})]})]})]})]}),e.jsxs(P,{children:[e.jsx(r,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(r,{onClick:z,children:"Update List"})]})]})})]})}export{je as default};
