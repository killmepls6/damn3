import{j as s}from"./ui-vendor-BpIggZZ9.js";import{u as k,b as n}from"./react-vendor-C7VPsBAG.js";import{u as B,N as g,a0 as d,C as m,f as D,a3 as y,g as E,i as x,p as o,a7 as $,F as A}from"./index-Bshoxa3b.js";import{P as R}from"./progress-BQnuNZzz.js";import{T as u}from"./trophy-4C1s-oG7.js";import{C as j}from"./crown-DnGdiNOO.js";import{G as F}from"./gift-CIPErmUR.js";import"./utils-vendor-BUCX3MvZ.js";function q(){const[,b]=k(),{isAuthenticated:c,isLoading:N}=B(),[r,f]=n.useState(null),[h,v]=n.useState([]),[w,C]=n.useState(!0);n.useEffect(()=>{c&&P()},[c]);const P=async()=>{try{const[e,t]=await Promise.all([fetch("/api/loyalty/my-status",{credentials:"include"}),fetch("/api/loyalty/tiers",{credentials:"include"})]);if(e.ok){const l=await e.json();f(l)}if(t.ok){const l=await t.json();v(l)}}catch{}finally{C(!1)}},L=e=>{try{return JSON.parse(e)}catch{return[]}},p=e=>e.toLowerCase().includes("bronze")?s.jsx(y,{className:"w-8 h-8"}):e.toLowerCase().includes("silver")?s.jsx(u,{className:"w-8 h-8"}):e.toLowerCase().includes("gold")?s.jsx(j,{className:"w-8 h-8"}):e.toLowerCase().includes("platinum")||e.toLowerCase().includes("diamond")?s.jsx(j,{className:"w-8 h-8"}):s.jsx(F,{className:"w-8 h-8"});if(N||w)return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-black to-gray-900",children:[s.jsx(g,{}),s.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-20",children:[s.jsx(d,{className:"h-12 w-96 mb-6 bg-gray-800"}),s.jsx(d,{className:"h-64 mb-6 bg-gray-800"}),s.jsx(d,{className:"h-96 bg-gray-800"})]})]});if(!c)return b("/login?returnTo=/loyalty"),null;const a=r?.tier,i=h.find(e=>e.minPoints>(r?.points||0)),T=i?i.minPoints-(r?.points||0):0,S=i?(r?.points||0)/i.minPoints*100:100;return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-black to-gray-900",children:[s.jsx(g,{}),s.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-16",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-primary/10 border border-primary/20 rounded-full mb-6",children:[s.jsx(u,{className:"w-5 h-5 text-primary"}),s.jsx("span",{className:"text-sm font-semibold text-primary",children:"Loyalty Program"})]}),s.jsx("h1",{className:"text-4xl sm:text-6xl font-bold text-white mb-4",children:"Your Loyalty Status"}),s.jsx("p",{className:"text-gray-400 text-lg max-w-2xl mx-auto",children:"Earn points with every purchase and unlock exclusive rewards"})]}),s.jsxs(m,{className:"bg-gradient-to-br from-gray-900 to-gray-800 border-2 mb-8",style:{borderColor:a?.badgeColor||"#6b7280"},children:[s.jsx(D,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-4 rounded-xl",style:{backgroundColor:`${a?.badgeColor||"#6b7280"}20`},children:s.jsx("div",{style:{color:a?.badgeColor||"#9ca3af"},children:a?p(a.name):s.jsx(y,{className:"w-8 h-8"})})}),s.jsxs("div",{children:[s.jsx(E,{className:"text-3xl text-white",children:a?.name||"No Tier"}),s.jsxs("p",{className:"text-gray-400 mt-1",children:[r?.points.toLocaleString()||0," Points"]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Lifetime Points"}),s.jsx("p",{className:"text-2xl font-bold text-white",children:r?.lifetimePoints.toLocaleString()||0})]})]})}),s.jsxs(x,{className:"space-y-4",children:[i&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"text-gray-400",children:["Progress to ",i.name]}),s.jsxs("span",{className:"text-white font-semibold",children:[T.toLocaleString()," points needed"]})]}),s.jsx(R,{value:S,className:"h-3"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-700",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-amber-500",children:["+",a?.coinBonusPercentage||0,"%"]}),s.jsx("p",{className:"text-sm text-gray-400",children:"Coin Bonus"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-green-500",children:[a?.discountPercentage||0,"%"]}),s.jsx("p",{className:"text-sm text-gray-400",children:"Discount"})]})]}),a&&s.jsxs("div",{className:"bg-primary/10 border border-primary/20 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm font-semibold text-primary mb-2",children:"Your Perks:"}),s.jsx("div",{className:"space-y-1",children:L(a.perks).map((e,t)=>s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),e]},t))})]})]})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"All Tiers"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:h.map(e=>{const t=e.id===a?.id,l=(r?.points||0)<e.minPoints;return s.jsxs(m,{className:`relative overflow-hidden transition-all ${t?"border-2 scale-105":l?"bg-gray-900/30 border-gray-800 opacity-60":"bg-gray-900/50 border-gray-800"}`,style:t?{borderColor:e.badgeColor}:{},children:[t&&s.jsx(o,{className:"absolute top-4 right-4 text-white border-0",style:{backgroundColor:e.badgeColor},children:"Current"}),s.jsxs(x,{className:"p-6",children:[s.jsx("div",{className:"inline-flex p-3 rounded-xl mb-4",style:{backgroundColor:`${e.badgeColor}20`},children:s.jsx("div",{style:{color:e.badgeColor},children:p(e.name)})}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:e.name}),s.jsxs("p",{className:"text-sm text-gray-400 mb-4",children:[e.minPoints.toLocaleString(),e.maxPoints?` - ${e.maxPoints.toLocaleString()}`:"+"," points"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-400",children:"Coin Bonus"}),s.jsxs("span",{className:"text-amber-500 font-semibold",children:["+",e.coinBonusPercentage,"%"]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-400",children:"Discount"}),s.jsxs("span",{className:"text-green-500 font-semibold",children:[e.discountPercentage,"%"]})]})]})]})]},e.id)})})]}),s.jsx(m,{className:"bg-gradient-to-r from-primary/10 to-accent/10 border-primary/30",children:s.jsxs(x,{className:"p-6 text-center",children:[s.jsx($,{className:"w-12 h-12 mx-auto mb-4 text-primary"}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Earn Loyalty Points"}),s.jsx("p",{className:"text-gray-400 mb-4",children:"Earn points with every coin purchase and subscription"}),s.jsxs("div",{className:"flex gap-4 justify-center flex-wrap",children:[s.jsx(o,{variant:"outline",className:"border-primary/30 text-primary",children:"1 point per $1 spent"}),s.jsx(o,{variant:"outline",className:"border-primary/30 text-primary",children:"Bonus multipliers on special events"}),s.jsx(o,{variant:"outline",className:"border-primary/30 text-primary",children:"Double points on subscriptions"})]})]})})]}),s.jsx(A,{})]})}export{q as default};
