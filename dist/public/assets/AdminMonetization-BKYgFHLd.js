import{j as e}from"./ui-vendor-BpIggZZ9.js";import{u as va,b as d}from"./react-vendor-C7VPsBAG.js";import{c as fa,u as ya,P as Na,ah as ba,b as E,d as C,a0 as hs,B as i,a8 as wa,C as h,f as g,g as v,i as x,$ as xe,h as A,p as D,T as me,m as r,I as u,an as Sa,W as Ca,ag as xs,a7 as ka,a9 as Aa,S as ms,Q as js,a6 as Da,e as Fa,ao as $e,ap as Ke,Y as z,aq as Ta,ar as Pa,as as Ea,at as Ua,au as La}from"./index-Bshoxa3b.js";import{T as Ve,a as ze,b as T,c as P}from"./tabs-72BErqnU.js";import{S as I,a as B,b as O,c as R,d as o}from"./select-DT_5i3rD.js";import{D as ee,a as se,b as ae,c as ne,d as re,e as te}from"./dialog-B4soTW2z.js";import{P as Ia,T as Ba,a as Oa,b as we,c as je,d as Ra,e as Q}from"./table-BP19whss.js";import{L as Ma,B as qa,C as $a,a as Ka,b as Va,c as za,d as Qa,e as Xa,A as Ja,p as Ha,f as Ga,g as Ya,i as Za}from"./chart-vendor-BWHaG5wj.js";import{D as Qe}from"./dollar-sign-c3-1CJgR.js";import{C as _a}from"./crown-DnGdiNOO.js";import{Z as Wa}from"./zap-CuepkoNH.js";import{G as en}from"./gift-CIPErmUR.js";import{P as K}from"./plus-CIXQeA2Y.js";import{S as Xe}from"./square-pen-C7u-hRzu.js";import{D as ps}from"./download-D6kAy5d3.js";import{U as Je}from"./users-q6XJjClA.js";import{F as sn}from"./file-text-CPLU9rer.js";import{C as an}from"./circle-check-big-BOxg75CQ.js";import{A as nn}from"./activity-r2qUXDVk.js";import{M as He}from"./minus-CRP8eWos.js";import"./utils-vendor-BUCX3MvZ.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=fa("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);$a.register(Ka,Va,za,Qa,Xa,Ja,Ha,Ga,Ya,Za);async function b(){const l=await fetch("/api/csrf-token",{credentials:"include"});if(!l.ok)throw new Error("Failed to fetch CSRF token");return(await l.json()).csrfToken}async function tn(){const l=await fetch("/api/admin/packages",{credentials:"include"});if(!l.ok)throw new Error("Failed to fetch packages");return l.json()}async function cn(){const l=await fetch("/api/admin/coupons",{credentials:"include"});if(!l.ok)throw new Error("Failed to fetch coupons");return l.json()}async function ln(){const l=await fetch("/api/admin/invoices",{credentials:"include"});if(!l.ok)throw new Error("Failed to fetch invoices");return l.json()}async function dn(){const l=await fetch("/api/admin/manual-assignments",{credentials:"include"});if(!l.ok)throw new Error("Failed to fetch assignments");return l.json()}async function on(){const l=await fetch("/api/admin/offline-purchases",{credentials:"include"});if(!l.ok)throw new Error("Failed to fetch offline purchases");return l.json()}async function un(){const l=await fetch("/api/admin/currency/transactions",{credentials:"include"});if(!l.ok)throw new Error("Failed to fetch transactions");return l.json()}async function hn(){const l=await fetch("/api/admin/currency/stats",{credentials:"include"});if(!l.ok)throw new Error("Failed to fetch currency stats");return l.json()}async function xn(){const l=await fetch("/api/admin/users-detailed",{credentials:"include"});if(!l.ok)throw new Error("Failed to fetch users");return l.json()}async function mn(l){const f=await fetch(`/api/admin/user-transactions/${l}`,{credentials:"include"});if(!f.ok)throw new Error("Failed to fetch user transactions");return f.json()}function Bn(){const[,l]=va(),{isAdmin:f,isAuthenticated:w}=ya(),{toast:t}=Na(),N=ba(),[ie,gs]=d.useState("30d"),[vs,pe]=d.useState(!1),[U,X]=d.useState({code:"",type:"percentage",value:"",minPurchaseAmount:"",maxUses:"",expiresAt:"",isActive:"true"}),[S,Se]=d.useState({status:"all",packageId:"",startDate:"",endDate:""}),[fs,ge]=d.useState(!1),[L,J]=d.useState({userId:"",packageId:"",packageType:"currency",reason:"",expiresAt:""}),[Ce,ys]=d.useState(""),[ce,Ge]=d.useState(""),[Ye,Ze]=d.useState(""),[Ns,ke]=d.useState(0),[bs,H]=d.useState(!1),[le,Ae]=d.useState("add"),[de,_e]=d.useState(""),[De,We]=d.useState(""),[ve,ws]=d.useState(""),[fe,Ss]=d.useState("all"),[ye,Cs]=d.useState("all"),[G,ks]=d.useState("username"),[V,es]=d.useState("asc"),[p,ss]=d.useState(null),[As,as]=d.useState(!1),[Ds,Y]=d.useState(!1),[oe,Fe]=d.useState(null),[m,M]=d.useState({name:"",description:"",currencyAmount:"",priceUSD:"",bonusPercentage:"0",isActive:"true",displayOrder:"0"}),[Fs,Z]=d.useState(!1),[ue,Te]=d.useState(null),[c,k]=d.useState({name:"",description:"",priceUSD:"",billingCycle:"monthly",features:"",coinBonus:"0",discountPercentage:"0",isAdFree:"false",trialDays:"0",isActive:"true",displayOrder:"0",stripePriceId:""}),[Ts,_]=d.useState(!1),[he,Pe]=d.useState(null),[j,q]=d.useState({name:"",description:"",bundleType:"currency",priceUSD:"",items:"",isActive:"true",displayOrder:"0"});d.useEffect(()=>{(!w||!f)&&l("/")},[w,f,l]);const{data:F,isLoading:Ps}=E({queryKey:["/api/admin/monetization/stats",ie],queryFn:async()=>{const s=await fetch(`/api/admin/monetization/stats?range=${ie}`,{credentials:"include"});if(!s.ok)throw new Error("Failed to fetch stats");return s.json()},enabled:f&&w}),{data:ns,isLoading:Es}=E({queryKey:["/api/admin/monetization/top-packages"],queryFn:async()=>{const s=await fetch("/api/admin/monetization/top-packages",{credentials:"include"});if(!s.ok)throw new Error("Failed to fetch top packages");return s.json()},enabled:f&&w}),{data:rs,isLoading:Us}=E({queryKey:["/api/admin/monetization/revenue-history",ie],queryFn:async()=>{const s=await fetch(`/api/admin/monetization/revenue-history?range=${ie}`,{credentials:"include"});if(!s.ok)throw new Error("Failed to fetch revenue history");return s.json()},enabled:f&&w}),{data:W,isLoading:Ee}=E({queryKey:["admin-packages"],queryFn:tn,enabled:f&&w}),{data:Ls,isLoading:Is}=E({queryKey:["admin-coupons"],queryFn:cn,enabled:f&&w}),{data:ts,isLoading:Bs}=E({queryKey:["admin-invoices"],queryFn:ln,enabled:f&&w}),{data:is,isLoading:Os}=E({queryKey:["admin-assignments"],queryFn:dn,enabled:f&&w}),{data:cs,isLoading:Rs}=E({queryKey:["admin-offline-purchases"],queryFn:on,enabled:f&&w}),{data:Ne,isLoading:ls,refetch:ds}=E({queryKey:["admin-currency-transactions"],queryFn:un,enabled:f&&w}),{data:Ue,isLoading:Le}=E({queryKey:["admin-currency-stats"],queryFn:hn,enabled:f&&w}),{data:Ie,isLoading:Ms,refetch:qs}=E({queryKey:["admin-detailed-users"],queryFn:xn,enabled:f&&w}),{data:Be,isLoading:$s}=E({queryKey:["admin-user-transactions",p?.id],queryFn:()=>p?mn(p.id):Promise.resolve([]),enabled:f&&w&&!!p}),Ks=C({mutationFn:async s=>{const a=await b(),n=await fetch("/api/admin/coupons",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":a},credentials:"include",body:JSON.stringify(s)});if(!n.ok)throw new Error("Failed to create coupon");return n.json()},onSuccess:()=>{N.invalidateQueries({queryKey:["admin-coupons"]}),t({title:"Success",description:"Coupon created successfully"}),pe(!1),na()},onError:()=>{t({title:"Error",description:"Failed to create coupon",variant:"destructive"})}}),Vs=C({mutationFn:async s=>{const a=await b();if(!(await fetch(`/api/admin/coupons/${s}`,{method:"DELETE",headers:{"X-CSRF-Token":a},credentials:"include"})).ok)throw new Error("Failed to delete coupon")},onSuccess:()=>{N.invalidateQueries({queryKey:["admin-coupons"]}),t({title:"Success",description:"Coupon deleted successfully"})},onError:()=>{t({title:"Error",description:"Failed to delete coupon",variant:"destructive"})}}),zs=C({mutationFn:async s=>{const a=await b(),n=await fetch(`/api/admin/invoices/${s}/pdf`,{method:"POST",headers:{"X-CSRF-Token":a},credentials:"include"});if(!n.ok)throw new Error("Failed to generate PDF");return n.json()},onSuccess:s=>{if(s.pdfPath){const a=document.createElement("a");a.href=s.pdfPath,a.download=s.pdfPath.split("/").pop()||"invoice.pdf",a.click()}t({title:"Success",description:"Invoice PDF downloaded successfully"})},onError:()=>{t({title:"Error",description:"Failed to generate PDF",variant:"destructive"})}}),Qs=C({mutationFn:async s=>{const a=await b(),n=await fetch("/api/admin/manual-assignments",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":a},credentials:"include",body:JSON.stringify(s)});if(!n.ok)throw new Error("Failed to create assignment");return n.json()},onSuccess:()=>{N.invalidateQueries({queryKey:["admin-assignments"]}),t({title:"Success",description:"Package assigned successfully"}),ge(!1),J({userId:"",packageId:"",packageType:"currency",reason:"",expiresAt:""})},onError:()=>{t({title:"Error",description:"Failed to assign package",variant:"destructive"})}}),Xs=C({mutationFn:async s=>{const a=await b();if(!(await fetch(`/api/admin/manual-assignments/${s}`,{method:"DELETE",headers:{"X-CSRF-Token":a},credentials:"include"})).ok)throw new Error("Failed to revoke assignment")},onSuccess:()=>{N.invalidateQueries({queryKey:["admin-assignments"]}),t({title:"Success",description:"Assignment revoked successfully"})},onError:()=>{t({title:"Error",description:"Failed to revoke assignment",variant:"destructive"})}}),Js=C({mutationFn:async s=>{const a=await b(),n=await fetch(`/api/admin/purchases/${s}/reconcile`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":a},credentials:"include",body:JSON.stringify({status:"completed"})});if(!n.ok)throw new Error("Failed to reconcile purchase");return n.json()},onSuccess:()=>{N.invalidateQueries({queryKey:["admin-offline-purchases"]}),t({title:"Success",description:"Purchase reconciled successfully"})},onError:()=>{t({title:"Error",description:"Failed to reconcile purchase",variant:"destructive"})}}),Hs=C({mutationFn:async s=>{const a=await b(),n=await fetch("/api/currency/packages",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":a},credentials:"include",body:JSON.stringify(s)});if(!n.ok)throw new Error("Failed to create currency package");return n.json()},onSuccess:()=>{N.invalidateQueries({queryKey:["admin-packages"]}),t({title:"Success",description:"Currency package created successfully"}),Y(!1),Oe()},onError:()=>{t({title:"Error",description:"Failed to create currency package",variant:"destructive"})}}),Gs=C({mutationFn:async({id:s,data:a})=>{const n=await b(),y=await fetch(`/api/currency/packages/${s}`,{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-Token":n},credentials:"include",body:JSON.stringify(a)});if(!y.ok)throw new Error("Failed to update currency package");return y.json()},onSuccess:()=>{N.invalidateQueries({queryKey:["admin-packages"]}),t({title:"Success",description:"Currency package updated successfully"}),Y(!1),Fe(null),Oe()},onError:()=>{t({title:"Error",description:"Failed to update currency package",variant:"destructive"})}}),Ys=C({mutationFn:async s=>{const a=await b();if(!(await fetch(`/api/currency/packages/${s}`,{method:"DELETE",headers:{"X-CSRF-Token":a},credentials:"include"})).ok)throw new Error("Failed to delete currency package")},onSuccess:()=>{N.invalidateQueries({queryKey:["admin-packages"]}),t({title:"Success",description:"Currency package deleted successfully"})},onError:()=>{t({title:"Error",description:"Failed to delete currency package",variant:"destructive"})}}),Zs=C({mutationFn:async s=>{const a=await b(),n=await fetch("/api/admin/subscriptions",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":a},credentials:"include",body:JSON.stringify(s)});if(!n.ok)throw new Error("Failed to create subscription");return n.json()},onSuccess:()=>{N.invalidateQueries({queryKey:["admin-packages"]}),t({title:"Success",description:"Subscription created successfully"}),Z(!1),Re()},onError:()=>{t({title:"Error",description:"Failed to create subscription",variant:"destructive"})}}),_s=C({mutationFn:async({id:s,data:a})=>{const n=await b(),y=await fetch(`/api/admin/subscriptions/${s}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-Token":n},credentials:"include",body:JSON.stringify(a)});if(!y.ok)throw new Error("Failed to update subscription");return y.json()},onSuccess:()=>{N.invalidateQueries({queryKey:["admin-packages"]}),t({title:"Success",description:"Subscription updated successfully"}),Z(!1),Te(null),Re()},onError:()=>{t({title:"Error",description:"Failed to update subscription",variant:"destructive"})}}),Ws=C({mutationFn:async s=>{const a=await b();if(!(await fetch(`/api/admin/subscriptions/${s}`,{method:"DELETE",headers:{"X-CSRF-Token":a},credentials:"include"})).ok)throw new Error("Failed to delete subscription")},onSuccess:()=>{N.invalidateQueries({queryKey:["admin-packages"]}),t({title:"Success",description:"Subscription deleted successfully"})},onError:()=>{t({title:"Error",description:"Failed to delete subscription",variant:"destructive"})}}),ea=C({mutationFn:async s=>{const a=await b(),n=await fetch("/api/admin/bundles",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":a},credentials:"include",body:JSON.stringify(s)});if(!n.ok)throw new Error("Failed to create bundle");return n.json()},onSuccess:()=>{N.invalidateQueries({queryKey:["admin-packages"]}),t({title:"Success",description:"Bundle created successfully"}),_(!1),Me()},onError:()=>{t({title:"Error",description:"Failed to create bundle",variant:"destructive"})}}),sa=C({mutationFn:async({id:s,data:a})=>{const n=await b(),y=await fetch(`/api/admin/bundles/${s}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-Token":n},credentials:"include",body:JSON.stringify(a)});if(!y.ok)throw new Error("Failed to update bundle");return y.json()},onSuccess:()=>{N.invalidateQueries({queryKey:["admin-packages"]}),t({title:"Success",description:"Bundle updated successfully"}),_(!1),Pe(null),Me()},onError:()=>{t({title:"Error",description:"Failed to update bundle",variant:"destructive"})}}),aa=C({mutationFn:async s=>{const a=await b();if(!(await fetch(`/api/admin/bundles/${s}`,{method:"DELETE",headers:{"X-CSRF-Token":a},credentials:"include"})).ok)throw new Error("Failed to delete bundle")},onSuccess:()=>{N.invalidateQueries({queryKey:["admin-packages"]}),t({title:"Success",description:"Bundle deleted successfully"})},onError:()=>{t({title:"Error",description:"Failed to delete bundle",variant:"destructive"})}}),os=d.useMemo(()=>{if(!Ie)return[];let s=[...Ie];if(ve){const a=ve.toLowerCase();s=s.filter(n=>n.username.toLowerCase().includes(a)||(n.email||"").toLowerCase().includes(a))}return fe!=="all"&&(s=s.filter(a=>a.role===fe)),ye==="vip"?s=s.filter(a=>a.subscription!==null):ye==="none"&&(s=s.filter(a=>a.subscription===null)),s.sort((a,n)=>{let y,$;switch(G){case"username":y=a.username.toLowerCase(),$=n.username.toLowerCase();break;case"role":y=a.role,$=n.role;break;case"balance":y=a.currencyBalance,$=n.currencyBalance;break;default:return 0}return y<$?V==="asc"?-1:1:y>$?V==="asc"?1:-1:0}),s},[Ie,ve,fe,ye,G,V]),na=()=>{X({code:"",type:"percentage",value:"",minPurchaseAmount:"",maxUses:"",expiresAt:"",isActive:"true"})},Oe=()=>{M({name:"",description:"",currencyAmount:"",priceUSD:"",bonusPercentage:"0",isActive:"true",displayOrder:"0"})},Re=()=>{k({name:"",description:"",priceUSD:"",billingCycle:"monthly",features:"",coinBonus:"0",discountPercentage:"0",isAdFree:"false",trialDays:"0",isActive:"true",displayOrder:"0",stripePriceId:""})},Me=()=>{q({name:"",description:"",bundleType:"currency",priceUSD:"",items:"",isActive:"true",displayOrder:"0"})},ra=()=>{Oe(),Fe(null),Y(!0)},ta=s=>{Fe(s),M({name:s.name||"",description:s.description||"",currencyAmount:s.currencyAmount?.toString()||"",priceUSD:s.priceUSD||"",bonusPercentage:s.bonusPercentage?.toString()||"0",isActive:s.isActive||"true",displayOrder:s.displayOrder?.toString()||"0"}),Y(!0)},ia=()=>{const s={name:m.name,description:m.description,currencyAmount:parseInt(m.currencyAmount),priceUSD:m.priceUSD,bonusPercentage:parseInt(m.bonusPercentage),isActive:m.isActive,displayOrder:parseInt(m.displayOrder)};oe?Gs.mutate({id:oe.id,data:s}):Hs.mutate(s)},ca=()=>{Re(),Te(null),Z(!0)},la=s=>{Te(s),k({name:s.name||"",description:s.description||"",priceUSD:s.priceUSD||"",billingCycle:s.billingCycle||"monthly",features:Array.isArray(s.features)?s.features.join(", "):s.features||"",coinBonus:s.coinBonus?.toString()||"0",discountPercentage:s.discountPercentage?.toString()||"0",isAdFree:s.isAdFree||"false",trialDays:s.trialDays?.toString()||"0",isActive:s.isActive||"true",displayOrder:s.displayOrder?.toString()||"0",stripePriceId:s.stripePriceId||""}),Z(!0)},da=()=>{const s={name:c.name,description:c.description,priceUSD:c.priceUSD,billingCycle:c.billingCycle,features:c.features.split(",").map(a=>a.trim()).filter(a=>a),coinBonus:parseInt(c.coinBonus),discountPercentage:parseInt(c.discountPercentage),isAdFree:c.isAdFree,trialDays:parseInt(c.trialDays),isActive:c.isActive,displayOrder:parseInt(c.displayOrder),stripePriceId:c.stripePriceId||null};ue?_s.mutate({id:ue.id,data:s}):Zs.mutate(s)},oa=()=>{Me(),Pe(null),_(!0)},ua=s=>{Pe(s),q({name:s.name||"",description:s.description||"",bundleType:s.bundleType||"currency",priceUSD:s.priceUSD||"",items:typeof s.items=="string"?s.items:JSON.stringify(s.items||[]),isActive:s.isActive||"true",displayOrder:s.displayOrder?.toString()||"0"}),_(!0)},ha=()=>{const s={name:j.name,description:j.description,bundleType:j.bundleType,priceUSD:j.priceUSD,items:j.items,isActive:j.isActive,displayOrder:parseInt(j.displayOrder)};he?sa.mutate({id:he.id,data:s}):ea.mutate(s)},xa=async()=>{try{const s=new URLSearchParams;S.status&&S.status!=="all"&&s.append("status",S.status),S.packageId&&s.append("packageId",S.packageId),S.startDate&&s.append("startDate",S.startDate),S.endDate&&s.append("endDate",S.endDate);const a=await fetch(`/api/admin/subscribers?${s.toString()}`,{credentials:"include"});if(!a.ok)throw new Error("Failed to export");const n=await a.blob(),y=window.URL.createObjectURL(n),$=document.createElement("a");$.href=y,$.download=`subscribers-${new Date().toISOString().split("T")[0]}.csv`,$.click(),t({title:"Success",description:"Subscribers exported successfully"})}catch{t({title:"Error",description:"Failed to export subscribers",variant:"destructive"})}},us=async()=>{if(!Ce.trim()){t({title:"Error",description:"Please enter a username to search",variant:"destructive"});return}try{const s=await fetch(`/api/admin/users/search?q=${encodeURIComponent(Ce)}`,{credentials:"include"});if(!s.ok)throw new Error("User not found");const a=await s.json();if(a.length===0){t({title:"Not Found",description:"No user found with that username",variant:"destructive"});return}const n=a[0];Ge(n.id),Ze(n.username),ke(n.currencyBalance||0),t({title:"User Found",description:`User: ${n.username} (Balance: ${n.currencyBalance||0} coins)`})}catch(s){t({title:"Error",description:s.message||"Failed to search user",variant:"destructive"})}},ma=async()=>{if(!ce){t({title:"Error",description:"Please select a user first",variant:"destructive"});return}if(!de||parseInt(de)<=0){t({title:"Error",description:"Please enter a valid amount",variant:"destructive"});return}if(!De.trim()){t({title:"Error",description:"Please provide a reason for this adjustment",variant:"destructive"});return}try{const s=await b(),a=await fetch("/api/admin/currency/adjust",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":s},credentials:"include",body:JSON.stringify({userId:ce,amount:le==="add"?parseInt(de):-parseInt(de),reason:De})});if(!a.ok){const y=await a.json().catch(()=>({}));throw new Error(y.message||"Failed to adjust balance")}const n=await a.json();t({title:"Success",description:`Balance ${le==="add"?"added":"deducted"} successfully. New balance: ${n.newBalance} coins`}),ke(n.newBalance),H(!1),_e(""),We(""),N.invalidateQueries({queryKey:["admin-currency-transactions"]}),N.invalidateQueries({queryKey:["admin-detailed-users"]}),N.invalidateQueries({queryKey:["admin-user-transactions"]}),p&&p.id===ce&&ss({...p,currencyBalance:n.newBalance}),ds(),qs()}catch(s){t({title:"Error",description:s.message||"Failed to adjust balance",variant:"destructive"})}},ja=s=>{ss(s),as(!0)},be=(s,a)=>{Ge(s.id),Ze(s.username),ke(s.currencyBalance),Ae(a),H(!0)},qe=s=>{G===s?es(V==="asc"?"desc":"asc"):(ks(s),es("asc"))};if(!w||!f)return null;if(Ps||Es||Us)return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-background/95 p-8",children:[e.jsx(hs,{className:"h-12 w-96 mb-8"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[1,2,3,4].map(s=>e.jsx(hs,{className:"h-32"},s))})]});const pa={labels:rs?.map(s=>s.date)||[],datasets:[{label:"Revenue ($)",data:rs?.map(s=>s.revenue)||[],borderColor:"rgb(168, 85, 247)",backgroundColor:"rgba(168, 85, 247, 0.1)",tension:.4}]},ga={labels:ns?.map(s=>s.name)||[],datasets:[{label:"Sales Count",data:ns?.map(s=>s.totalSales)||[],backgroundColor:["rgba(168, 85, 247, 0.8)","rgba(236, 72, 153, 0.8)","rgba(251, 146, 60, 0.8)","rgba(59, 130, 246, 0.8)"]}]};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-background/95 p-4 md:p-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(i,{variant:"ghost",onClick:()=>l("/admin"),className:"text-muted-foreground hover:text-primary mb-4",children:[e.jsx(wa,{className:"w-4 h-4 mr-2"}),"Back to Admin"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold",children:"Monetization Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Complete revenue and monetization management"})]}),e.jsx("div",{className:"flex gap-2",children:["7d","30d","90d","1y"].map(s=>e.jsx(i,{variant:ie===s?"default":"outline",onClick:()=>gs(s),size:"sm",children:s==="1y"?"1 Year":s},s))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs(h,{children:[e.jsxs(g,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Total Revenue"}),e.jsx(Qe,{className:"w-4 h-4 text-green-500"})]}),e.jsxs(x,{children:[e.jsxs("div",{className:"text-3xl font-bold",children:["$",F?.totalRevenue?.toLocaleString()||"0"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.jsxs("span",{className:F?.revenueGrowth&&F.revenueGrowth>0?"text-green-500":"text-red-500",children:[F?.revenueGrowth&&F.revenueGrowth>0?"+":"",F?.revenueGrowth||0,"%"]})," from last period"]})]})]}),e.jsxs(h,{children:[e.jsxs(g,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Active Subscriptions"}),e.jsx(_a,{className:"w-4 h-4 text-purple-500"})]}),e.jsxs(x,{children:[e.jsx("div",{className:"text-3xl font-bold",children:F?.activeSubscriptions?.toLocaleString()||"0"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["$",F?.mrr?.toLocaleString()||"0"," MRR"]})]})]}),e.jsxs(h,{children:[e.jsxs(g,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Coin Sales"}),e.jsx(xe,{className:"w-4 h-4 text-amber-500"})]}),e.jsxs(x,{children:[e.jsxs("div",{className:"text-3xl font-bold",children:["$",F?.coinSalesRevenue?.toLocaleString()||"0"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"One-time purchases"})]})]}),e.jsxs(h,{children:[e.jsxs(g,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Flash Sales"}),e.jsx(Wa,{className:"w-4 h-4 text-red-500"})]}),e.jsxs(x,{children:[e.jsxs("div",{className:"text-3xl font-bold",children:["$",F?.flashSalesRevenue?.toLocaleString()||"0"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Limited time offers"})]})]})]}),e.jsxs(Ve,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(ze,{className:"grid w-full grid-cols-4 lg:grid-cols-8",children:[e.jsx(T,{value:"overview",children:"Overview"}),e.jsx(T,{value:"packages",children:"Packages"}),e.jsx(T,{value:"coupons",children:"Coupons"}),e.jsx(T,{value:"subscribers",children:"Subscribers"}),e.jsx(T,{value:"invoices",children:"Invoices"}),e.jsx(T,{value:"assignments",children:"Assignments"}),e.jsx(T,{value:"reconciliation",children:"Reconciliation"}),e.jsx(T,{value:"currency",children:"Currency"})]}),e.jsxs(P,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(h,{children:[e.jsxs(g,{children:[e.jsx(v,{children:"Revenue Trend"}),e.jsx(A,{children:"Revenue over time"})]}),e.jsx(x,{children:e.jsx(Ma,{data:pa,options:{responsive:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}})})]}),e.jsxs(h,{children:[e.jsxs(g,{children:[e.jsx(v,{children:"Top Selling Packages"}),e.jsx(A,{children:"By sales volume"})]}),e.jsx(x,{children:e.jsx(qa,{data:ga,options:{responsive:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}})})]})]}),e.jsxs(h,{children:[e.jsx(g,{children:e.jsx(v,{children:"Key Metrics"})}),e.jsx(x,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold",children:["$",F?.averageOrderValue?.toFixed(2)||"0"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Average Order Value"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold",children:[F?.conversionRate?.toFixed(1)||"0","%"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Conversion Rate"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold",children:["$",F?.monthlyRevenue?.toLocaleString()||"0"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"This Month"})]})]})})]})]}),e.jsx(P,{value:"packages",className:"space-y-6",children:e.jsxs(Ve,{defaultValue:"currency",className:"w-full",children:[e.jsxs(ze,{className:"grid w-full grid-cols-3",children:[e.jsxs(T,{value:"currency",children:[e.jsx(Qe,{className:"h-4 w-4 mr-2"}),"Currency Packages"]}),e.jsxs(T,{value:"subscriptions",children:[e.jsx(Ia,{className:"h-4 w-4 mr-2"}),"Subscriptions"]}),e.jsxs(T,{value:"bundles",children:[e.jsx(en,{className:"h-4 w-4 mr-2"}),"Bundles"]})]}),e.jsx(P,{value:"currency",className:"space-y-4 mt-6",children:e.jsxs(h,{children:[e.jsx(g,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(v,{children:"Currency Packages"}),e.jsx(A,{children:"Manage coin/point packages for sale"})]}),e.jsxs(i,{onClick:ra,children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Create Package"]})]})}),e.jsx(x,{children:Ee?e.jsx("p",{children:"Loading..."}):W?.currency.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No currency packages created yet"}):e.jsx("div",{className:"space-y-2",children:W?.currency.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.currencyAmount," coins - $",s.priceUSD,s.bonusPercentage>0&&` (+${s.bonusPercentage}% bonus)`]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{variant:s.isActive==="true"?"default":"secondary",children:s.isActive==="true"?"Active":"Inactive"}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>ta(s),children:e.jsx(Xe,{className:"h-4 w-4"})}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>Ys.mutate(s.id),children:e.jsx(me,{className:"h-4 w-4"})})]})]},s.id))})})]})}),e.jsx(P,{value:"subscriptions",className:"space-y-4 mt-6",children:e.jsxs(h,{children:[e.jsx(g,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(v,{children:"Subscription Packages"}),e.jsx(A,{children:"Manage VIP/Premium memberships"})]}),e.jsxs(i,{onClick:ca,children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Create Subscription"]})]})}),e.jsx(x,{children:Ee?e.jsx("p",{children:"Loading..."}):W?.subscriptions.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No subscription packages created yet"}):e.jsx("div",{className:"space-y-2",children:W?.subscriptions.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["$",s.priceUSD,"/",s.billingCycle,s.trialDays>0&&` • ${s.trialDays} days trial`,s.coinBonus>0&&` • ${s.coinBonus} coins/month`]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{variant:s.isActive==="true"?"default":"secondary",children:s.isActive==="true"?"Active":"Inactive"}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>la(s),children:e.jsx(Xe,{className:"h-4 w-4"})}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>Ws.mutate(s.id),children:e.jsx(me,{className:"h-4 w-4"})})]})]},s.id))})})]})}),e.jsx(P,{value:"bundles",className:"space-y-4 mt-6",children:e.jsxs(h,{children:[e.jsx(g,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(v,{children:"Package Bundles"}),e.jsx(A,{children:"Special bundled offers"})]}),e.jsxs(i,{onClick:oa,children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Create Bundle"]})]})}),e.jsx(x,{children:Ee?e.jsx("p",{children:"Loading..."}):W?.bundles.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No bundles created yet"}):e.jsx("div",{className:"space-y-2",children:W?.bundles.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["$",s.priceUSD," • ",s.bundleType]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{variant:s.isActive==="true"?"default":"secondary",children:s.isActive==="true"?"Active":"Inactive"}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>ua(s),children:e.jsx(Xe,{className:"h-4 w-4"})}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>aa.mutate(s.id),children:e.jsx(me,{className:"h-4 w-4"})})]})]},s.id))})})]})})]})}),e.jsxs(P,{value:"coupons",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Coupon Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Create and manage discount codes"})]}),e.jsxs(i,{onClick:()=>pe(!0),children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Create Coupon"]})]}),e.jsxs(h,{children:[e.jsxs(g,{children:[e.jsx(v,{children:"Active Coupons"}),e.jsx(A,{children:"Manage discount codes for your users"})]}),e.jsx(x,{children:Is?e.jsx("p",{children:"Loading..."}):e.jsx("div",{className:"space-y-2",children:Ls?.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rn,{className:"h-4 w-4"}),e.jsx("h3",{className:"font-semibold",children:s.code}),e.jsx(D,{variant:s.isActive==="true"?"default":"secondary",children:s.isActive==="true"?"Active":"Inactive"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[s.type==="percentage"?`${s.value}% off`:`$${s.value} off`,s.minPurchaseAmount&&` • Min: $${s.minPurchaseAmount}`,s.maxUses&&` • ${s.currentUses}/${s.maxUses} used`]})]}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>Vs.mutate(s.id),children:e.jsx(me,{className:"h-4 w-4"})})]},s.id))})})]})]}),e.jsxs(P,{value:"subscribers",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Subscribers"}),e.jsx("p",{className:"text-muted-foreground",children:"View and export subscriber data"})]}),e.jsxs(i,{onClick:xa,children:[e.jsx(ps,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]}),e.jsxs(h,{children:[e.jsxs(g,{children:[e.jsx(v,{children:"Export Filters"}),e.jsx(A,{children:"Filter subscribers before exporting"})]}),e.jsxs(x,{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Status"}),e.jsxs(I,{value:S.status,onValueChange:s=>Se({...S,status:s}),children:[e.jsx(B,{children:e.jsx(O,{placeholder:"All statuses"})}),e.jsxs(R,{children:[e.jsx(o,{value:"all",children:"All"}),e.jsx(o,{value:"active",children:"Active"}),e.jsx(o,{value:"cancelled",children:"Cancelled"}),e.jsx(o,{value:"expired",children:"Expired"})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Start Date"}),e.jsx(u,{type:"date",value:S.startDate,onChange:s=>Se({...S,startDate:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{children:"End Date"}),e.jsx(u,{type:"date",value:S.endDate,onChange:s=>Se({...S,endDate:s.target.value})})]})]})]}),e.jsxs(h,{children:[e.jsxs(g,{children:[e.jsxs(v,{children:[e.jsx(Je,{className:"inline h-5 w-5 mr-2"}),"Subscriber Information"]}),e.jsx(A,{children:'Use the filters above and click "Export CSV" to download subscriber data'})]}),e.jsx(x,{children:e.jsx("p",{className:"text-muted-foreground",children:"The exported CSV will include: User ID, Username, Email, Package Name, Status, Trial Info, and Subscription Dates"})})]})]}),e.jsxs(P,{value:"invoices",className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Invoices"}),e.jsx("p",{className:"text-muted-foreground",children:"View and manage invoices"})]}),e.jsxs(h,{children:[e.jsxs(g,{children:[e.jsx(v,{children:"All Invoices"}),e.jsx(A,{children:"Purchase and subscription invoices"})]}),e.jsx(x,{children:Bs?e.jsx("p",{children:"Loading..."}):ts?.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No invoices found"}):e.jsx("div",{className:"space-y-2",children:ts?.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(sn,{className:"h-4 w-4"}),e.jsx("h3",{className:"font-semibold",children:s.invoiceNumber}),e.jsx(D,{variant:s.status==="paid"?"default":"secondary",children:s.status})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Total: $",s.finalAmount,s.discountAmount!=="0.00"&&` (Discount: $${s.discountAmount})`]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(s.createdAt).toLocaleDateString()})]}),e.jsxs(i,{size:"sm",onClick:()=>zs.mutate(s.id),children:[e.jsx(ps,{className:"h-4 w-4 mr-2"}),"PDF"]})]},s.id))})})]})]}),e.jsxs(P,{value:"assignments",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Manual Assignments"}),e.jsx("p",{className:"text-muted-foreground",children:"Manually assign packages to users"})]}),e.jsxs(i,{onClick:()=>ge(!0),children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Assign Package"]})]}),e.jsxs(h,{children:[e.jsxs(g,{children:[e.jsx(v,{children:"Active Assignments"}),e.jsx(A,{children:"Manually assigned packages"})]}),e.jsx(x,{children:Os?e.jsx("p",{children:"Loading..."}):is?.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No manual assignments yet"}):e.jsx("div",{className:"space-y-2",children:is?.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Sa,{className:"h-4 w-4"}),e.jsxs("h3",{className:"font-semibold",children:["User: ",s.userId]}),e.jsx(D,{variant:s.isActive==="true"?"default":"secondary",children:s.isActive==="true"?"Active":"Revoked"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Type: ",s.packageType," • Reason: ",s.reason,s.expiresAt&&` • Expires: ${new Date(s.expiresAt).toLocaleDateString()}`]})]}),s.isActive==="true"&&e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>Xs.mutate(s.id),children:e.jsx(me,{className:"h-4 w-4"})})]},s.id))})})]})]}),e.jsxs(P,{value:"reconciliation",className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Purchase Reconciliation"}),e.jsx("p",{className:"text-muted-foreground",children:"Reconcile offline and pending purchases"})]}),e.jsxs(h,{children:[e.jsxs(g,{children:[e.jsx(v,{children:"Offline Purchases"}),e.jsx(A,{children:"Purchases marked as offline need reconciliation"})]}),e.jsx(x,{children:Rs?e.jsx("p",{children:"Loading..."}):cs?.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(an,{className:"h-12 w-12 mx-auto text-green-500 mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"All purchases reconciled! No pending items."})]}):e.jsx("div",{className:"space-y-2",children:cs?.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ca,{className:"h-4 w-4 text-orange-500"}),e.jsxs("h3",{className:"font-semibold",children:["Purchase #",s.id.slice(0,8)]}),e.jsx(D,{variant:"secondary",children:s.status}),e.jsx(D,{variant:"destructive",children:"Offline"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["User: ",s.userId," • Amount: $",s.amountPaid," • Coins: ",s.currencyReceived]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Provider: ",s.paymentProvider," • ",new Date(s.createdAt).toLocaleDateString()]})]}),e.jsxs(i,{size:"sm",onClick:()=>Js.mutate(s.id),children:[e.jsx(xs,{className:"h-4 w-4 mr-2"}),"Reconcile"]})]},s.id))})})]})]}),e.jsxs(P,{value:"currency",className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Currency Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage user balances and chapter pricing"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(h,{children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Distributed"}),e.jsx("p",{className:"text-2xl font-bold",children:Le?"...":(Ue?.totalDistributed||0).toLocaleString()})]}),e.jsx(Qe,{className:"w-8 h-8 text-primary"})]})})}),e.jsx(h,{children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Spent"}),e.jsx("p",{className:"text-2xl font-bold",children:Le?"...":(Ue?.totalSpent||0).toLocaleString()})]}),e.jsx(ka,{className:"w-8 h-8 text-accent"})]})})}),e.jsx(h,{children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-bold",children:Le?"...":(Ue?.activeUsers||0).toLocaleString()})]}),e.jsx(Je,{className:"w-8 h-8 text-orange-500"})]})})}),e.jsx(h,{children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Transactions"}),e.jsx("p",{className:"text-2xl font-bold",children:ls?"...":(Ne?.length||0).toLocaleString()})]}),e.jsx(nn,{className:"w-8 h-8 text-purple-500"})]})})})]}),e.jsxs(Ve,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(ze,{className:"grid w-full max-w-md grid-cols-2",children:[e.jsx(T,{value:"overview",children:"Overview"}),e.jsx(T,{value:"users",children:"Users"})]}),e.jsx(P,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(h,{children:[e.jsxs(g,{children:[e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"w-5 h-5"}),"Adjust User Balance"]}),e.jsx(A,{children:"Search for a user and adjust their currency balance"})]}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(r,{htmlFor:"search",children:"Username"}),e.jsx(u,{id:"search",placeholder:"Enter username...",value:Ce,onChange:s=>ys(s.target.value),onKeyDown:s=>s.key==="Enter"&&us()})]}),e.jsxs(i,{onClick:us,className:"mt-auto",children:[e.jsx(Aa,{className:"w-4 h-4 mr-2"}),"Search"]})]}),ce&&e.jsxs("div",{className:"p-4 bg-muted rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:Ye}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["User ID: ",ce]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Current Balance"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"w-5 h-5 text-primary"}),e.jsx("p",{className:"text-2xl font-bold",children:Ns})]})]})]}),e.jsx(ms,{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{onClick:()=>{Ae("add"),H(!0)},className:"flex-1",variant:"outline",children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Add Coins"]}),e.jsxs(i,{onClick:()=>{Ae("deduct"),H(!0)},className:"flex-1",variant:"outline",children:[e.jsx(He,{className:"w-4 h-4 mr-2"}),"Deduct Coins"]})]})]})]})]}),e.jsxs(h,{children:[e.jsxs(g,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(js,{className:"w-5 h-5"}),"Transaction Log"]}),e.jsxs(i,{size:"sm",variant:"outline",onClick:()=>ds(),children:[e.jsx(xs,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),e.jsx(A,{children:"Recent currency transactions and adjustments"})]}),e.jsx(x,{children:ls?e.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"Loading transactions..."}):!Ne||Ne.length===0?e.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"No transactions found"}):e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:Ne.map(s=>e.jsx("div",{className:"p-3 bg-muted/50 rounded-lg",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:s.username}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.reason}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(s.createdAt).toLocaleString()})]}),e.jsxs(D,{variant:s.amount>0?"default":"secondary",className:s.amount>0?"bg-green-500":"bg-red-500",children:[s.amount>0?"+":"",s.amount," coins"]})]})},s.id))})})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs(h,{children:[e.jsx(g,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(Da,{className:"w-5 h-5"}),"Quick Actions"]})}),e.jsxs(x,{className:"space-y-3",children:[e.jsxs(i,{onClick:()=>l("/admin/chapter-access"),variant:"outline",className:"w-full justify-start",children:[e.jsx(Fa,{className:"w-4 h-4 mr-2"}),"Chapter Access Control"]}),e.jsxs(i,{onClick:()=>l("/shop"),variant:"outline",className:"w-full justify-start",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"View Shop"]})]})]})})]})}),e.jsx(P,{value:"users",className:"space-y-6",children:e.jsxs(h,{children:[e.jsxs(g,{children:[e.jsx(v,{children:"User Management"}),e.jsx(A,{children:"View and manage user currency balances"})]}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Search Users"}),e.jsx(u,{placeholder:"Search by username or email...",value:ve,onChange:s=>ws(s.target.value)})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Filter by Role"}),e.jsxs(I,{value:fe,onValueChange:Ss,children:[e.jsx(B,{children:e.jsx(O,{})}),e.jsxs(R,{children:[e.jsx(o,{value:"all",children:"All Roles"}),e.jsx(o,{value:"user",children:"User"}),e.jsx(o,{value:"admin",children:"Admin"})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Filter by Membership"}),e.jsxs(I,{value:ye,onValueChange:Cs,children:[e.jsx(B,{children:e.jsx(O,{})}),e.jsxs(R,{children:[e.jsx(o,{value:"all",children:"All"}),e.jsx(o,{value:"vip",children:"VIP Only"}),e.jsx(o,{value:"none",children:"No Subscription"})]})]})]})]}),e.jsxs(Ba,{children:[e.jsx(Oa,{children:e.jsxs(we,{children:[e.jsx(je,{onClick:()=>qe("username"),className:"cursor-pointer",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Username",G==="username"&&(V==="asc"?e.jsx($e,{className:"w-4 h-4"}):e.jsx(Ke,{className:"w-4 h-4"}))]})}),e.jsx(je,{onClick:()=>qe("role"),className:"cursor-pointer",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Role",G==="role"&&(V==="asc"?e.jsx($e,{className:"w-4 h-4"}):e.jsx(Ke,{className:"w-4 h-4"}))]})}),e.jsx(je,{onClick:()=>qe("balance"),className:"cursor-pointer",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Balance",G==="balance"&&(V==="asc"?e.jsx($e,{className:"w-4 h-4"}):e.jsx(Ke,{className:"w-4 h-4"}))]})}),e.jsx(je,{children:"Subscription"}),e.jsx(je,{children:"Actions"})]})}),e.jsx(Ra,{children:Ms?e.jsx(we,{children:e.jsx(Q,{colSpan:5,className:"text-center",children:"Loading..."})}):os.length===0?e.jsx(we,{children:e.jsx(Q,{colSpan:5,className:"text-center text-muted-foreground",children:"No users found"})}):os.map(s=>e.jsxs(we,{className:"cursor-pointer",onClick:()=>ja(s),children:[e.jsx(Q,{className:"font-medium",children:s.username}),e.jsx(Q,{children:e.jsx(D,{variant:s.isAdmin?"default":"secondary",children:s.role})}),e.jsx(Q,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(xe,{className:"w-4 h-4 text-primary"}),s.currencyBalance]})}),e.jsx(Q,{children:s.subscription?e.jsx(D,{variant:"outline",children:s.subscription.packageName}):e.jsx("span",{className:"text-muted-foreground",children:"None"})}),e.jsx(Q,{children:e.jsxs("div",{className:"flex gap-1",onClick:a=>a.stopPropagation(),children:[e.jsx(i,{size:"sm",variant:"outline",onClick:()=>be(s,"add"),children:e.jsx(K,{className:"w-3 h-3"})}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>be(s,"deduct"),children:e.jsx(He,{className:"w-3 h-3"})})]})})]},s.id))})]})]})]})})]})]})]})]}),e.jsx(ee,{open:vs,onOpenChange:pe,children:e.jsxs(se,{children:[e.jsxs(ae,{children:[e.jsx(ne,{children:"Create Coupon"}),e.jsx(re,{children:"Create a new discount coupon"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Code"}),e.jsx(u,{value:U.code,onChange:s=>X({...U,code:s.target.value.toUpperCase()}),placeholder:"SUMMER2025"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Type"}),e.jsxs(I,{value:U.type,onValueChange:s=>X({...U,type:s}),children:[e.jsx(B,{children:e.jsx(O,{})}),e.jsxs(R,{children:[e.jsx(o,{value:"percentage",children:"Percentage"}),e.jsx(o,{value:"fixed",children:"Fixed Amount"})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Value"}),e.jsx(u,{type:"number",value:U.value,onChange:s=>X({...U,value:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Min Purchase Amount (optional)"}),e.jsx(u,{type:"number",value:U.minPurchaseAmount,onChange:s=>X({...U,minPurchaseAmount:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Max Uses (optional)"}),e.jsx(u,{type:"number",value:U.maxUses,onChange:s=>X({...U,maxUses:s.target.value})})]})]}),e.jsxs(te,{children:[e.jsx(i,{variant:"outline",onClick:()=>pe(!1),children:"Cancel"}),e.jsx(i,{onClick:()=>Ks.mutate(U),children:"Create"})]})]})}),e.jsx(ee,{open:fs,onOpenChange:ge,children:e.jsxs(se,{children:[e.jsxs(ae,{children:[e.jsx(ne,{children:"Assign Package"}),e.jsx(re,{children:"Manually assign a package to a user"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"User ID"}),e.jsx(u,{value:L.userId,onChange:s=>J({...L,userId:s.target.value}),placeholder:"User ID"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Package Type"}),e.jsxs(I,{value:L.packageType,onValueChange:s=>J({...L,packageType:s}),children:[e.jsx(B,{children:e.jsx(O,{})}),e.jsxs(R,{children:[e.jsx(o,{value:"currency",children:"Currency Package"}),e.jsx(o,{value:"subscription",children:"Subscription"}),e.jsx(o,{value:"bundle",children:"Bundle"})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Package ID"}),e.jsx(u,{value:L.packageId,onChange:s=>J({...L,packageId:s.target.value}),placeholder:"Package ID"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Reason"}),e.jsx(z,{value:L.reason,onChange:s=>J({...L,reason:s.target.value}),placeholder:"Reason for assignment"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Expiration Date (optional)"}),e.jsx(u,{type:"datetime-local",value:L.expiresAt,onChange:s=>J({...L,expiresAt:s.target.value})})]})]}),e.jsxs(te,{children:[e.jsx(i,{variant:"outline",onClick:()=>ge(!1),children:"Cancel"}),e.jsx(i,{onClick:()=>Qs.mutate(L),children:"Assign"})]})]})}),e.jsx(ee,{open:Ds,onOpenChange:Y,children:e.jsxs(se,{children:[e.jsxs(ae,{children:[e.jsxs(ne,{children:[oe?"Edit":"Create"," Currency Package"]}),e.jsxs(re,{children:[oe?"Update":"Create a new"," currency package"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Name"}),e.jsx(u,{value:m.name,onChange:s=>M({...m,name:s.target.value}),placeholder:"Starter Pack"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Description"}),e.jsx(z,{value:m.description,onChange:s=>M({...m,description:s.target.value}),placeholder:"Perfect for getting started"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Currency Amount"}),e.jsx(u,{type:"number",value:m.currencyAmount,onChange:s=>M({...m,currencyAmount:s.target.value}),placeholder:"100"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Price (USD)"}),e.jsx(u,{type:"number",step:"0.01",value:m.priceUSD,onChange:s=>M({...m,priceUSD:s.target.value}),placeholder:"9.99"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Bonus Percentage"}),e.jsx(u,{type:"number",value:m.bonusPercentage,onChange:s=>M({...m,bonusPercentage:s.target.value}),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Display Order"}),e.jsx(u,{type:"number",value:m.displayOrder,onChange:s=>M({...m,displayOrder:s.target.value}),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Active"}),e.jsxs(I,{value:m.isActive,onValueChange:s=>M({...m,isActive:s}),children:[e.jsx(B,{children:e.jsx(O,{})}),e.jsxs(R,{children:[e.jsx(o,{value:"true",children:"Active"}),e.jsx(o,{value:"false",children:"Inactive"})]})]})]})]}),e.jsxs(te,{children:[e.jsx(i,{variant:"outline",onClick:()=>Y(!1),children:"Cancel"}),e.jsx(i,{onClick:ia,children:oe?"Update":"Create"})]})]})}),e.jsx(ee,{open:Fs,onOpenChange:Z,children:e.jsxs(se,{className:"max-w-2xl",children:[e.jsxs(ae,{children:[e.jsxs(ne,{children:[ue?"Edit":"Create"," Subscription"]}),e.jsxs(re,{children:[ue?"Update":"Create a new"," subscription package"]})]}),e.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto pr-2",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Name"}),e.jsx(u,{value:c.name,onChange:s=>k({...c,name:s.target.value}),placeholder:"Basic VIP"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Description"}),e.jsx(z,{value:c.description,onChange:s=>k({...c,description:s.target.value}),placeholder:"Access to exclusive content"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Price (USD)"}),e.jsx(u,{type:"number",step:"0.01",value:c.priceUSD,onChange:s=>k({...c,priceUSD:s.target.value}),placeholder:"9.99"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Billing Cycle"}),e.jsxs(I,{value:c.billingCycle,onValueChange:s=>k({...c,billingCycle:s}),children:[e.jsx(B,{children:e.jsx(O,{})}),e.jsxs(R,{children:[e.jsx(o,{value:"monthly",children:"Monthly"}),e.jsx(o,{value:"yearly",children:"Yearly"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Features (comma separated)"}),e.jsx(z,{value:c.features,onChange:s=>k({...c,features:s.target.value}),placeholder:"Ad-free reading, Early access, Exclusive badges"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Stripe Price ID (optional)"}),e.jsx(u,{value:c.stripePriceId,onChange:s=>k({...c,stripePriceId:s.target.value}),placeholder:"price_xxxxx"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Leave empty to auto-create when Stripe integration is configured"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Monthly Coin Bonus"}),e.jsx(u,{type:"number",value:c.coinBonus,onChange:s=>k({...c,coinBonus:s.target.value}),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Discount % on Purchases"}),e.jsx(u,{type:"number",value:c.discountPercentage,onChange:s=>k({...c,discountPercentage:s.target.value}),placeholder:"0"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Trial Days"}),e.jsx(u,{type:"number",value:c.trialDays,onChange:s=>k({...c,trialDays:s.target.value}),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Display Order"}),e.jsx(u,{type:"number",value:c.displayOrder,onChange:s=>k({...c,displayOrder:s.target.value}),placeholder:"0"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Ad-Free"}),e.jsxs(I,{value:c.isAdFree,onValueChange:s=>k({...c,isAdFree:s}),children:[e.jsx(B,{children:e.jsx(O,{})}),e.jsxs(R,{children:[e.jsx(o,{value:"true",children:"Yes"}),e.jsx(o,{value:"false",children:"No"})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Active"}),e.jsxs(I,{value:c.isActive,onValueChange:s=>k({...c,isActive:s}),children:[e.jsx(B,{children:e.jsx(O,{})}),e.jsxs(R,{children:[e.jsx(o,{value:"true",children:"Active"}),e.jsx(o,{value:"false",children:"Inactive"})]})]})]})]})]}),e.jsxs(te,{children:[e.jsx(i,{variant:"outline",onClick:()=>Z(!1),children:"Cancel"}),e.jsx(i,{onClick:da,children:ue?"Update":"Create"})]})]})}),e.jsx(ee,{open:Ts,onOpenChange:_,children:e.jsxs(se,{children:[e.jsxs(ae,{children:[e.jsxs(ne,{children:[he?"Edit":"Create"," Bundle"]}),e.jsxs(re,{children:[he?"Update":"Create a new"," package bundle"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Name"}),e.jsx(u,{value:j.name,onChange:s=>q({...j,name:s.target.value}),placeholder:"Mega Pack"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Description"}),e.jsx(z,{value:j.description,onChange:s=>q({...j,description:s.target.value}),placeholder:"Best value bundle"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Bundle Type"}),e.jsxs(I,{value:j.bundleType,onValueChange:s=>q({...j,bundleType:s}),children:[e.jsx(B,{children:e.jsx(O,{})}),e.jsxs(R,{children:[e.jsx(o,{value:"currency",children:"Currency"}),e.jsx(o,{value:"subscription",children:"Subscription"}),e.jsx(o,{value:"chapter",children:"Chapter"}),e.jsx(o,{value:"mixed",children:"Mixed"})]})]})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Price (USD)"}),e.jsx(u,{type:"number",step:"0.01",value:j.priceUSD,onChange:s=>q({...j,priceUSD:s.target.value}),placeholder:"19.99"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Items (JSON format)"}),e.jsx(z,{value:j.items,onChange:s=>q({...j,items:s.target.value}),placeholder:'[{"type":"currency","amount":500},{"type":"chapter","id":"123"}]'})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Display Order"}),e.jsx(u,{type:"number",value:j.displayOrder,onChange:s=>q({...j,displayOrder:s.target.value}),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Active"}),e.jsxs(I,{value:j.isActive,onValueChange:s=>q({...j,isActive:s}),children:[e.jsx(B,{children:e.jsx(O,{})}),e.jsxs(R,{children:[e.jsx(o,{value:"true",children:"Active"}),e.jsx(o,{value:"false",children:"Inactive"})]})]})]})]}),e.jsxs(te,{children:[e.jsx(i,{variant:"outline",onClick:()=>_(!1),children:"Cancel"}),e.jsx(i,{onClick:ha,children:he?"Update":"Create"})]})]})}),e.jsx(ee,{open:bs,onOpenChange:H,children:e.jsxs(se,{children:[e.jsxs(ae,{children:[e.jsxs(ne,{children:[le==="add"?"Add":"Deduct"," Coins"]}),e.jsxs(re,{children:[le==="add"?"Add coins to":"Deduct coins from"," ",Ye,"'s balance"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Amount"}),e.jsx(u,{type:"number",placeholder:"Enter amount...",value:de,onChange:s=>_e(s.target.value)})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Reason"}),e.jsx(z,{placeholder:"Reason for adjustment...",value:De,onChange:s=>We(s.target.value)})]})]}),e.jsxs(te,{children:[e.jsx(i,{variant:"outline",onClick:()=>H(!1),children:"Cancel"}),e.jsx(i,{onClick:ma,children:le==="add"?"Add Coins":"Deduct Coins"})]})]})}),e.jsx(Ta,{open:As,onOpenChange:as,children:e.jsxs(Pa,{className:"w-full sm:max-w-lg",children:[e.jsxs(Ea,{children:[e.jsx(Ua,{children:"User Details"}),e.jsx(La,{children:p?.username})]}),p&&e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(r,{className:"text-muted-foreground",children:"Email"}),e.jsx("p",{className:"text-sm",children:p.email||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-muted-foreground",children:"Role"}),e.jsx("div",{className:"mt-1",children:e.jsx(D,{variant:p.isAdmin?"default":"secondary",children:p.role})})]}),e.jsxs("div",{children:[e.jsx(r,{className:"text-muted-foreground",children:"Currency Balance"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(xe,{className:"w-5 h-5 text-primary"}),e.jsx("p",{className:"text-2xl font-bold",children:p.currencyBalance})]})]}),p.subscription&&e.jsxs("div",{children:[e.jsx(r,{className:"text-muted-foreground",children:"Subscription"}),e.jsxs("div",{className:"mt-2 p-3 bg-muted rounded-lg",children:[e.jsx("p",{className:"font-medium",children:p.subscription.packageName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Status: ",e.jsx(D,{variant:"outline",children:p.subscription.status})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[new Date(p.subscription.currentPeriodStart).toLocaleDateString()," - ",new Date(p.subscription.currentPeriodEnd).toLocaleDateString()]})]})]})]}),e.jsx(ms,{}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(js,{className:"w-4 h-4"}),"Transaction History"]}),$s?e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."}):!Be||Be.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"No transactions"}):e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:Be.map(s=>e.jsx("div",{className:"p-3 bg-muted/50 rounded-lg text-sm",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:s.reason}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(s.createdAt).toLocaleString()})]}),e.jsxs(D,{variant:s.amount>0?"default":"secondary",className:s.amount>0?"bg-green-500":"bg-red-500",children:[s.amount>0?"+":"",s.amount]})]})},s.id))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{className:"flex-1",onClick:()=>{be(p,"add")},children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Add Coins"]}),e.jsxs(i,{className:"flex-1",variant:"outline",onClick:()=>{be(p,"deduct")},children:[e.jsx(He,{className:"w-4 h-4 mr-2"}),"Deduct Coins"]})]})]})]})})]})}export{Bn as default};
