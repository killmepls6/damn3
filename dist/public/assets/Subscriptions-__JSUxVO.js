import{j as e}from"./ui-vendor-BpIggZZ9.js";import{u as E,b as k}from"./react-vendor-C7VPsBAG.js";import{u as A,P as T,b as u,N as p,a0 as o,C as h,a1 as l,B as b,ai as d,a3 as g,a7 as q,F as B,V as O}from"./index-Bshoxa3b.js";import{C as y}from"./crown-DnGdiNOO.js";import{G as R}from"./gift-CIPErmUR.js";import{Z as M}from"./zap-CuepkoNH.js";import{S as U}from"./sparkles-DRgf5F8q.js";import"./utils-vendor-BUCX3MvZ.js";function H(){const[,i]=E(),{isAuthenticated:m,isLoading:j}=A(),{toast:x}=T(),[D,I]=k.useState(null),{data:f,isLoading:N}=u({queryKey:["/api/subscriptions/packages"],queryFn:async()=>{const s=await fetch("/api/subscriptions/packages",{credentials:"include"});if(!s.ok)throw new Error("Failed to fetch packages");return s.json()}}),{data:t}=u({queryKey:["/api/subscriptions/current"],queryFn:async()=>{const s=await fetch("/api/subscriptions/current",{credentials:"include"});if(s.status===404)return null;if(!s.ok)throw new Error("Failed to fetch subscription");return s.json()},enabled:m}),w=async s=>{if(!m){i("/login?returnTo=/subscriptions");return}try{const r=await fetch("/api/subscriptions/subscribe",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"include",body:JSON.stringify({packageId:s})}),a=await r.json();if(!r.ok)throw new Error(a.message||"Failed to create subscription");a.clientSecret?i(`/subscriptions/checkout?session=${a.clientSecret}`):x({title:"Success",description:"Subscription created successfully!"})}catch(r){x({title:"Error",description:r.message||"Failed to create subscription",variant:"destructive"})}},v=s=>{try{return JSON.parse(s)}catch{return[]}},S=s=>s.toLowerCase().includes("basic")?e.jsx(O,{className:"w-6 h-6"}):s.toLowerCase().includes("premium")?e.jsx(g,{className:"w-6 h-6"}):s.toLowerCase().includes("vip")||s.toLowerCase().includes("elite")?e.jsx(y,{className:"w-6 h-6"}):e.jsx(U,{className:"w-6 h-6"}),C=s=>s.toLowerCase().includes("basic")?"from-blue-500 to-cyan-500":s.toLowerCase().includes("premium")?"from-purple-500 to-pink-500":s.toLowerCase().includes("vip")||s.toLowerCase().includes("elite")?"from-amber-500 to-orange-500":"from-gray-500 to-gray-600";return j||N?e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-black to-gray-900",children:[e.jsx(p,{}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-20",children:[e.jsx(o,{className:"h-12 w-96 mx-auto mb-4 bg-gray-800"}),e.jsx(o,{className:"h-6 w-64 mx-auto mb-12 bg-gray-800"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(s=>e.jsx(o,{className:"h-[600px] bg-gray-800"},s))})]})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-black to-gray-900",children:[e.jsx(p,{}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-16",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-primary/10 border border-primary/20 rounded-full mb-6",children:[e.jsx(y,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"text-sm font-semibold text-primary",children:"VIP Membership"})]}),e.jsx("h1",{className:"text-4xl sm:text-6xl font-bold text-white mb-4",children:"Choose Your Plan"}),e.jsx("p",{className:"text-gray-400 text-lg max-w-2xl mx-auto",children:"Unlock premium features, get exclusive content, and enjoy an ad-free experience"})]}),t&&e.jsx("div",{className:"mb-8",children:e.jsx(h,{className:"bg-gradient-to-r from-primary/20 to-accent/20 border-primary/40 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/20 rounded-lg",children:e.jsx(l,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-semibold",children:"Active Subscription"}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Status: ",t.status," • Renews: ",new Date(t.currentPeriodEnd).toLocaleDateString()]})]})]}),e.jsx(b,{variant:"outline",onClick:()=>i("/subscriptions/manage"),className:"border-primary/40 hover:bg-primary/10",children:"Manage"})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:f?.map((s,r)=>{const a=v(s.features),n=r===1,c=t?.packageId===s.id,L=C(s.name);return e.jsxs(h,{className:d("relative overflow-hidden transition-all duration-300 hover:scale-105",n?"bg-gradient-to-br from-gray-800 to-gray-900 border-2 border-primary shadow-2xl shadow-primary/20":"bg-gray-900/50 border border-gray-800 hover:border-gray-700",c&&"ring-2 ring-primary"),children:[n&&e.jsx("div",{className:"absolute top-0 right-0 bg-gradient-to-r from-primary to-accent text-white text-xs font-bold px-3 py-1 rounded-bl-lg",children:"MOST POPULAR"}),e.jsxs("div",{className:"p-8",children:[e.jsx("div",{className:d("inline-flex p-3 rounded-xl bg-gradient-to-br mb-4",L),children:S(s.name)}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:s.name}),e.jsx("p",{className:"text-gray-400 text-sm mb-6",children:s.description}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-6",children:[e.jsxs("span",{className:"text-5xl font-bold text-white",children:["$",s.priceUSD]}),e.jsxs("span",{className:"text-gray-400",children:["/",s.billingCycle]})]}),s.coinBonus>0&&e.jsxs("div",{className:"flex items-center gap-2 bg-primary/10 border border-primary/20 rounded-lg p-3 mb-6",children:[e.jsx(R,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-white text-sm font-semibold",children:[s.coinBonus," Bonus Coins"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Every month"})]})]}),e.jsx(b,{onClick:()=>w(s.id),disabled:c,className:d("w-full mb-6",n?"bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90":"bg-gray-800 hover:bg-gray-700"),size:"lg",children:c?"Current Plan":"Subscribe Now"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-300 mb-3",children:"Features:"}),a.map((P,F)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(l,{className:"w-5 h-5 text-primary shrink-0 mt-0.5"}),e.jsx("span",{className:"text-sm text-gray-300",children:P})]},F)),s.isAdFree==="true"&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(l,{className:"w-5 h-5 text-primary shrink-0 mt-0.5"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Ad-free experience"})]}),s.earlyAccess==="true"&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(M,{className:"w-5 h-5 text-amber-500 shrink-0 mt-0.5"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Early chapter access"})]}),s.exclusiveContent==="true"&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(g,{className:"w-5 h-5 text-purple-500 shrink-0 mt-0.5"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Exclusive content"})]}),s.discountPercentage>0&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(q,{className:"w-5 h-5 text-green-500 shrink-0 mt-0.5"}),e.jsxs("span",{className:"text-sm text-gray-300",children:[s.discountPercentage,"% off coin purchases"]})]})]})]})]},s.id)})}),e.jsx("div",{className:"text-center text-gray-400 text-sm",children:e.jsx("p",{children:"All subscriptions can be cancelled anytime • Secure payment via Stripe"})})]}),e.jsx(B,{})]})}export{H as default};
