import{W as I,M as J,J as z,j as e,c as P,X as W,i as y,u as C,Y as X,k as j,a as Y,U as Z,Q as ee}from"./ui-vendor-BpIggZZ9.js";import{b as n}from"./react-vendor-C7VPsBAG.js";import{ai as _,ak as se,P as ae,ah as re,al as te,C as oe,f as ne,g as ie,h as le,i as de,L as w,m as S,af as ce,p as k,B as E}from"./index-Bshoxa3b.js";import{C as ue}from"./chart-column-DGETuS3s.js";var N="Radio",[pe,A]=P(N),[me,fe]=pe(N),G=n.forwardRef((o,i)=>{const{__scopeRadio:s,name:l,checked:t=!1,required:r,disabled:d,value:c="on",onCheck:u,form:p,...m}=o,[f,h]=n.useState(null),a=C(i,b=>h(b)),v=n.useRef(!1),x=f?p||!!f.closest("form"):!0;return e.jsxs(me,{scope:s,checked:t,disabled:d,children:[e.jsx(y.button,{type:"button",role:"radio","aria-checked":t,"data-state":M(t),"data-disabled":d?"":void 0,disabled:d,value:c,...m,ref:a,onClick:j(o.onClick,b=>{t||u?.(),x&&(v.current=b.isPropagationStopped(),v.current||b.stopPropagation())})}),x&&e.jsx(D,{control:f,bubbles:!v.current,name:l,value:c,checked:t,required:r,disabled:d,form:p,style:{transform:"translateX(-100%)"}})]})});G.displayName=N;var L="RadioIndicator",F=n.forwardRef((o,i)=>{const{__scopeRadio:s,forceMount:l,...t}=o,r=fe(L,s);return e.jsx(Y,{present:l||r.checked,children:e.jsx(y.span,{"data-state":M(r.checked),"data-disabled":r.disabled?"":void 0,...t,ref:i})})});F.displayName=L;var ve="RadioBubbleInput",D=n.forwardRef(({__scopeRadio:o,control:i,checked:s,bubbles:l=!0,...t},r)=>{const d=n.useRef(null),c=C(d,r),u=Z(s),p=ee(i);return n.useEffect(()=>{const m=d.current;if(!m)return;const f=window.HTMLInputElement.prototype,a=Object.getOwnPropertyDescriptor(f,"checked").set;if(u!==s&&a){const v=new Event("click",{bubbles:l});a.call(m,s),m.dispatchEvent(v)}},[u,s,l]),e.jsx(y.input,{type:"radio","aria-hidden":!0,defaultChecked:s,...t,tabIndex:-1,ref:c,style:{...t.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});D.displayName=ve;function M(o){return o?"checked":"unchecked"}var he=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],R="RadioGroup",[xe]=P(R,[I,A]),T=I(),q=A(),[be,ge]=xe(R),B=n.forwardRef((o,i)=>{const{__scopeRadioGroup:s,name:l,defaultValue:t,value:r,required:d=!1,disabled:c=!1,orientation:u,dir:p,loop:m=!0,onValueChange:f,...h}=o,a=T(s),v=J(p),[x,b]=z({prop:r,defaultProp:t??null,onChange:f,caller:R});return e.jsx(be,{scope:s,name:l,required:d,disabled:c,value:x,onValueChange:b,children:e.jsx(W,{asChild:!0,...a,orientation:u,dir:v,loop:m,children:e.jsx(y.div,{role:"radiogroup","aria-required":d,"aria-orientation":u,"data-disabled":c?"":void 0,dir:v,...h,ref:i})})})});B.displayName=R;var O="RadioGroupItem",U=n.forwardRef((o,i)=>{const{__scopeRadioGroup:s,disabled:l,...t}=o,r=ge(O,s),d=r.disabled||l,c=T(s),u=q(s),p=n.useRef(null),m=C(i,p),f=r.value===t.value,h=n.useRef(!1);return n.useEffect(()=>{const a=x=>{he.includes(x.key)&&(h.current=!0)},v=()=>h.current=!1;return document.addEventListener("keydown",a),document.addEventListener("keyup",v),()=>{document.removeEventListener("keydown",a),document.removeEventListener("keyup",v)}},[]),e.jsx(X,{asChild:!0,...c,focusable:!d,active:f,children:e.jsx(G,{disabled:d,required:r.required,checked:f,...u,...t,name:r.name,ref:m,onCheck:()=>r.onValueChange(t.value),onKeyDown:j(a=>{a.key==="Enter"&&a.preventDefault()}),onFocus:j(t.onFocus,()=>{h.current&&p.current?.click()})})})});U.displayName=O;var ye="RadioGroupIndicator",$=n.forwardRef((o,i)=>{const{__scopeRadioGroup:s,...l}=o,t=q(s);return e.jsx(F,{...t,...l,ref:i})});$.displayName=ye;var K=B,V=U,Re=$;const H=n.forwardRef(({className:o,...i},s)=>e.jsx(K,{className:_("grid gap-2",o),...i,ref:s}));H.displayName=K.displayName;const Q=n.forwardRef(({className:o,...i},s)=>e.jsx(V,{ref:s,className:_("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",o),...i,children:e.jsx(Re,{className:"flex items-center justify-center",children:e.jsx(se,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Q.displayName=V.displayName;const g=[{level:1,label:"Light 游릭",description:"Ads on every page - 1 ad only (no popups)",icon:"游릭"},{level:2,label:"Moderate 游리",description:"Big pages (homepage, browse): up to 3 ads. Smaller pages: up to 2 ads. Popups allowed",icon:"游리"},{level:3,label:"Heavy 游댮",description:"Big pages (homepage, browse): up to 5 ads. Smaller pages: up to 3 ads. Popups allowed. Maximum revenue",icon:"游댮"}];function Se(){const{toast:o}=ae(),i=re(),{level:s,enabled:l,isLoading:t}=te(),[r,d]=n.useState(s),[c,u]=n.useState(l),[p,m]=n.useState(!1);n.useEffect(()=>{d(s),u(l)},[s,l]);const f=async()=>{m(!0);try{if(!(await fetch("/api/admin/settings/system/ad_intensity_level",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:"system",key:"ad_intensity_level",value:r.toString(),type:"number",description:"Controls ad quantity per page: 1 (1 ad/page), 2 (multiple ads on big pages), 3 (max ads)",isPublic:!0})})).ok)throw new Error("Failed to update ad intensity level");if(!(await fetch("/api/admin/settings/system/ads_enabled",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:"system",key:"ads_enabled",value:c.toString(),type:"boolean",description:"Global toggle to enable/disable all advertisements",isPublic:!0})})).ok)throw new Error("Failed to update ads enabled status");await i.invalidateQueries({queryKey:["ad-intensity"]}),await i.invalidateQueries({queryKey:["admin-settings"]}),o({title:"Success",description:`Ads ${c?"enabled":"disabled"} at Level ${r} (${g.find(x=>x.level===r)?.label})`})}catch(a){o({title:"Error",description:a instanceof Error?a.message:"Failed to update ad settings",variant:"destructive"})}finally{m(!1)}},h=r!==s||c!==l;return e.jsxs(oe,{className:"border-2 border-purple-500/20",children:[e.jsxs(ne,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-5 w-5 text-purple-500"}),e.jsx(ie,{children:"Ad Intensity Control"})]}),e.jsx(le,{children:"Turn ads on/off and control ad quantity per page. Higher levels show more ads for increased revenue."})]}),e.jsx(de,{children:t?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(w,{className:"h-6 w-6 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border-2 border-purple-500/30 bg-purple-50 dark:bg-purple-950/20",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(S,{htmlFor:"ads-enabled",className:"text-base font-semibold",children:"Advertisements System"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:c?"Ads are currently enabled on the website":"All ads are disabled - no ads will show"})]}),e.jsx(ce,{id:"ads-enabled",checked:c,onCheckedChange:u,className:"ml-4"})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Current Level"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[s," - ",g.find(a=>a.level===s)?.label]})]}),e.jsx(k,{variant:s===3?"default":s===2?"secondary":"outline",className:"text-lg px-4 py-1",children:g.find(a=>a.level===s)?.icon})]}),e.jsx(H,{value:r.toString(),onValueChange:a=>d(parseInt(a)),className:"space-y-3",children:g.map(a=>e.jsxs("div",{className:`flex items-start space-x-3 p-4 rounded-lg border-2 transition-all ${r===a.level?"border-purple-500 bg-purple-50 dark:bg-purple-950/20":"border-gray-200 dark:border-gray-700 hover:border-purple-300"}`,children:[e.jsx(Q,{value:a.level.toString(),id:`level-${a.level}`,className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs(S,{htmlFor:`level-${a.level}`,className:"flex items-center gap-2 font-semibold cursor-pointer",children:[e.jsx("span",{className:"text-2xl",children:a.icon}),e.jsxs("span",{children:["Level ",a.level," - ",a.label]}),s===a.level&&e.jsx(k,{variant:"outline",className:"ml-2",children:"Current"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:a.description})]})]},a.level))}),e.jsxs("div",{className:"flex items-center gap-3 pt-4",children:[e.jsx(E,{onClick:f,disabled:!h||p,className:"flex-1",children:p?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"}),h&&e.jsx(E,{variant:"outline",onClick:()=>{d(s),u(l)},disabled:p,children:"Reset"})]})]})})]})}export{Se as A};
