import{j as e}from"./ui-vendor-BpIggZZ9.js";import{b as n}from"./react-vendor-C7VPsBAG.js";import{P as h,C as f,f as j,g,i as y,B as w,$ as o}from"./index-Bshoxa3b.js";import{G as N}from"./gift-CIPErmUR.js";import{C}from"./calendar-ByILsbL3.js";import"./utils-vendor-BUCX3MvZ.js";function $(){const[t,l]=n.useState(null),[d,m]=n.useState(!0),{toast:r}=h();n.useEffect(()=>{c()},[]);const c=async()=>{try{const s=await fetch("/api/rewards/daily-status",{credentials:"include"});if(s.ok){const a=await s.json();l(a)}}catch{}finally{m(!1)}},x=async()=>{try{const s=await fetch("/api/rewards/claim-daily",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}});if(s.ok){const a=await s.json();r({title:"Reward Claimed!",description:`You received ${a.coinsEarned} coins for Day ${a.day}!`}),c()}else{const a=await s.json();r({variant:"destructive",title:"Error",description:a.message})}}catch{r({variant:"destructive",title:"Error",description:"Failed to claim reward"})}};if(d)return e.jsx("div",{className:"container mx-auto py-8",children:e.jsx("div",{className:"text-center",children:"Loading daily rewards..."})});const u=Array.from({length:14},(s,a)=>a+1);return e.jsx("div",{className:"container mx-auto py-8 px-4",children:e.jsxs(f,{children:[e.jsx(j,{children:e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-6 w-6"}),"Daily Login Rewards"]})}),e.jsxs(y,{children:[e.jsxs("div",{className:"mb-6 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[e.jsx(C,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold",children:["Day ",t?.currentDay||1]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t?.claimedToday?"Come back tomorrow!":"Ready to claim"})]})]}),t?.canClaim&&e.jsxs(w,{onClick:x,size:"lg",className:"gap-2",children:[e.jsx(o,{className:"h-5 w-5"}),"Claim ",t.nextReward," Coins"]}),t?.claimedToday&&e.jsx("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-green-500/10 text-green-600 rounded-lg",children:"âœ“ Today's reward claimed!"})]}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:u.map(s=>{const a=s===t?.currentDay,p=s<(t?.currentDay||1),i=s%7===0;return e.jsxs("div",{className:`
                    p-3 rounded-lg border-2 text-center transition-all
                    ${a?"border-primary bg-primary/10 scale-105":"border-border"}
                    ${p?"bg-muted/50":""}
                    ${i?"ring-2 ring-yellow-500":""}
                  `,children:[e.jsxs("div",{className:"text-xs text-muted-foreground mb-1",children:["Day ",s]}),e.jsxs("div",{className:"font-bold flex items-center justify-center gap-1",children:[e.jsx(o,{className:"h-3 w-3"}),i?s*10+30:s*5+5]}),i&&e.jsx("div",{className:"text-xs text-yellow-600 mt-1",children:"Bonus!"})]},s)})})]})]})})}export{$ as default};
