import{j as e}from"./ui-vendor-BpIggZZ9.js";import{u as b}from"./react-vendor-C7VPsBAG.js";import{u as y,s as w,O as k,P as C,e as n,N as x,Q as c,B as r,F as h,C as u,i as g,p as d,T as R,K as L}from"./index-Bshoxa3b.js";import{i as A}from"./utils-vendor-BUCX3MvZ.js";function D(){const{isAuthenticated:m,isLoading:f}=y(),{progressList:i,isLoading:l}=w(m),{deleteProgress:j}=k(),[,a]=b(),{toast:p}=C();if(f)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(n,{className:"w-12 h-12 text-primary mx-auto mb-4 animate-pulse"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})});if(!m)return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(x,{}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-20 text-center",children:[e.jsx(c,{className:"w-20 h-20 text-primary/50 mx-auto mb-6"}),e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-4",children:"Sign in to view your history"}),e.jsx("p",{className:"text-muted-foreground mb-8",children:"Create an account or sign in to track your reading history and continue where you left off."}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx(r,{onClick:()=>a("/login"),className:"bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90",children:"Sign In"}),e.jsx(r,{onClick:()=>a("/signup"),variant:"outline",children:"Create Account"})]})]}),e.jsx(h,{})]});const N=(s,t)=>{confirm(`Remove "${t}" from your reading history?`)&&(j(s),p({title:"History cleared",description:`Removed "${t}" from your reading history.`}))},v=(s,t,o)=>{a(`/manga/${s}`)};return e.jsxs("div",{className:"min-h-screen bg-background w-full overflow-x-hidden",children:[e.jsx(x,{}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-accent rounded-lg flex items-center justify-center shadow-lg",children:e.jsx(c,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold bg-gradient-to-r from-primary via-accent to-purple-400 bg-clip-text text-transparent",children:"Reading History"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[i.length," ",(i.length===1,"series")," in progress"]})]})]})}),l&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(n,{className:"w-12 h-12 text-primary mx-auto mb-4 animate-pulse"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading your history..."})]}),!l&&i.length===0&&e.jsx(u,{className:"bg-card/80 backdrop-blur-md border-border/50",children:e.jsxs(g,{className:"py-16 text-center",children:[e.jsx(c,{className:"w-16 h-16 text-muted-foreground/50 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No reading history yet"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Start reading manga to track your progress and continue where you left off!"}),e.jsx(r,{onClick:()=>a("/browse"),className:"bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90",children:"Browse Manga"})]})}),!l&&i.length>0&&e.jsx("div",{className:"space-y-4",children:i.map(s=>e.jsx(u,{className:"group bg-card/80 backdrop-blur-md border-border/50 hover:border-primary/60 transition-all duration-300 hover:shadow-lg hover:shadow-primary/20",children:e.jsx(g,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"relative w-20 sm:w-32 h-28 sm:h-44 flex-shrink-0 overflow-hidden rounded-lg cursor-pointer",onClick:()=>a(`/manga/${s.series.id}`),children:[s.series.coverImageUrl?e.jsx("img",{src:s.series.coverImageUrl,alt:s.series.title,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-muted/80 to-muted/60 flex items-center justify-center",children:e.jsx(n,{className:"w-8 h-8 text-muted-foreground/50"})}),s.series.status&&e.jsx(d,{className:"absolute top-2 left-2 bg-primary/90 backdrop-blur-sm text-xs",children:s.series.status})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start gap-2 mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>a(`/manga/${s.series.id}`),children:[e.jsx("h3",{className:"font-bold text-lg sm:text-xl text-foreground group-hover:text-primary transition-colors mb-1 line-clamp-2",children:s.series.title}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:(()=>{const t=typeof s.series.genres=="string"?JSON.parse(s.series.genres):s.series.genres;return Array.isArray(t)&&t.slice(0,3).map(o=>e.jsx(d,{variant:"outline",className:"text-xs",children:o},o))})()})]}),e.jsx(r,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-destructive flex-shrink-0",onClick:()=>N(s.series.id,s.series.title),children:e.jsx(R,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[s.chapterId&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(d,{variant:"secondary",className:"bg-primary/20 text-primary",children:"Reading in progress"}),e.jsxs("span",{className:"text-muted-foreground",children:["Page ",s.lastReadPage||1]})]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Last read ",s.lastReadAt?A(new Date(s.lastReadAt),{addSuffix:!0}):"Recently"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{size:"sm",className:"bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90",onClick:()=>v(s.series.id,s.chapterId),children:[e.jsx(n,{className:"w-4 h-4 mr-2"}),"Continue Reading"]}),e.jsx(r,{size:"sm",variant:"outline",onClick:()=>a(`/manga/${s.series.id}`),children:"View Details"})]})]})]})})},s.id))})]}),e.jsx(h,{})]})}export{D as default};
