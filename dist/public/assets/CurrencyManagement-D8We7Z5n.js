import{j as e}from"./ui-vendor-BpIggZZ9.js";import{b as x}from"./react-vendor-C7VPsBAG.js";import{_ as V,P as $,B as l,C as g,f as p,g as y,i as v,a7 as z,h as _,$ as G,p as N,T as J,m as n,I as c,a5 as C,r as f}from"./index-Bshoxa3b.js";import{P as W,T as X,a as Y,b as A,c as i,d as Z,e as t}from"./table-BP19whss.js";import{D as S,a as D,b as k,c as w,d as O,e as T}from"./dialog-B4soTW2z.js";import{S as U,a as F,b as E,c as I,d as m}from"./select-DT_5i3rD.js";import{P as ee}from"./plus-CIXQeA2Y.js";import{D as se}from"./dollar-sign-c3-1CJgR.js";import{S as ae}from"./square-pen-C7u-hRzu.js";import"./utils-vendor-BUCX3MvZ.js";function xe(){const{data:o,isLoading:B}=V(!1),{toast:d}=$(),[q,u]=x.useState(!1),[H,h]=x.useState(!1),[b,P]=x.useState(null),[a,r]=x.useState({name:"",currencyAmount:"",priceUSD:"",bonusPercentage:"0",isActive:"true",displayOrder:"0"}),L=async()=>{try{await C("POST","/api/currency/packages",{...a,currencyAmount:parseInt(a.currencyAmount),bonusPercentage:parseInt(a.bonusPercentage),displayOrder:parseInt(a.displayOrder)}),f.invalidateQueries({queryKey:["/api/currency/packages"]}),u(!1),r({name:"",currencyAmount:"",priceUSD:"",bonusPercentage:"0",isActive:"true",displayOrder:"0"}),d({title:"Package Created",description:"Currency package has been created successfully."})}catch(s){d({title:"Error",description:s.message||"Failed to create package",variant:"destructive"})}},K=async()=>{if(b)try{await C("PATCH",`/api/currency/packages/${b.id}`,{...a,currencyAmount:parseInt(a.currencyAmount),bonusPercentage:parseInt(a.bonusPercentage),displayOrder:parseInt(a.displayOrder)}),f.invalidateQueries({queryKey:["/api/currency/packages"]}),h(!1),P(null),d({title:"Package Updated",description:"Currency package has been updated successfully."})}catch(s){d({title:"Error",description:s.message||"Failed to update package",variant:"destructive"})}},M=async s=>{if(confirm("Are you sure you want to delete this package?"))try{await C("DELETE",`/api/currency/packages/${s}`),f.invalidateQueries({queryKey:["/api/currency/packages"]}),d({title:"Package Deleted",description:"Currency package has been deleted successfully."})}catch(j){d({title:"Error",description:j.message||"Failed to delete package",variant:"destructive"})}},Q=s=>{P(s),r({name:s.name,currencyAmount:s.currencyAmount.toString(),priceUSD:s.priceUSD,bonusPercentage:s.bonusPercentage.toString(),isActive:s.isActive,displayOrder:s.displayOrder.toString()}),h(!0)},R=(s,j)=>s+Math.floor(s*j/100);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Currency Packages"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage shop packages for currency purchases"})]}),e.jsxs(l,{onClick:()=>u(!0),children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Create Package"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(g,{children:[e.jsxs(p,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Total Packages"}),e.jsx(W,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(v,{children:e.jsx("div",{className:"text-2xl font-bold",children:o?.length||0})})]}),e.jsxs(g,{children:[e.jsxs(p,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Active Packages"}),e.jsx(z,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(v,{children:e.jsx("div",{className:"text-2xl font-bold",children:o?.filter(s=>s.isActive==="true").length||0})})]})]}),e.jsxs(g,{children:[e.jsxs(p,{children:[e.jsx(y,{children:"Currency Packages"}),e.jsx(_,{children:"Configure packages available in the shop"})]}),e.jsx(v,{children:B?e.jsx("div",{children:"Loading..."}):o&&o.length>0?e.jsxs(X,{children:[e.jsx(Y,{children:e.jsxs(A,{children:[e.jsx(i,{children:"Name"}),e.jsx(i,{children:"Coins"}),e.jsx(i,{children:"Price"}),e.jsx(i,{children:"Bonus"}),e.jsx(i,{children:"Total Coins"}),e.jsx(i,{children:"Status"}),e.jsx(i,{children:"Order"}),e.jsx(i,{className:"text-right",children:"Actions"})]})}),e.jsx(Z,{children:o.map(s=>e.jsxs(A,{children:[e.jsx(t,{className:"font-medium",children:s.name}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(G,{className:"w-4 h-4 text-primary"}),s.currencyAmount]})}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(se,{className:"w-4 h-4 text-green-500"}),s.priceUSD]})}),e.jsx(t,{children:s.bonusPercentage>0?e.jsxs(N,{variant:"secondary",children:["+",s.bonusPercentage,"%"]}):e.jsx("span",{className:"text-muted-foreground",children:"No bonus"})}),e.jsx(t,{className:"font-semibold",children:R(s.currencyAmount,s.bonusPercentage)}),e.jsx(t,{children:e.jsx(N,{variant:s.isActive==="true"?"default":"secondary",children:s.isActive==="true"?"Active":"Inactive"})}),e.jsx(t,{children:s.displayOrder}),e.jsx(t,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>Q(s),children:e.jsx(ae,{className:"w-4 h-4"})}),e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>M(s.id),children:e.jsx(J,{className:"w-4 h-4"})})]})})]},s.id))})]}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No currency packages found. Create one to get started."})})]}),e.jsx(S,{open:q,onOpenChange:u,children:e.jsxs(D,{className:"max-w-md",children:[e.jsxs(k,{children:[e.jsx(w,{children:"Create Currency Package"}),e.jsx(O,{children:"Add a new package to the shop"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"name",children:"Package Name"}),e.jsx(c,{id:"name",value:a.name,onChange:s=>r({...a,name:s.target.value}),placeholder:"Starter Pack"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"currencyAmount",children:"Base Coins"}),e.jsx(c,{id:"currencyAmount",type:"number",value:a.currencyAmount,onChange:s=>r({...a,currencyAmount:s.target.value}),placeholder:"100"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"bonusPercentage",children:"Bonus %"}),e.jsx(c,{id:"bonusPercentage",type:"number",value:a.bonusPercentage,onChange:s=>r({...a,bonusPercentage:s.target.value}),placeholder:"0"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"priceUSD",children:"Price (USD)"}),e.jsx(c,{id:"priceUSD",value:a.priceUSD,onChange:s=>r({...a,priceUSD:s.target.value}),placeholder:"4.99"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"displayOrder",children:"Display Order"}),e.jsx(c,{id:"displayOrder",type:"number",value:a.displayOrder,onChange:s=>r({...a,displayOrder:s.target.value}),placeholder:"0"})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"isActive",children:"Status"}),e.jsxs(U,{value:a.isActive,onValueChange:s=>r({...a,isActive:s}),children:[e.jsx(F,{children:e.jsx(E,{})}),e.jsxs(I,{children:[e.jsx(m,{value:"true",children:"Active"}),e.jsx(m,{value:"false",children:"Inactive"})]})]})]})]}),e.jsxs(T,{children:[e.jsx(l,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),e.jsx(l,{onClick:L,children:"Create Package"})]})]})}),e.jsx(S,{open:H,onOpenChange:h,children:e.jsxs(D,{className:"max-w-md",children:[e.jsxs(k,{children:[e.jsx(w,{children:"Edit Currency Package"}),e.jsx(O,{children:"Update package details"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"edit-name",children:"Package Name"}),e.jsx(c,{id:"edit-name",value:a.name,onChange:s=>r({...a,name:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"edit-currencyAmount",children:"Base Coins"}),e.jsx(c,{id:"edit-currencyAmount",type:"number",value:a.currencyAmount,onChange:s=>r({...a,currencyAmount:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"edit-bonusPercentage",children:"Bonus %"}),e.jsx(c,{id:"edit-bonusPercentage",type:"number",value:a.bonusPercentage,onChange:s=>r({...a,bonusPercentage:s.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"edit-priceUSD",children:"Price (USD)"}),e.jsx(c,{id:"edit-priceUSD",value:a.priceUSD,onChange:s=>r({...a,priceUSD:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"edit-displayOrder",children:"Display Order"}),e.jsx(c,{id:"edit-displayOrder",type:"number",value:a.displayOrder,onChange:s=>r({...a,displayOrder:s.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"edit-isActive",children:"Status"}),e.jsxs(U,{value:a.isActive,onValueChange:s=>r({...a,isActive:s}),children:[e.jsx(F,{children:e.jsx(E,{})}),e.jsxs(I,{children:[e.jsx(m,{value:"true",children:"Active"}),e.jsx(m,{value:"false",children:"Inactive"})]})]})]})]}),e.jsxs(T,{children:[e.jsx(l,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),e.jsx(l,{onClick:K,children:"Update Package"})]})]})})]})}export{xe as default};
